<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="21492"><title>MayaImportx86.dll for Maya 8.5</title><posts><post id="p198418" date="Posted: Sun May 04, 2008 10:25 am "><author>greebo</author><body><![CDATA[<div class="postbody">Hey folks,<br /><br />I don't know if anyone of you is using Maya 8.5 to create MD5s for Doom 3, but I thought I'd let you know that I've managed to compile a <span style="font-weight: bold">MayaImportx86.dll</span> module which makes the <span style="font-weight: bold">exportModels</span> command compatible to Maya 8.5. <br /><br />Here you go: <a href="https://web.archive.org/web/20081121040010/http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip" class="postlink">http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip</a><br /><br />Ultra-short readme:<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Drop these three DLL files into your Doom 3 folder (the one next to DOOM3.exe). Then use the "exportModels" console command to export your models.<br /><br />Be sure to add the C:\Program Files\AutoDesk\Maya\bin folder to your PATH environment variable (and restart D3).<br /><br />Plus, add MAYA_LOCATION as new environment variable, pointing to your Maya installation root path: <br /><br />	Variable Name: MAYA_LOCATION<br />	Variable Value: C:\Program Files\Autodesk\Maya<br /><br />If Doom 3 complains about "Maya not installed in Registry", double-click the enclosed file <span style="font-weight: bold">MayaNotInstalledInRegistryFix.reg</span>, which will add a (harmless) key to your registry. The unaltered SDK code expects a Maya key below "Alias|WaveFront", but incidentally, Maya is now produced by "Autodesk" and the regular check fails.</div></div>]]></body></post><post id="p198419" date="Posted: Sun May 04, 2008 11:11 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Go ahead and upload it here on the forums. I'm sure someone will find it useful.</div>]]></body></post><post id="p198420" date="Posted: Sun May 04, 2008 12:01 pm "><author>greebo</author><body><![CDATA[<div class="postbody">Ok, here you are (forum only allows 512 kB attachments, hence a link to our TDM FTP):<br /><br /><a href="https://web.archive.org/web/20081121040010/http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip" class="postlink">MayaImportx86.dll for Maya 8.5</a><br /><br />The package also contains a mfc80.dll and msvcr80.dll as I couldn't be bothered to figure out how to remove these dependencies. I assume they are coming from the Maya libraries, but I can't be sure. Let me know if it works.</div>]]></body></post><post id="p198421" date="Posted: Sun May 04, 2008 1:37 pm "><author>BNA!</author><body><![CDATA[<div class="postbody">Thanks for creating this!<br /><br />All things supporting Doom3 technology are always very welcome.</div>]]></body></post><post id="p198445" date="Posted: Mon May 05, 2008 2:29 am "><author>parsonsbear</author><body><![CDATA[<div class="postbody">Awesome, thank you. I heard splash damage may release a new version of the import .dll for 2008, perhaps with the next sdk release?<br /><br />Can you document the steps taken to compile against the newer version of maya? nothing too detailed, but if there was anything about the process you ran across, let us know.</div>]]></body></post><post id="p198766" date="Posted: Fri May 09, 2008 4:02 pm "><author>greebo</author><body><![CDATA[<div class="postbody">I've updated the package on the DarkMod FTP and my first post, it contains now a "registry fix" for a common problem. Maya is now produced by "AutoDesk", not "Alias|WaveFront", which causes the SDK to look for the wrong registry key. A stupid way to check for an app anyway, but oh well.<br /><br />I also included a README.txt in the package, which contains rudimentary installation instructions.</div>]]></body></post><post id="p198802" date="Posted: Sat May 10, 2008 7:21 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Thanks for the updates on the wiki aswell.</div>]]></body></post><post id="p198803" date="Posted: Sat May 10, 2008 7:35 am "><author>greebo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent">Thanks for the updates on the wiki aswell.</div><br />You're welcome. <img src="https://web.archive.org/web/20081121040010im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> Hopefully there are any people left who will look for something like this, they are getting fewer and fewer these days, aren't they?<br /><br />Btw: oDDity has reported some problems with the above package. He had performed all of the necessary steps, but it's still crashing ("<span style="font-style: italic">pure virtual function call</span>"), which might be related to the Vista x64 environment. I'm not sure whether installing the VC++ redistributable package might help instead of using the ones I included in the package. At any rate, I cannot do much about it here as I neither have Vista nor x64.</div>]]></body></post><post id="p199111" date="Posted: Fri May 16, 2008 10:31 pm "><author>simulation</author><body><![CDATA[<div class="postbody"><div class="quotetitle">greebo wrote:</div><div class="quotecontent"><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent">Btw: oDDity has reported some problems with the above package. He had performed all of the necessary steps, but it's still crashing ("<span style="font-style: italic">pure virtual function call</span>"), which might be related to the Vista x64 environment. I'm not sure whether installing the VC++ redistributable package might help instead of using the ones I included in the package. At any rate, I cannot do much about it here as I neither have Vista nor x64.</div></div><br /><br />I'm using Vista64. First hurdle is to create correct registry key for the 32-bit subsystem...<br /><br />HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Alias|Wavefront\Maya (wiki updated with this)<br /><br />Second hurdle...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">exportmodels test<br />WARNING: file C:\_mods\doom3\test\def\test.def, line 4: Failed to export 'models/test.mb' : Could not load MayaImport dll.</div><br /><br />I've run sysinternals procexp and traced the file i/o. I can see it load MayaImporterx86.dll followed by these Maya DLLs...<br />Foundation.dll<br />MayaRes.dll<br />Base.dll<br />AppVersion.dll<br />libguide40.dll<br /><br />Any clues? Using Maya 8.5 PLE by the way.<br /><br />I've tried compiling my own version so I can debug but I get a ton of linker errors relating to Maya, like these.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: float __thiscall MFloatPoint::operator[](unsigned int)const " (__imp_??AMFloatPoint@@QBEMI@Z) referenced in function "class idVec3 __cdecl idVec(class MFloatPoint const &amp;)" (?idVec@@YA?AVidVec3@@ABVMFloatPoint@@@Z)<br />1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall MFnDagNode::~MFnDagNode(void)" (__imp_??1MFnDagNode@@UAE@XZ) referenced in function "class MFnDagNode * __cdecl GetParent(class MFnDagNode *)" (?GetParent@@YAPAVMFnDagNode@@PAV1@@Z)<br />1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall MFnDagNode::MFnDagNode(class MObject &amp;,class MStatus *)" (__imp_??0MFnDagNode@@QAE@AAVMObject@@PAVMStatus@@@Z) referenced in function "class MFnDagNode * __cdecl GetParent(class MFnDagNode *)" (?GetParent@@YAPAVMFnDagNode@@PAV1@@Z)<br /></div><br />Would you mind sending me your updated MayaImporter project files so I can see what I'm missing. I've tried linking in every damn .lib in the Maya folder but no joy so I guess my other project settings are bad.</div>]]></body></post><post id="p199119" date="Posted: Sat May 17, 2008 5:44 am "><author>greebo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">simulation wrote:</div><div class="quotecontent"><div class="quotetitle">greebo wrote:</div><div class="quotecontent"><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent">Btw: oDDity has reported some problems with the above package. He had performed all of the necessary steps, but it's still crashing ("<span style="font-style: italic">pure virtual function call</span>"), which might be related to the Vista x64 environment. I'm not sure whether installing the VC++ redistributable package might help instead of using the ones I included in the package. At any rate, I cannot do much about it here as I neither have Vista nor x64.</div></div><br /><br />I'm using Vista64. First hurdle is to create correct registry key for the 32-bit subsystem...<br /><br />HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Alias|Wavefront\Maya (wiki updated with this)</div><br />Ah, great hint, thanks for that. I never happened to use anything on an x64 OS, that's why I don't know these things.<br /><br /><div class="quotetitle">simulation wrote:</div><div class="quotecontent"><div class="codetitle"><b>Code:</b></div><div class="codecontent">exportmodels test<br />WARNING: file C:\_mods\doom3\test\def\test.def, line 4: Failed to export 'models/test.mb' : Could not load MayaImport dll.</div><br /><br />I've run sysinternals procexp and traced the file i/o. I can see it load MayaImporterx86.dll followed by these Maya DLLs...<br />Foundation.dll<br />MayaRes.dll<br />Base.dll<br />AppVersion.dll<br />libguide40.dll<br /><br />Any clues? Using Maya 8.5 PLE by the way.</div><br />You can use the Dependency Walker application to see what other DLLs want to be loaded by the module. I've uploaded it to our FTP, but you can find it on some Microsoft download sites as well: <!-- m --><a class="postlink" href="https://web.archive.org/web/20081121040010/http://208.49.149.118/TheDarkMod/temp/depends.zip">http://208.49.149.118/TheDarkMod/temp/depends.zip</a><!-- m --><br /><br />The other way of debugging this is to catch the DLL load error message in the SDK file anim_import.cpp, to see which error message gets thrown when loading the DLL.<br /><br /><div class="quotetitle">simulation wrote:</div><div class="quotecontent">I've tried compiling my own version so I can debug but I get a ton of linker errors relating to Maya, like these.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: float __thiscall MFloatPoint::operator[](unsigned int)const " (__imp_??AMFloatPoint@@QBEMI@Z) referenced in function "class idVec3 __cdecl idVec(class MFloatPoint const &amp;)" (?idVec@@YA?AVidVec3@@ABVMFloatPoint@@@Z)<br />1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall MFnDagNode::~MFnDagNode(void)" (__imp_??1MFnDagNode@@UAE@XZ) referenced in function "class MFnDagNode * __cdecl GetParent(class MFnDagNode *)" (?GetParent@@YAPAVMFnDagNode@@PAV1@@Z)<br />1&gt;obj.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall MFnDagNode::MFnDagNode(class MObject &amp;,class MStatus *)" (__imp_??0MFnDagNode@@QAE@AAVMObject@@PAVMStatus@@@Z) referenced in function "class MFnDagNode * __cdecl GetParent(class MFnDagNode *)" (?GetParent@@YAPAVMFnDagNode@@PAV1@@Z)<br /></div><br />Would you mind sending me your updated MayaImporter project files so I can see what I'm missing. I've tried linking in every damn .lib in the Maya folder but no joy so I guess my other project settings are bad.</div><br />Sounds like some Maya libraries cannot be resolved. I used these:<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Foundation.lib OpenMaya.lib OpenMayaUI.lib OpenMayaAnim.lib OpenMayaFX.lib OpenMayaRender.lib Image.lib</div><br />You should find these files in your Program Files\Autodesk\Maya8.5\lib folder. I don't know what the difference for Maya 8.5 PLE is, maybe there are some import libraries or API DLLs missing? At any rate, I'm happy to upload my vcproj file, although I think you need to embed this into an existing D3 SDK environment, as there are references to idlib.</div>]]></body></post><post id="p199136" date="Posted: Sat May 17, 2008 5:29 pm "><author>simulation</author><body><![CDATA[<div class="postbody">Thanks greebo. Your vcproj file was identical to mine. I just read in the following in the PLE docs...<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">API and Plug-ins<br /><br />    * The API developer's kit is not included with Maya Personal Learning Edition.<br />    * It is not possible to load third party plug-ins, or plug-ins from Maya Complete or other versions of Maya Personal Learning Edition.</div><br />Weird because the "include" and "lib" folders exists with all the right stuff in there. Compiles but just wont link.<br /><br />I guess the stuff shipped with PLE is there for interfacing with PLE only!</div>]]></body></post><post id="p201738" date="Posted: Sat Jul 12, 2008 10:07 am "><author>JCH321</author><body><![CDATA[<div class="postbody">Is it just me or are all the links posted down, except the depends and vcproj file?</div>]]></body></post><post id="p201740" date="Posted: Sat Jul 12, 2008 10:34 am "><author>greebo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">JCH321 wrote:</div><div class="quotecontent">Is it just me or are all the links posted down, except the depends and vcproj file?</div><br />Yes, it seems our FTP has been wiped a bit recently. I've re-uploaded the file, let me know if it works for you:<br /><br /><a href="https://web.archive.org/web/20081121040010/http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip" class="postlink">http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip</a></div>]]></body></post><post id="p203704" date="Posted: Fri Aug 15, 2008 9:33 am "><author>Zombie13</author><body><![CDATA[<div class="postbody"><div class="quotetitle">greebo wrote:</div><div class="quotecontent"><div class="quotetitle">JCH321 wrote:</div><div class="quotecontent">Is it just me or are all the links posted down, except the depends and vcproj file?</div><br />Yes, it seems our FTP has been wiped a bit recently. I've re-uploaded the file, let me know if it works for you:<br /><br /><a href="https://web.archive.org/web/20081121040010/http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip" class="postlink">http://208.49.149.118/TheDarkMod/MayaImportx86(Maya85).zip</a></div><br /><br />I am unable to access this, is it possible to upload it somewhere else, or that it can be stored in multiple places for ease of access?</div>]]></body></post><post id="p203710" date="Posted: Fri Aug 15, 2008 11:56 am "><author>greebo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Zombie13 wrote:</div><div class="quotecontent">I am unable to access this, is it possible to upload it somewhere else, or that it can be stored in multiple places for ease of access?</div><br />Yes, our FTP has been going down fairly often recently, and due to some server outage at TTLG it's been offline for weeks now.<br /><br />Take this: <!-- m --><a class="postlink" href="https://web.archive.org/web/20081121040010/http://www.megaupload.com/de/?d=0EAK067Y">http://www.megaupload.com/de/?d=0EAK067Y</a><!-- m --></div>]]></body></post><post id="p203740" date="Posted: Fri Aug 15, 2008 10:19 pm "><author>Zombie13</author><body><![CDATA[<div class="postbody"><div class="quotetitle">greebo wrote:</div><div class="quotecontent"><div class="quotetitle">Zombie13 wrote:</div><div class="quotecontent">I am unable to access this, is it possible to upload it somewhere else, or that it can be stored in multiple places for ease of access?</div><br />Yes, our FTP has been going down fairly often recently, and due to some server outage at TTLG it's been offline for weeks now.<br /><br />Take this: <!-- m --><a class="postlink" href="https://web.archive.org/web/20081121040010/http://www.megaupload.com/de/?d=0EAK067Y">http://www.megaupload.com/de/?d=0EAK067Y</a><!-- m --></div><br /><br />Fantastic, got it. Thanks a bunch <img src="https://web.archive.org/web/20081121040010im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p203764" date="Posted: Sat Aug 16, 2008 7:46 am "><author>greebo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Zombie13 wrote:</div><div class="quotecontent">Fantastic, got it. Thanks a bunch <img src="https://web.archive.org/web/20081121040010im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div><br />You're welcome. I'm curious whether it works for you at all?<br /><br />Our FTP seems to be back up, but with a different IP: <a href="https://web.archive.org/web/20081121040010/http://72.8.59.188/TheDarkMod/MayaImportx86(Maya85).zip" class="postlink">http://72.8.59.188/TheDarkMod/MayaImportx86(Maya85).zip</a></div>]]></body></post><post id="p203793" date="Posted: Sat Aug 16, 2008 7:17 pm "><author>Zombie13</author><body><![CDATA[<div class="postbody">This crashed Doom 3 here for (but I am using the steam version as I am not at home at the moment). I've used this maya dll before at home when I exported some anims for myself, it worked perfectly, I guess the steam version of Doom 3 doesn't like it <img src="https://web.archive.org/web/20081121040010im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Oh well will have to wait till I go home at the end of the month.</div>]]></body></post></posts></thread></xml>
