<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="3571"><title>Tutorial: Assembling 6 textures to make a Doom3 skybox</title><posts><post id="p33094" date="Posted: Wed Aug 11, 2004 5:53 pm "><author>DavidRoss</author><body><![CDATA[<div class="postbody"><span style="font-weight: bold">Note:</span> This tutorial is to make a basic sky, it won’t move or do anything fancy, as I myself don’t know how to do that yet. However I wanted to write this basic tutorial because when I was trying to find out how to do it I had to look at a few different threads, and peace together the information.
<br /><br /><span style="font-weight: bold">A bit about skyboxes-</span>All a “skybox” is, is a texture with a shader that points to 6 .tga files. It does not actually need to be a box. If you have a window, all you need to do is put a brush on the outside of it, and apply the texture. Basically the brush with the texture applied to it will act like the “window” into your skybox. So no matter how far or close the brush is to your position, the image on it always looks the same to you.
<br /><br /><br /><span style="font-weight: bold">Getting the 6 .tga files-</span>You could create your own from a program called Terragen ( <!-- m --><a class="postlink" href="https://web.archive.org/web/20080418195347/http://www.planetside.co.uk/terragen/">http://www.planetside.co.uk/terragen/</a><!-- m --> ) the site says its free for non-commercial use. Or you could go to this site <!-- m --><a class="postlink" href="https://web.archive.org/web/20080418195347/http://www.scentednectar.com/skyboxes/">http://www.scentednectar.com/skyboxes/</a><!-- m --> and download some that are already made.
<br /><br /><span style="font-weight: bold">Convert them to .tga format, and naming them-</span>You will notice that these files are in .jpg format. This will not work with Doom3, so you need to convert them into .tga files. Using Photoshop this is very simple, just paste the image into a file, and then save it as a .tga file.
<br /><br />Save them with “_possition” at the end… so if you want to call your skybox “cloudyday” you would name the six images as follows “cloudyday_left” “cloudyday_forward” “cloudyday_right” “cloudyday_back” “cloudyday_up” “cloudyday_down”
<br /><br />If you get your images from the website above they are already named in such a way that they are easily identifiable, if you have images that are not identified, be careful to get them in the right order, or your sky will have seems.
<br /><br /><span style="font-weight: bold">Putting your images in the right place-</span>
<br />You do not put your images in the texture directory. This is a bit counter intuitive, and it confused me, till I found out were to put them. In your Doom base directory create a directory called “env” inside make another directory called “custom” and put your 6 .tga files in there.
<br /><br />Pick one image (does not matter what one) and put it into base/textures/custom/skies name is simply cloudyday.tga. This is the image you will see in the editor.
<br /><br /><span style="font-weight: bold">Getting your shader ready-</span>
<br /><br />You will need to have a shader to tell Doom3 what to do with your 6 .tga files. The easiest way is to cut N paste what I have into a Text doc. And save it as Customskies.mtr, then place it in your base/materials directory.
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/////////////////////////////////////<br />textures/skies/custom/cloudyday<br />{<br />      qer_editorimage   textures/custom/skies/cloudyday.tga<br />   noFragment<br />   noshadows<br />   nooverlays<br />   forceOpaque            // so transparent windows can draw on top of it<br />   {<br />      blend      add      // so transparent windows can draw on top of it<br />      cameraCubeMap   env/custom/cloudyday<br />      texgen      skybox<br />      texgen         wobblesky .0 .0 .0<br />   }<br />}<br />/////////////////////////////////////////</div>
<br /><br />When you want to create another sky, you do not need another .mrt file, you simple make another instance of the script inside the .mrt file and change the variables on it.</div>]]></body></post><post id="p33191" date="Posted: Wed Aug 11, 2004 7:38 pm "><author>BNA!</author><body><![CDATA[<div class="postbody">Nice one - thanks!</div>]]></body></post><post id="p33488" date="Posted: Thu Aug 12, 2004 3:54 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">Ive been doin this for the past hour or so and it still doesnt work. The qer_editorimage will show up just fine but it always turns out black ingame or in render mode. If I save the map and open it again it gives a warning sayin Size Mismatch cant load cubemap. I have no idea what that means. All the images are .tga 24bit all 512x512 including the qer_editorimage one. I have no idea what the deal is! Any ideas?</div>]]></body></post><post id="p33491" date="Posted: Thu Aug 12, 2004 4:01 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody"><div class="quotetitle">HaZarD wrote:</div><div class="quotecontent">Ive been doin this for the past hour or so and it still doesnt work. The qer_editorimage will show up just fine but it always turns out black ingame or in render mode. If I save the map and open it again it gives a warning sayin Size Mismatch cant load cubemap. I have no idea what that means. All the images are .tga 24bit all 512x512 including the qer_editorimage one. I have no idea what the deal is! Any ideas?</div>
<br /><br />I know that i got it showing black when i dident have the .tga's in the "env" directory, so make sure your path in your script is setup right.
<br /><br />Also be sure when you refrance them in the script line "env/custom/cloudyday" you do NOT put a file extention at the end. it should just be the name of all your textures without anything else.
<br /><br />Hope this helps.</div>]]></body></post><post id="p34034" date="Posted: Thu Aug 12, 2004 7:42 pm "><author>HaZarD</author><body><![CDATA[<div class="postbody">Ok my env folder in the base folder (&lt;doom3&gt;/base/env) and in that folder is:
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">cloudyday_back.tga<br />cloudyday_front.tga<br />cloudyday_left.tga<br />cloudyday_right.tga<br />cloudyday_up.tga<br />cloudyday_down.tga</div><br /><br />my materials folder is in the base folder too. And inside it is customskies.mtr and this is exactly what it has inside it:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/skies/cloudyday<br />{<br />      qer_editorimage   textures/skies/cloudyday.tga<br />   noFragment<br />   noshadows<br />   nooverlays<br />   forceOpaque            // so transparent windows can draw on top of it<br />   {<br />      blend      add      // so transparent windows can draw on top of it<br />      cameraCubeMap   env/cloudyday<br />      texgen      skybox<br />      texgen         wobblesky .0 .0 .0<br />   }<br />}</div>
<br /><br />the textures folder is in the base folder as well and the skies folder is in it.
<br /><br />Everything checks out like it should all the paths match up and like I said the qer image shows up just fine and is on the brush in normal mode (not render mode) but it still shows up black ingame or render mode.
<br /><br />When I open the map in the editor I get these warnings:
<br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">WARNING: Mismatched sizes on cube map 'env/cloudyday'<br />WARNING: Couldn't load cube image: env/cloudyday</div>
<br /><br />And I have no idea why. All the textures are 24bit .tga files all sized 512x512
<br /><br />/shrug</div>]]></body></post><post id="p34164" date="Posted: Thu Aug 12, 2004 10:04 pm "><author>Mr-Gibs</author><body><![CDATA[<div class="postbody">We have almost 500 skies (environment maps) in various themes at the Wadfather, come check them out!  <img src="https://web.archive.org/web/20080418195347im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p34213" date="Posted: Thu Aug 12, 2004 11:00 pm "><author>DavidRoss</author><body><![CDATA[<div class="postbody">My next idea would be to try another sky...? it would seem your script it right, and the game is reading it right, but that there is a problem with the .tga files. the sky i used was 768x768 from <!-- m --><a class="postlink" href="https://web.archive.org/web/20080418195347/http://www.scentednectar.com/skyboxes/">http://www.scentednectar.com/skyboxes/</a><!-- m -->   but i dont know if that would make a diffrance.</div>]]></body></post><post id="p34348" date="Posted: Fri Aug 13, 2004 2:17 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">Thats where mine came from too. The terragen link with all the skies. I did it at first with it unresized cause I forgot about it and it didnt work then I resized em all and it still didnt work so then I added the alpha channel to em all and saved em as 32bit and they STILL didnt work so now Im back to the 24bit ones. I have nfc why the qer image would show up and not the rest their all the same images from the same site /shrug. Its the same way with some of the ones in the editor already. Some show up black some work fine. I dunno wtf the problem is but its fuckin annoyin</div>]]></body></post><post id="p34353" date="Posted: Fri Aug 13, 2004 2:23 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody">What's your Email? Will send you a .Rar with exactly what i have, and the file strucer, so all you have to do is unrar it into your base directory, if it still does not work, then its a problem with your game somehow, and if it works, then its somehow a problem with your files.
<br /><br /><br />PS, not all the game skies seem to work for me eaither</div>]]></body></post><post id="p34376" date="Posted: Fri Aug 13, 2004 3:12 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">I PMed you my email addy. I read somewhere about a console command to stop texture caching that it doesnt reload the textures after theyve been cached once. If I can find the command again Im gonna try it and see if maybe thats the problem Ive been havin.</div>]]></body></post><post id="p34381" date="Posted: Fri Aug 13, 2004 3:21 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody">From what i can tell, the command is only usefull if you want to not restart. but every time you restart it reloads everything.</div>]]></body></post><post id="p34387" date="Posted: Fri Aug 13, 2004 3:32 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">Well yours works fine for me. The only difference between mine and yours is the tabulation of the .mtr file. When I extracted yours everything went into the same folders with my files but for some reason mine does work. Can I zip mine up and let you DL it and you try it out?</div>]]></body></post><post id="p34392" date="Posted: Fri Aug 13, 2004 3:41 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody">sure... just send me the link, or send it though e-mail. i have a theory that its something to do with your .tga files. maybe your program is saveing it strangly, are you useing photoshop?</div>]]></body></post><post id="p34401" date="Posted: Fri Aug 13, 2004 3:52 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">Yeah Im usin photoshop 6. <a href="https://web.archive.org/web/20080418195347/http://www.vaevictis-guild.com/images/cloudysky.zip" class="postlink">Heres</a> the zip everything should be intact once youve got it lemme know so I can remove it from my guild webspace.</div>]]></body></post><post id="p34423" date="Posted: Fri Aug 13, 2004 4:19 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody">I figured it out!   you have one of your .tga's misnamed... you have "cloudyday_foward.tga" and it should be "cloudyday_forward.tga"</div>]]></body></post><post id="p34436" date="Posted: Fri Aug 13, 2004 4:40 am "><author>HaZarD</author><body><![CDATA[<div class="postbody">...
<br /><br />well Ill be damned
<br /><br />Yeah... yeah... it works now...
<br /><br />Somethin so simple... I never woulda figured it out either. I woulda made a new set and probably got it right and never even looked for that 1 letter difference =/
<br /><br />I had _front before so that must be why it wasnt workin then either.
<br /><br />I gotta ty for figurin it out I know I never woulda lol.</div>]]></body></post><post id="p34439" date="Posted: Fri Aug 13, 2004 4:43 am "><author>DavidRoss</author><body><![CDATA[<div class="postbody">Ya i had _front in the tut  <img src="https://web.archive.org/web/20080418195347im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> , but i changed it now.</div>]]></body></post><post id="p35140" date="Posted: Sat Aug 14, 2004 2:46 am "><author>Elminster</author><body><![CDATA[<div class="postbody">The skies I have tried all display, they just never display in the proper order. I have tried about 8 different skies and not a single one lines up properly. All of the supplies skies with the game function properly. Here is a shot of the problem I am having.
<br /><br /><a href="https://web.archive.org/web/20080418195347/http://img28.exs.cx/my.php?loc=img28&amp;image=incorrectsky.jpg" class="postlink"><img src="https://web.archive.org/web/20080418195347im_/http://img28.exs.cx/img28/4095/incorrectsky.th.jpg" alt="Image" /></a>
<br /><br />All of these skies have came already labeled with front, left, right and so on. Tried ones from The Wadfather page.
<br /><br />Post Edit: After testing skies from the Skybox Textures instead of Wadfather they appear correctly. It looks like the people submitting at Wadfather just don't know how to label properly. At least not on any of the skies I downloaded.</div>]]></body></post><post id="p35405" date="Posted: Sat Aug 14, 2004 5:55 pm "><author>SeriousMite</author><body><![CDATA[<div class="postbody">What size should skybox textures be?  1024 by 1024 alright?</div>]]></body></post><post id="p35493" date="Posted: Sat Aug 14, 2004 8:44 pm "><author>DavidRoss</author><body><![CDATA[<div class="postbody">i have only tired 768x768 but it would be intersting to see how big they can get.</div>]]></body></post></posts></thread></xml>
