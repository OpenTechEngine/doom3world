<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="3366"><title>Swinging Lights Tutorial</title><posts><post id="p31668" date="Posted: Mon Aug 09, 2004 11:44 pm "><author>lophyte</author><body><![CDATA[<div class="postbody">SWINGING LIGHTS
<br />By: lophyte &lt;lophyteNO@SPAMgmail.com&gt;
<br /><br />Special thanks to Unoid for helping me with figuring out how to make a swinging light. It turns out its actually quite easy.
<br /><br />Making sure nothing is selected, right click on the grid and go to env, then env_swinglight_long_wbulbs_fixed. This creates a light fixture for us to work with. In the Z window, raise it so that the top touches the ceiling. Go into the Entity Properties window for the env, and set the name to something shorter like "swinglight_1".
<br /><br />This is where we create our lights. Right click on the grid and select light. Go into the Entity Properties window for the light, and click the "Model..." button. In the model browser, select base/models/mapobjects/lights/florescent_bulb.ase and click OK.
<br /><br /><span style="font-style: italic">Note: if the model doesn't show up in the grid and the light stays as a box, clone it and delete the original.</span>
<br /><br />Again, in the Entity Properties for our light, add key "bind", with the name of the env as the value. Then add key "bindToJoint", and value "bone5". Now clone this light, and line them both up directly under the fixture.
<br /><br /><img src="https://web.archive.org/web/20100522163704im_/http://lophyte.is-a-geek.org/doom3/tutorials/swinglight/1.jpg" alt="Image" /><br /><br /><br />Now fire up the game and start shooting at your light - it will jump around!
<br /><br /><span style="font-weight: bold">OPTIONAL: Infinitely Swinging Light</span>
<br /><br />If you'd like to add a light that swings back and forth and never stops, this requires a little bit of scripting. Create a mover by right clicking on the grid, going to func, and selecting func_mover. In the Entity Properties, give the mover a descriptive name, ie "slight_mover_1".
<br /><br />Select the env light fixture, and go into the Entity Properties. Add a key "bind", with the value being the name you gave the mover. Now create a file in the same folder as your map, with the same name, and a .script extension (ie, if your map is called swinginglights.map, the script file shoule be called swinginglights.script)
<br /><br />Open up the script file, and add this simple piece of code:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void main() {<br />          $slight_mover_1.sway(0, 0, '20 0 0');<br />}<br /></div>
<br /><br /><span style="font-weight: bold">EDIT: Apologies, I'm an idiot. The first value in sway() seems to be the time it takes before causing the mover to sway again, ie it swings once, waits that amount of time (in milliseconds), then swings again. 50 looks nice with a rotation of 20. Play around with these values to see what they do, but definitely don't leave the first one at 0 otherwise your light won't swing.</span>
<br /><br />Of course, you'll want to change slight_mover_1 to whatever you named your mover entity. As for the number values, take a look at the <a href="https://web.archive.org/web/20100522163704/http://www.doom3world.org/phpbb2/viewtopic.php?t=2562" class="postlink">command reference</a> for a more detailed description. For our purposes, we just need to look at the '20 0 0': this causes the light to sway on a certain axis. The first number is x, the second is y, and the third is z. Play around with these values to find out how they affect your light.
<br /><br /><br />That's all! Compile your map and fire it up in DOOM, and all should be well. Suggestions, comments and feedback welcome.
<br /><br /><br />- lophyte</div>]]></body></post><post id="p31680" date="Posted: Tue Aug 10, 2004 12:13 am "><author>themadtux</author><body><![CDATA[<div class="postbody">Ok this is a pretty cool tutorial and something I've wanted to know about. Well I get the following after following the tutorial
<br /><br />"ERROR: idAFEntity_Base::LoadAF: Couldn't load af file 'env_swinglight_long_fixed.af' on entity 'swingilight_1'
<br /><br />Thoughts?
<br /><br />Thanks..
<br /><br />-Jason</div>]]></body></post><post id="p31704" date="Posted: Tue Aug 10, 2004 12:49 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody">Hmm, this doesn't work at all for me...few things:
<br /><br />1) When I make the bulbs, the light sticks at the far LEFT of the bulbs, not in the middle. I can change the center sure, but the actual box that represents the light is still on the side and not in the middle, how in the hell do you move that damn box? I've been trying to figure out how to do that for a day now.
<br /><br />2) I can't get the lamp to show up in the 3D window for the life of me. I've tried starting over, cloning it, etc. Nothing. All I see is a red box.
<br /><br />3) Doesn't work, I followed all of your steps but the lights are independent of the light. What am I doing wrong?</div>]]></body></post><post id="p31708" date="Posted: Tue Aug 10, 2004 1:00 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody">Ok tried it a fourth time, and now this time when I clone the first lightbulb, the box for the center of the light appears BELOW and way to the RIGHT of the lightbulb...wtf is going on here? This editor is beyond frustrating.
<br /><br />EDIT: Screenshots woo!
<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20100522163704/http://apotheosis.tv/files/wtfd1.jpg">http://apotheosis.tv/files/wtfd1.jpg</a><!-- m -->
<br />After testing out the level once, both lights moved down and to the side for some reason.
<br /><br /><img src="https://web.archive.org/web/20100522163704im_/http://apotheosis.tv/files/wtfd2.jpg" alt="Image" /><br />See? Makes no sense - looks like crap here because they are too bright and too low.
<br /><br />I want to reposition the BOX, not just the center. I've been downloading these tutorial maps and all the light boxes are perfectly centered...how the heck are yall doing this <img src="https://web.archive.org/web/20100522163704im_/http://www.doom3world.org/phpbb2/images/smilies/icon_confused.gif" alt=":?" title="Confused" /> ?
<br /><br /><span style="font-style: italic">Please restrict the images in your post to 640 pixels width if you use the [img] tag. Thank you! -Burrito</span></div>]]></body></post><post id="p31720" date="Posted: Tue Aug 10, 2004 1:28 am "><author>CraiZE</author><body><![CDATA[<div class="postbody">this works sweet for me <img src="https://web.archive.org/web/20100522163704im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>]]></body></post><post id="p31737" date="Posted: Tue Aug 10, 2004 1:52 am "><author>Hunter</author><body><![CDATA[<div class="postbody">The light doesn't appear centered on the fluorescent bulb.</div>]]></body></post><post id="p31771" date="Posted: Tue Aug 10, 2004 2:30 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Hunter wrote:</div><div class="quotecontent">The light doesn't appear centered on the fluorescent bulb.</div>
<br /><br />Right...how do you get it to center? If I change the "Center" setting, it's only the little selection tick moves, not the actual box representing the light. I've spent hours trying to figure out how to move the box and it just don't budge.</div>]]></body></post><post id="p31774" date="Posted: Tue Aug 10, 2004 2:33 am "><author>lophyte</author><body><![CDATA[<div class="postbody">Er, oops.. I forgot to add that in, hahaha. When you've got your light selected, press TAB. That will select only the light entity and not the model that's attached to the light.
<br /><br />As for the light fixture not showing up in the editor's camera, I'm not sure why it doesn't, but it doesn't for me either. I just use the red wireframe to line up my lights.
<br /><br />themadtux: Make sure you're using <span style="font-weight: bold">env_swinglight_long_wbulbs_fixed</span> and not env_swinglight_long_fixed.
<br /><br />Hope that helps!
<br /><br />- lophyte</div>]]></body></post><post id="p31778" date="Posted: Tue Aug 10, 2004 2:40 am "><author>Northwood</author><body><![CDATA[<div class="postbody">Works awsome!  Thanks!  <img src="https://web.archive.org/web/20100522163704im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p31791" date="Posted: Tue Aug 10, 2004 3:08 am "><author>lophyte</author><body><![CDATA[<div class="postbody">MisterCrow: how'd you get the dead guy up against the wall? is that an env? and if so, how'd you model him like that?</div>]]></body></post><post id="p31810" date="Posted: Tue Aug 10, 2004 3:45 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody"><div class="quotetitle">lophyte wrote:</div><div class="quotecontent">MisterCrow: how'd you get the dead guy up against the wall? is that an env? and if so, how'd you model him like that?</div>
<br /><br />It's under models/mapobjects/pentagram/pentagram_lo.lwo
<br /><br />But ya, I finally got the map editor to behave for once <img src="https://web.archive.org/web/20100522163704im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />, now I gotta add a swinglight and my moody desk area will look even cooler in motion.
<br /><a href="https://web.archive.org/web/20100522163704/http://apotheosis.tv/files/evildesk.jpg" class="postlink">http://apotheosis.tv/files/evildesk.jpg</a> (linked for size)</div>]]></body></post><post id="p31825" date="Posted: Tue Aug 10, 2004 4:20 am "><author>lophyte</author><body><![CDATA[<div class="postbody">Very nice lighting indeed.. can't wait to see it with the swinglight.</div>]]></body></post><post id="p31933" date="Posted: Tue Aug 10, 2004 9:13 am "><author>USCM-Cid</author><body><![CDATA[<div class="postbody">Does anyone have any suggestions as to how to make the swinging of a light more smoother? It seems to me that for some reason, the way I have it set, makes it seem a bit jerky (Very slightly but I would like a smoother sway.)
<br /><br />I have it set to:
<br /><br />(5, 0, '0 0 10')
<br /><br />Any suggestions?</div>]]></body></post><post id="p31934" date="Posted: Tue Aug 10, 2004 9:15 am "><author>lophyte</author><body><![CDATA[<div class="postbody">I think if you increase the 5 to say, maybe 10 or 15, it might look a little less jerky.</div>]]></body></post><post id="p32296" date="Posted: Tue Aug 10, 2004 8:29 pm "><author>Elminster</author><body><![CDATA[<div class="postbody">I got the light that swings when shot to work fine. How to I get the lights to actually go out when they are shot. What I want is when I shoot the base that is holding the lights it swings, but when I shoot the lights themselves they go out. Right now the swinging works, and when add health to the lights and shoot them they shatter. But even with the actual light models shattered the light is still coming from the base.</div>]]></body></post><post id="p32303" date="Posted: Tue Aug 10, 2004 8:33 pm "><author>lophyte</author><body><![CDATA[<div class="postbody">I haven't really had a chance to play with destructable lights, but perhaps this may help:
<br /><br /><a href="https://web.archive.org/web/20100522163704/http://www.doom3world.org/phpbb2/viewtopic.php?t=3263" class="postlink">http://www.doom3world.org/phpbb2/viewtopic.php?t=3263</a></div>]]></body></post><post id="p32317" date="Posted: Tue Aug 10, 2004 9:03 pm "><author>Ado</author><body><![CDATA[<div class="postbody">Awesome tutorial!
<br /><br />Anyone know how you can find out what value you need to use with the "bindToJoint" key if you use a different env model?  I can get this to work if I use the long swinging lights in the tutorial, but if I apply this process to a different light fixture model, it doesnt work, giving me an error that it can't find "bone5"</div>]]></body></post><post id="p32354" date="Posted: Tue Aug 10, 2004 9:46 pm "><author>cibressus</author><body><![CDATA[<div class="postbody">i can't get mine working. do you think you could post the map you made?</div>]]></body></post><post id="p32371" date="Posted: Tue Aug 10, 2004 10:34 pm "><author>|KRiTiKaL|</author><body><![CDATA[<div class="postbody">I got the light frame to swing when i shoot it, the lightbulbs stay still tho any advice?</div>]]></body></post><post id="p32423" date="Posted: Tue Aug 10, 2004 11:47 pm "><author>Elminster</author><body><![CDATA[<div class="postbody">make sure to add the Bindings.</div>]]></body></post><post id="p31668" date="Posted: Mon Aug 09, 2004 11:44 pm "><author>lophyte</author><body><![CDATA[<div class="postbody">SWINGING LIGHTS
<br />By: lophyte &lt;lophyteNO@SPAMgmail.com&gt;
<br /><br />Special thanks to Unoid for helping me with figuring out how to make a swinging light. It turns out its actually quite easy.
<br /><br />Making sure nothing is selected, right click on the grid and go to env, then env_swinglight_long_wbulbs_fixed. This creates a light fixture for us to work with. In the Z window, raise it so that the top touches the ceiling. Go into the Entity Properties window for the env, and set the name to something shorter like "swinglight_1".
<br /><br />This is where we create our lights. Right click on the grid and select light. Go into the Entity Properties window for the light, and click the "Model..." button. In the model browser, select base/models/mapobjects/lights/florescent_bulb.ase and click OK.
<br /><br /><span style="font-style: italic">Note: if the model doesn't show up in the grid and the light stays as a box, clone it and delete the original.</span>
<br /><br />Again, in the Entity Properties for our light, add key "bind", with the name of the env as the value. Then add key "bindToJoint", and value "bone5". Now clone this light, and line them both up directly under the fixture.
<br /><br /><img src="https://web.archive.org/web/20100522163755im_/http://lophyte.is-a-geek.org/doom3/tutorials/swinglight/1.jpg" alt="Image" /><br /><br /><br />Now fire up the game and start shooting at your light - it will jump around!
<br /><br /><span style="font-weight: bold">OPTIONAL: Infinitely Swinging Light</span>
<br /><br />If you'd like to add a light that swings back and forth and never stops, this requires a little bit of scripting. Create a mover by right clicking on the grid, going to func, and selecting func_mover. In the Entity Properties, give the mover a descriptive name, ie "slight_mover_1".
<br /><br />Select the env light fixture, and go into the Entity Properties. Add a key "bind", with the value being the name you gave the mover. Now create a file in the same folder as your map, with the same name, and a .script extension (ie, if your map is called swinginglights.map, the script file shoule be called swinginglights.script)
<br /><br />Open up the script file, and add this simple piece of code:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void main() {<br />          $slight_mover_1.sway(0, 0, '20 0 0');<br />}<br /></div>
<br /><br /><span style="font-weight: bold">EDIT: Apologies, I'm an idiot. The first value in sway() seems to be the time it takes before causing the mover to sway again, ie it swings once, waits that amount of time (in milliseconds), then swings again. 50 looks nice with a rotation of 20. Play around with these values to see what they do, but definitely don't leave the first one at 0 otherwise your light won't swing.</span>
<br /><br />Of course, you'll want to change slight_mover_1 to whatever you named your mover entity. As for the number values, take a look at the <a href="https://web.archive.org/web/20100522163755/http://www.doom3world.org/phpbb2/viewtopic.php?t=2562" class="postlink">command reference</a> for a more detailed description. For our purposes, we just need to look at the '20 0 0': this causes the light to sway on a certain axis. The first number is x, the second is y, and the third is z. Play around with these values to find out how they affect your light.
<br /><br /><br />That's all! Compile your map and fire it up in DOOM, and all should be well. Suggestions, comments and feedback welcome.
<br /><br /><br />- lophyte</div>]]></body></post><post id="p31680" date="Posted: Tue Aug 10, 2004 12:13 am "><author>themadtux</author><body><![CDATA[<div class="postbody">Ok this is a pretty cool tutorial and something I've wanted to know about. Well I get the following after following the tutorial
<br /><br />"ERROR: idAFEntity_Base::LoadAF: Couldn't load af file 'env_swinglight_long_fixed.af' on entity 'swingilight_1'
<br /><br />Thoughts?
<br /><br />Thanks..
<br /><br />-Jason</div>]]></body></post><post id="p31704" date="Posted: Tue Aug 10, 2004 12:49 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody">Hmm, this doesn't work at all for me...few things:
<br /><br />1) When I make the bulbs, the light sticks at the far LEFT of the bulbs, not in the middle. I can change the center sure, but the actual box that represents the light is still on the side and not in the middle, how in the hell do you move that damn box? I've been trying to figure out how to do that for a day now.
<br /><br />2) I can't get the lamp to show up in the 3D window for the life of me. I've tried starting over, cloning it, etc. Nothing. All I see is a red box.
<br /><br />3) Doesn't work, I followed all of your steps but the lights are independent of the light. What am I doing wrong?</div>]]></body></post><post id="p31708" date="Posted: Tue Aug 10, 2004 1:00 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody">Ok tried it a fourth time, and now this time when I clone the first lightbulb, the box for the center of the light appears BELOW and way to the RIGHT of the lightbulb...wtf is going on here? This editor is beyond frustrating.
<br /><br />EDIT: Screenshots woo!
<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20100522163755/http://apotheosis.tv/files/wtfd1.jpg">http://apotheosis.tv/files/wtfd1.jpg</a><!-- m -->
<br />After testing out the level once, both lights moved down and to the side for some reason.
<br /><br /><img src="https://web.archive.org/web/20100522163755im_/http://apotheosis.tv/files/wtfd2.jpg" alt="Image" /><br />See? Makes no sense - looks like crap here because they are too bright and too low.
<br /><br />I want to reposition the BOX, not just the center. I've been downloading these tutorial maps and all the light boxes are perfectly centered...how the heck are yall doing this <img src="https://web.archive.org/web/20100522163755im_/http://www.doom3world.org/phpbb2/images/smilies/icon_confused.gif" alt=":?" title="Confused" /> ?
<br /><br /><span style="font-style: italic">Please restrict the images in your post to 640 pixels width if you use the [img] tag. Thank you! -Burrito</span></div>]]></body></post><post id="p31720" date="Posted: Tue Aug 10, 2004 1:28 am "><author>CraiZE</author><body><![CDATA[<div class="postbody">this works sweet for me <img src="https://web.archive.org/web/20100522163755im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=";)" title="Wink" /></div>]]></body></post><post id="p31737" date="Posted: Tue Aug 10, 2004 1:52 am "><author>Hunter</author><body><![CDATA[<div class="postbody">The light doesn't appear centered on the fluorescent bulb.</div>]]></body></post><post id="p31771" date="Posted: Tue Aug 10, 2004 2:30 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Hunter wrote:</div><div class="quotecontent">The light doesn't appear centered on the fluorescent bulb.</div>
<br /><br />Right...how do you get it to center? If I change the "Center" setting, it's only the little selection tick moves, not the actual box representing the light. I've spent hours trying to figure out how to move the box and it just don't budge.</div>]]></body></post><post id="p31774" date="Posted: Tue Aug 10, 2004 2:33 am "><author>lophyte</author><body><![CDATA[<div class="postbody">Er, oops.. I forgot to add that in, hahaha. When you've got your light selected, press TAB. That will select only the light entity and not the model that's attached to the light.
<br /><br />As for the light fixture not showing up in the editor's camera, I'm not sure why it doesn't, but it doesn't for me either. I just use the red wireframe to line up my lights.
<br /><br />themadtux: Make sure you're using <span style="font-weight: bold">env_swinglight_long_wbulbs_fixed</span> and not env_swinglight_long_fixed.
<br /><br />Hope that helps!
<br /><br />- lophyte</div>]]></body></post><post id="p31778" date="Posted: Tue Aug 10, 2004 2:40 am "><author>Northwood</author><body><![CDATA[<div class="postbody">Works awsome!  Thanks!  <img src="https://web.archive.org/web/20100522163755im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p31791" date="Posted: Tue Aug 10, 2004 3:08 am "><author>lophyte</author><body><![CDATA[<div class="postbody">MisterCrow: how'd you get the dead guy up against the wall? is that an env? and if so, how'd you model him like that?</div>]]></body></post><post id="p31810" date="Posted: Tue Aug 10, 2004 3:45 am "><author>MisterCrow</author><body><![CDATA[<div class="postbody"><div class="quotetitle">lophyte wrote:</div><div class="quotecontent">MisterCrow: how'd you get the dead guy up against the wall? is that an env? and if so, how'd you model him like that?</div>
<br /><br />It's under models/mapobjects/pentagram/pentagram_lo.lwo
<br /><br />But ya, I finally got the map editor to behave for once <img src="https://web.archive.org/web/20100522163755im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />, now I gotta add a swinglight and my moody desk area will look even cooler in motion.
<br /><a href="https://web.archive.org/web/20100522163755/http://apotheosis.tv/files/evildesk.jpg" class="postlink">http://apotheosis.tv/files/evildesk.jpg</a> (linked for size)</div>]]></body></post><post id="p31825" date="Posted: Tue Aug 10, 2004 4:20 am "><author>lophyte</author><body><![CDATA[<div class="postbody">Very nice lighting indeed.. can't wait to see it with the swinglight.</div>]]></body></post><post id="p31933" date="Posted: Tue Aug 10, 2004 9:13 am "><author>USCM-Cid</author><body><![CDATA[<div class="postbody">Does anyone have any suggestions as to how to make the swinging of a light more smoother? It seems to me that for some reason, the way I have it set, makes it seem a bit jerky (Very slightly but I would like a smoother sway.)
<br /><br />I have it set to:
<br /><br />(5, 0, '0 0 10')
<br /><br />Any suggestions?</div>]]></body></post><post id="p31934" date="Posted: Tue Aug 10, 2004 9:15 am "><author>lophyte</author><body><![CDATA[<div class="postbody">I think if you increase the 5 to say, maybe 10 or 15, it might look a little less jerky.</div>]]></body></post><post id="p32296" date="Posted: Tue Aug 10, 2004 8:29 pm "><author>Elminster</author><body><![CDATA[<div class="postbody">I got the light that swings when shot to work fine. How to I get the lights to actually go out when they are shot. What I want is when I shoot the base that is holding the lights it swings, but when I shoot the lights themselves they go out. Right now the swinging works, and when add health to the lights and shoot them they shatter. But even with the actual light models shattered the light is still coming from the base.</div>]]></body></post><post id="p32303" date="Posted: Tue Aug 10, 2004 8:33 pm "><author>lophyte</author><body><![CDATA[<div class="postbody">I haven't really had a chance to play with destructable lights, but perhaps this may help:
<br /><br /><a href="https://web.archive.org/web/20100522163755/http://www.doom3world.org/phpbb2/viewtopic.php?t=3263" class="postlink">http://www.doom3world.org/phpbb2/viewtopic.php?t=3263</a></div>]]></body></post><post id="p32317" date="Posted: Tue Aug 10, 2004 9:03 pm "><author>Ado</author><body><![CDATA[<div class="postbody">Awesome tutorial!
<br /><br />Anyone know how you can find out what value you need to use with the "bindToJoint" key if you use a different env model?  I can get this to work if I use the long swinging lights in the tutorial, but if I apply this process to a different light fixture model, it doesnt work, giving me an error that it can't find "bone5"</div>]]></body></post><post id="p32354" date="Posted: Tue Aug 10, 2004 9:46 pm "><author>cibressus</author><body><![CDATA[<div class="postbody">i can't get mine working. do you think you could post the map you made?</div>]]></body></post><post id="p32371" date="Posted: Tue Aug 10, 2004 10:34 pm "><author>|KRiTiKaL|</author><body><![CDATA[<div class="postbody">I got the light frame to swing when i shoot it, the lightbulbs stay still tho any advice?</div>]]></body></post><post id="p32423" date="Posted: Tue Aug 10, 2004 11:47 pm "><author>Elminster</author><body><![CDATA[<div class="postbody">make sure to add the Bindings.</div>]]></body></post></posts></thread></xml>
