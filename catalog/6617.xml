<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="6617"><title>Tutorial: Quick and Dirty Material Shader Primer</title><posts><post id="117047" date="Posted: Fri Oct 21, 2005 2:27 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">I've been messing with this forever and can't get it working right.&#13;
<br/><br/>
I have created a folder in \base called \materials&#13;
<br/>
I created a text file called fleabay.mtr with the following...&#13;
<br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">&#13;
<br/>
models/mapobjects/fleabay/pissy&#13;
<br/>
{&#13;
<br/>
   bumpmap      models/mapobjects/fleabay/pissy_local.tga&#13;
<br/>
   diffusemap      models/mapobjects/fleabay/pissy_d.tga&#13;
<br/>
   specularmap      models/mapobjects/fleabay/pissy_s.tga&#13;
<br/>
}&#13;
<br/></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
the texture files were copied from elsewhere in the game and renamed.&#13;
<br/><br/>
I don't get any texture on my ase model with the following BITMAP line.&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;
<br/><br/>
but if I use a direct reference to my texture...&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;
<br/>
...I get a textured model with no shadow.  &#13;
<br/><br/>
Using a material from another model works fine, ie &#13;
<br/>
*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;
<br/><br/>
Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;
<br/><br/>
And yes, I named it 'pissy' on purpose. <img src="/web/20061013023731im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/>
Please help.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117066" date="Posted: Fri Oct 21, 2005 5:09 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;
<br/><br/>
To test the material shader simply load up one of the test maps and type...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">r_materialOverride "models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
More details on the CVar can be found here...&#13;
<br/><br/><a href="/web/20061013023731/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29" target="_blank">http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29</a>&#13;
<br/><br/>
If the material shader works then it's the reference in the ASE.&#13;
<br/><br/>
Try...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
or&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013023731/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023731im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023731/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117079" date="Posted: Fri Oct 21, 2005 7:17 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Works like a charm without Rich Text Formatting.  <img src="/web/20061013023731im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/><br/><br/>
And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117143" date="Posted: Fri Oct 21, 2005 3:38 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Ah yes that could be a problem. <img src="/web/20061013023731im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/>_________________<br/><a href="/web/20061013023731/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023731im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023731/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="55989" date="Posted: Sun Oct 10, 2004 9:31 am    Post subject: Tutorial: Quick and Dirty Material Shader Primer"><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"><span style="font-size: 24px; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;
<br/><br/>
In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;
<br/><br/>
What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;
<br/><br/>
The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;
<br/><br/>
A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;
<br/><br/>
If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;
<br/><br/>
In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;
<br/><br/>
Here is a material shader found in vehicles.mtr...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.&#13;
<br/><br/>
And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.&#13;
<br/><br/>
What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.&#13;
<br/><br/>
So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?&#13;
<br/><br/>
Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?&#13;
<br/><br/>
Note: If you have the clean shaders pak that you won't find this shader in the editor.&#13;
<br/><br/>
So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.&#13;
<br/><br/>
What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span>&#13;
<br/><br/>
Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.&#13;
<br/><br/>
Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.&#13;
<br/><br/>
For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.&#13;
<br/><br/>
The good news is that the three most common blend modes do not have to be in a certain order to render properly.&#13;
<br/><br/>
Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span>&#13;
<br/><br/>
Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.&#13;
<br/><br/>
Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.&#13;
<br/><br/>
Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.&#13;
<br/><br/>
Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.&#13;
<br/><br/>
As for how to use these blend modes let's yet again look at an example shader...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.&#13;
<br/><br/>
Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?&#13;
<br/><br/>
Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.&#13;
<br/><br/>
What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span>&#13;
<br/><br/>
Here's an example shader I wrote using what we've talked about up to this point...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   specularmap   textures\custom\grey.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?&#13;
<br/><br/>
Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.&#13;
<br/><br/>
Here's how my shader would look after adding the translate command to the specularmap stage...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   {&#13;
<br/>
      blend      specularmap&#13;
<br/>
      map   textures\custom\grey.tga&#13;
<br/>
      translate   1,   0&#13;
<br/>
   }&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span>&#13;
<br/><br/>
The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.&#13;
<br/><br/>
For instance, one of these parameters is metal, and if I added it to my example material it would look like this...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   metal&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   {&#13;
<br/>
      blend      specularmap&#13;
<br/>
      map   textures\custom\grey.tga&#13;
<br/>
      translate   1,   0&#13;
<br/>
   }&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;
<br/><br/>
One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;
<br/><br/>
An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;
<br/><br/>
Now you should have a pretty good idea how to write your own material shaders.&#13;
<br/><br/>
Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;
<br/><br/>
If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.<br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"><br/><br/>Last edited by rich_is_bored on Wed Jan 26, 2005 9:22 pm; edited 1 time in total</span></td>
			</tr>]]></body></post><post id="56081" date="Posted: Mon Oct 11, 2004 5:17 am    Post subject: "><author>ajerara</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Thanks, rich. I could really use this, as you know.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="58997" date="Posted: Mon Oct 25, 2004 4:41 pm    Post subject: "><author>iceheart</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Boredom + Visio = Confusing graph:&#13;
<br/><br/><a href="/web/20061013023317/http://www.doom3reference.com/images/models_materials.gif" target="_blank" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a><br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a>&#13;
<br/><a href="/web/20061013023317/http://www.modwiki.net/" target="_blank" class="postlink">www.modwiki.net</a> - wiki resource for all Doom 3 engine-based games.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64941" date="Posted: Sat Nov 27, 2004 7:16 pm    Post subject: "><author>evilartist</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;
<br/><br/>
The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;
<br/><br/>
Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/wood_door&#13;
<br/>
{&#13;
<br/>
   renderbump -size 256 512 -aa 2&#13;
<br/>
textures\custom\textures\door1.tga&#13;
<br/>
   qer_editorimage   textures\custom\textures\door1.tga&#13;
<br/>
   diffusemap   textures\custom\textures\door1.tga&#13;
<br/>
   specularmap   textures\custom\textures\door1.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).<br/>_________________<br/>&lt;Enter retarded, poorly thought-up sig here.&gt;</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64949" date="Posted: Sat Nov 27, 2004 8:48 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>evilartist wrote:</b></span></td>	</tr><tr><td class="quote">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?&#13;
<br/><br/>
And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?&#13;
<br/><br/>
LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.&#13;
<br/><br/>
You don't need either to create textures and I'm not sure where you got the idea that you did.&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Renderbump is used to render a normal map for use with a low poly model.&#13;
<br/><br/>
Unless your making a texture for a model you have no use for it.<br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64956" date="Posted: Sat Nov 27, 2004 10:33 pm    Post subject: "><author>evilartist</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Sorry, I did a terrible job explaining my problem.&#13;
<br/><br/>
The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;
<br/><br/>
Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/> I thought it was weird that I was using .ase and .lwo in association with a simple texture.<br/>_________________<br/>&lt;Enter retarded, poorly thought-up sig here.&gt;</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64966" date="Posted: Sun Nov 28, 2004 1:37 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">The images need to have a resolution that is a power of two.&#13;
<br/><br/>
2,4,8,16,32,64,128,256,512,1024&#13;
<br/><br/>
Anything inbetween will be resized to match.&#13;
<br/><br/>
Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;
<br/><br/>
Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;
<br/><br/>
This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;
<br/><br/>
Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;
<br/><br/>
The way this is done is by using the scale keyword in your material shader.&#13;
<br/><br/>
So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/double_rez&#13;
<br/>
{&#13;
<br/>
    qer_editorimage   textures/custom/dbl_rez.tga&#13;
<br/>
    {&#13;
<br/>
        blend   diffusemap&#13;
<br/>
        map    textures/custom/dbl_rez.tga&#13;
<br/>
        scale    0.5, 0.5                                 // shrinks the size by half to&#13;
<br/>
                                                               // cover the same space as&#13;
<br/>
                                                               // a smaller resoultion texture&#13;
<br/>
    }&#13;
<br/>
}</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="66010" date="Posted: Fri Dec 03, 2004 9:03 pm    Post subject: "><author>Eutectic</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>rich_is_bored wrote:</b></span></td>	</tr><tr><td class="quote"><span style="font-size: 11px; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).&#13;
<br/><br/>
In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span>&#13;
<br/><br/>
If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.&#13;
<br/><br/>
Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>rich_is_bored wrote:</b></span></td>	</tr><tr><td class="quote"><span style="font-size: 11px; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;
<br/><br/>
For example:&#13;
<br/>
If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;
<br/><br/>
There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;
<br/><br/>
Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;
<br/><br/>
The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.<br/>_________________<br/>Red by nature, black by art</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="66041" date="Posted: Sat Dec 04, 2004 12:03 am    Post subject: "><author>eskimo roll</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.<br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74208" date="Posted: Wed Jan 26, 2005 8:48 am    Post subject: "><author>SyPHer_</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74209" date="Posted: Wed Jan 26, 2005 9:08 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">You'd define your bumpmap stage like so...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">{&#13;
<br/>
   blend   bumpmap&#13;
<br/>
   map   heightmap( textures/custom/whatever.tga, 5)&#13;
<br/>
}</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74216" date="Posted: Wed Jan 26, 2005 9:39 am    Post subject: "><author>SyPHer_</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">thanks <img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_biggrin.gif" alt="Very Happy" border="0"/></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74232" date="Posted: Wed Jan 26, 2005 11:54 am    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;
<br/><br/>
i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74276" date="Posted: Wed Jan 26, 2005 4:25 pm    Post subject: "><author>Mordenkainen</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>ViPr wrote:</b></span></td>	</tr><tr><td class="quote">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><br/><br/>
For an explanation of the specular "factor" used in D3 read this:&#13;
<br/><br/><a href="/web/20061013023317/http://www.iddevnet.com/doom3/lighting.php" target="_blank">http://www.iddevnet.com/doom3/lighting.php</a><br/>_________________<br/><a href="/web/20061013023317/http://www.beyond3d.com/" target="_blank" class="postlink">Beyond3D.com</a> | Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74306" date="Posted: Wed Jan 26, 2005 7:14 pm    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74310" date="Posted: Wed Jan 26, 2005 7:26 pm    Post subject: "><author>crimity</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74336" date="Posted: Wed Jan 26, 2005 9:36 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>ViPr wrote:</b></span></td>	</tr><tr><td class="quote">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
You're right, I reworded the terminology...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Better?&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;
<br/><br/>
You'd do gold by drawing a yellow/orange tinted specular map.&#13;
<br/><br/>
And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;
<br/><br/>
But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.<br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013023317/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74407" date="Posted: Thu Jan 27, 2005 3:55 am    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74468" date="Posted: Thu Jan 27, 2005 9:44 am    Post subject: "><author>Black Dog</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Whiskey Tango Foxtrot?!&#13;
<br/><br/>
(ie,  <img src="/web/20061013023317im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/> )</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74478" date="Posted: Thu Jan 27, 2005 10:28 am    Post subject: "><author>der_ton</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;
<br/><a href="/web/20061013023317/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477" target="_blank">http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477</a><br/>_________________<br/><a href="/web/20061013023317/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013023317im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a>&#13;
<br/><a href="/web/20061013023317/http://www.doom3world.org/phpbb2/viewtopic.php?t=5474" target="_blank" class="postlink">Modelviewer  |  3DSMax&lt;-&gt;MD5  |  Blender&lt;-&gt;MD5</a></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="55989" date="Posted: Sun Oct 10, 2004 9:31 am    Post subject: Tutorial: Quick and Dirty Material Shader Primer"><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"><span style="font-size: 24px; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;
<br/><br/>
In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;
<br/><br/>
What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;
<br/><br/>
The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;
<br/><br/>
A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;
<br/><br/>
If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;
<br/><br/>
In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;
<br/><br/>
Here is a material shader found in vehicles.mtr...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.&#13;
<br/><br/>
And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.&#13;
<br/><br/>
What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.&#13;
<br/><br/>
So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?&#13;
<br/><br/>
Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?&#13;
<br/><br/>
Note: If you have the clean shaders pak that you won't find this shader in the editor.&#13;
<br/><br/>
So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.&#13;
<br/><br/>
What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span>&#13;
<br/><br/>
Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.&#13;
<br/><br/>
Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.&#13;
<br/><br/>
For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.&#13;
<br/><br/>
The good news is that the three most common blend modes do not have to be in a certain order to render properly.&#13;
<br/><br/>
Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span>&#13;
<br/><br/>
Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.&#13;
<br/><br/>
Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.&#13;
<br/><br/>
Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.&#13;
<br/><br/>
Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.&#13;
<br/><br/>
As for how to use these blend modes let's yet again look at an example shader...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">models/mapobjects/buggy/buggy&#13;
<br/>
{&#13;
<br/>
   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo&#13;
<br/>
   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga&#13;
<br/>
   bumpmap      models/md5/vehicles/buggy/buggy_local.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.&#13;
<br/><br/>
Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?&#13;
<br/><br/>
Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.&#13;
<br/><br/>
What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span>&#13;
<br/><br/>
Here's an example shader I wrote using what we've talked about up to this point...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   specularmap   textures\custom\grey.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?&#13;
<br/><br/>
Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.&#13;
<br/><br/>
Here's how my shader would look after adding the translate command to the specularmap stage...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   {&#13;
<br/>
      blend      specularmap&#13;
<br/>
      map   textures\custom\grey.tga&#13;
<br/>
      translate   1,   0&#13;
<br/>
   }&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span>&#13;
<br/><br/>
The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.&#13;
<br/><br/>
For instance, one of these parameters is metal, and if I added it to my example material it would look like this...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/mask&#13;
<br/>
{&#13;
<br/>
   metal&#13;
<br/>
   qer_editorimage   textures\custom\mask_d.tga&#13;
<br/>
   diffusemap   textures\custom\mask_d.tga&#13;
<br/>
   {&#13;
<br/>
      blend      specularmap&#13;
<br/>
      map   textures\custom\grey.tga&#13;
<br/>
      translate   1,   0&#13;
<br/>
   }&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;
<br/><br/>
One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;
<br/><br/>
An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;
<br/><br/><span style="font-size: 16px; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;
<br/><br/>
Now you should have a pretty good idea how to write your own material shaders.&#13;
<br/><br/>
Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;
<br/><br/>
If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.<br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"><br/><br/>Last edited by rich_is_bored on Wed Jan 26, 2005 9:22 pm; edited 1 time in total</span></td>
			</tr>]]></body></post><post id="56081" date="Posted: Mon Oct 11, 2004 5:17 am    Post subject: "><author>ajerara</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Thanks, rich. I could really use this, as you know.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="58997" date="Posted: Mon Oct 25, 2004 4:41 pm    Post subject: "><author>iceheart</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Boredom + Visio = Confusing graph:&#13;
<br/><br/><a href="/web/20061013024259/http://www.doom3reference.com/images/models_materials.gif" target="_blank" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a><br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a>&#13;
<br/><a href="/web/20061013024259/http://www.modwiki.net/" target="_blank" class="postlink">www.modwiki.net</a> - wiki resource for all Doom 3 engine-based games.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64941" date="Posted: Sat Nov 27, 2004 7:16 pm    Post subject: "><author>evilartist</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;
<br/><br/>
The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;
<br/><br/>
Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/wood_door&#13;
<br/>
{&#13;
<br/>
   renderbump -size 256 512 -aa 2&#13;
<br/>
textures\custom\textures\door1.tga&#13;
<br/>
   qer_editorimage   textures\custom\textures\door1.tga&#13;
<br/>
   diffusemap   textures\custom\textures\door1.tga&#13;
<br/>
   specularmap   textures\custom\textures\door1.tga&#13;
<br/>
}</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).<br/>_________________<br/>&lt;Enter retarded, poorly thought-up sig here.&gt;</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64949" date="Posted: Sat Nov 27, 2004 8:48 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>evilartist wrote:</b></span></td>	</tr><tr><td class="quote">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?&#13;
<br/><br/>
And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?&#13;
<br/><br/>
LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.&#13;
<br/><br/>
You don't need either to create textures and I'm not sure where you got the idea that you did.&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Renderbump is used to render a normal map for use with a low poly model.&#13;
<br/><br/>
Unless your making a texture for a model you have no use for it.<br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64956" date="Posted: Sat Nov 27, 2004 10:33 pm    Post subject: "><author>evilartist</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Sorry, I did a terrible job explaining my problem.&#13;
<br/><br/>
The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;
<br/><br/>
Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/> I thought it was weird that I was using .ase and .lwo in association with a simple texture.<br/>_________________<br/>&lt;Enter retarded, poorly thought-up sig here.&gt;</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="64966" date="Posted: Sun Nov 28, 2004 1:37 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">The images need to have a resolution that is a power of two.&#13;
<br/><br/>
2,4,8,16,32,64,128,256,512,1024&#13;
<br/><br/>
Anything inbetween will be resized to match.&#13;
<br/><br/>
Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;
<br/><br/>
Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;
<br/><br/>
This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;
<br/><br/>
Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;
<br/><br/>
The way this is done is by using the scale keyword in your material shader.&#13;
<br/><br/>
So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">textures/custom/double_rez&#13;
<br/>
{&#13;
<br/>
    qer_editorimage   textures/custom/dbl_rez.tga&#13;
<br/>
    {&#13;
<br/>
        blend   diffusemap&#13;
<br/>
        map    textures/custom/dbl_rez.tga&#13;
<br/>
        scale    0.5, 0.5                                 // shrinks the size by half to&#13;
<br/>
                                                               // cover the same space as&#13;
<br/>
                                                               // a smaller resoultion texture&#13;
<br/>
    }&#13;
<br/>
}</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="66010" date="Posted: Fri Dec 03, 2004 9:03 pm    Post subject: "><author>Eutectic</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>rich_is_bored wrote:</b></span></td>	</tr><tr><td class="quote"><span style="font-size: 11px; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).&#13;
<br/><br/>
In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span>&#13;
<br/><br/>
If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.&#13;
<br/><br/>
Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>rich_is_bored wrote:</b></span></td>	</tr><tr><td class="quote"><span style="font-size: 11px; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;
<br/><br/>
For example:&#13;
<br/>
If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;
<br/><br/>
There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;
<br/><br/>
Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;
<br/><br/>
The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.<br/>_________________<br/>Red by nature, black by art</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="66041" date="Posted: Sat Dec 04, 2004 12:03 am    Post subject: "><author>eskimo roll</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.<br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74208" date="Posted: Wed Jan 26, 2005 8:48 am    Post subject: "><author>SyPHer_</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74209" date="Posted: Wed Jan 26, 2005 9:08 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">You'd define your bumpmap stage like so...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">{&#13;
<br/>
   blend   bumpmap&#13;
<br/>
   map   heightmap( textures/custom/whatever.tga, 5)&#13;
<br/>
}</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74216" date="Posted: Wed Jan 26, 2005 9:39 am    Post subject: "><author>SyPHer_</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">thanks <img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_biggrin.gif" alt="Very Happy" border="0"/></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74232" date="Posted: Wed Jan 26, 2005 11:54 am    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;
<br/><br/>
i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74276" date="Posted: Wed Jan 26, 2005 4:25 pm    Post subject: "><author>Mordenkainen</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>ViPr wrote:</b></span></td>	</tr><tr><td class="quote">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/><br/><br/>
For an explanation of the specular "factor" used in D3 read this:&#13;
<br/><br/><a href="/web/20061013024259/http://www.iddevnet.com/doom3/lighting.php" target="_blank">http://www.iddevnet.com/doom3/lighting.php</a><br/>_________________<br/><a href="/web/20061013024259/http://www.beyond3d.com/" target="_blank" class="postlink">Beyond3D.com</a> | Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74306" date="Posted: Wed Jan 26, 2005 7:14 pm    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74310" date="Posted: Wed Jan 26, 2005 7:26 pm    Post subject: "><author>crimity</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74336" date="Posted: Wed Jan 26, 2005 9:36 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>ViPr wrote:</b></span></td>	</tr><tr><td class="quote">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
You're right, I reworded the terminology...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Better?&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;
<br/><br/>
You'd do gold by drawing a yellow/orange tinted specular map.&#13;
<br/><br/>
And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;
<br/><br/>
But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.<br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024259/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74407" date="Posted: Thu Jan 27, 2005 3:55 am    Post subject: "><author>ViPr</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74468" date="Posted: Thu Jan 27, 2005 9:44 am    Post subject: "><author>Black Dog</author><body><![CDATA[<tr><td colspan="2"><span class="postbody"/><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Quote:</b></span></td>	</tr><tr><td class="quote">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
Whiskey Tango Foxtrot?!&#13;
<br/><br/>
(ie,  <img src="/web/20061013024259im_/http://doom3world.org/phpbb2/images/smiles/icon_eek.gif" alt="Shocked" border="0"/> )</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="74478" date="Posted: Thu Jan 27, 2005 10:28 am    Post subject: "><author>der_ton</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;
<br/><a href="/web/20061013024259/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477" target="_blank">http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477</a><br/>_________________<br/><a href="/web/20061013024259/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024259im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/> Staff</a>&#13;
<br/><a href="/web/20061013024259/http://www.doom3world.org/phpbb2/viewtopic.php?t=5474" target="_blank" class="postlink">Modelviewer  |  3DSMax&lt;-&gt;MD5  |  Blender&lt;-&gt;MD5</a></span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117047" date="Posted: Fri Oct 21, 2005 2:27 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">I've been messing with this forever and can't get it working right.&#13;
<br/><br/>
I have created a folder in \base called \materials&#13;
<br/>
I created a text file called fleabay.mtr with the following...&#13;
<br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">&#13;
<br/>
models/mapobjects/fleabay/pissy&#13;
<br/>
{&#13;
<br/>
   bumpmap      models/mapobjects/fleabay/pissy_local.tga&#13;
<br/>
   diffusemap      models/mapobjects/fleabay/pissy_d.tga&#13;
<br/>
   specularmap      models/mapobjects/fleabay/pissy_s.tga&#13;
<br/>
}&#13;
<br/></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
the texture files were copied from elsewhere in the game and renamed.&#13;
<br/><br/>
I don't get any texture on my ase model with the following BITMAP line.&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;
<br/><br/>
but if I use a direct reference to my texture...&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;
<br/>
...I get a textured model with no shadow.  &#13;
<br/><br/>
Using a material from another model works fine, ie &#13;
<br/>
*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;
<br/><br/>
Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;
<br/><br/>
And yes, I named it 'pissy' on purpose. <img src="/web/20061013024228im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/>
Please help.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117066" date="Posted: Fri Oct 21, 2005 5:09 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;
<br/><br/>
To test the material shader simply load up one of the test maps and type...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">r_materialOverride "models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
More details on the CVar can be found here...&#13;
<br/><br/><a href="/web/20061013024228/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29" target="_blank">http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29</a>&#13;
<br/><br/>
If the material shader works then it's the reference in the ASE.&#13;
<br/><br/>
Try...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
or&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="/web/20061013024228/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024228im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024228/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117079" date="Posted: Fri Oct 21, 2005 7:17 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Works like a charm without Rich Text Formatting.  <img src="/web/20061013024228im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/><br/><br/>
And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117143" date="Posted: Fri Oct 21, 2005 3:38 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Ah yes that could be a problem. <img src="/web/20061013024228im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/>_________________<br/><a href="/web/20061013024228/http://www.doom3world.org/" target="_blank" class="postlink"><img src="/web/20061013024228im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="/web/20061013024228/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 10:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>
<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.
<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.
<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.
<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>
<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.
<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.
<br /><br />Here is a material shader found in vehicles.mtr...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>
<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.
<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.
<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>
<br /><br />Now you should have a pretty good idea how to write your own material shaders.
<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.
<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 6:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 5:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:
<br /><br /><a href="https://web.archive.org/web/20101225124736/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 8:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!
<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?
<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: 
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>
<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 9:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>
<br /><br />Renderbump is used to render a normal map for use with a low poly model.
<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 11:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.
<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?
<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 2:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.
<br /><br />2,4,8,16,32,64,128,256,512,1024
<br /><br />Anything inbetween will be resized to match.
<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.
<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.
<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.
<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.
<br /><br />The way this is done is by using the scale keyword in your material shader.
<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 10:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:
<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>
<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.
<br /><br />For example:
<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.
<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.
<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.
<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 1:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 9:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 10:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 10:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 12:54 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.
<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 5:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:
<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225124736/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 8:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 8:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 10:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>
<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.
<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.
<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.
<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 4:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 10:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br />Whiskey Tango Foxtrot?!
<br /><br />(ie,  <img src="https://web.archive.org/web/20101225124736im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 11:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:
<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225124736/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 3:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.
<br /><br />I have created a folder in \base called \materials
<br />I created a text file called fleabay.mtr with the following...
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>
<br /><br />the texture files were copied from elsewhere in the game and renamed.
<br /><br />I don't get any texture on my ase model with the following BITMAP line.
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"
<br /><br />but if I use a direct reference to my texture...
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"
<br />...I get a textured model with no shadow.  
<br /><br />Using a material from another model works fine, ie 
<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"
<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.
<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 6:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.
<br /><br />To test the material shader simply load up one of the test maps and type...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225123348/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 8:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 4:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 3:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.
<br /><br />I have created a folder in \base called \materials
<br />I created a text file called fleabay.mtr with the following...
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>
<br /><br />the texture files were copied from elsewhere in the game and renamed.
<br /><br />I don't get any texture on my ase model with the following BITMAP line.
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"
<br /><br />but if I use a direct reference to my texture...
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"
<br />...I get a textured model with no shadow.  
<br /><br />Using a material from another model works fine, ie 
<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"
<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.
<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 6:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.
<br /><br />To test the material shader simply load up one of the test maps and type...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225123348/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 8:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 4:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20101225123348im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>
<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.
<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.
<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.
<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>
<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.
<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.
<br /><br />Here is a material shader found in vehicles.mtr...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>
<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.
<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.
<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>
<br /><br />Now you should have a pretty good idea how to write your own material shaders.
<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.
<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:
<br /><br /><a href="https://web.archive.org/web/20081121121344/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!
<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?
<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: 
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>
<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>
<br /><br />Renderbump is used to render a normal map for use with a low poly model.
<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.
<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?
<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.
<br /><br />2,4,8,16,32,64,128,256,512,1024
<br /><br />Anything inbetween will be resized to match.
<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.
<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.
<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.
<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.
<br /><br />The way this is done is by using the scale keyword in your material shader.
<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:
<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>
<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.
<br /><br />For example:
<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.
<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.
<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.
<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.
<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:
<br /><br /><!-- m --><a class="postlink" href="../../www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>
<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.
<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.
<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.
<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br />Whiskey Tango Foxtrot?!
<br /><br />(ie,  <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:
<br /><!-- m --><a class="postlink" href="viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 3:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.
<br /><br />I have created a folder in \base called \materials
<br />I created a text file called fleabay.mtr with the following...
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>
<br /><br />the texture files were copied from elsewhere in the game and renamed.
<br /><br />I don't get any texture on my ase model with the following BITMAP line.
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"
<br /><br />but if I use a direct reference to my texture...
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"
<br />...I get a textured model with no shadow.  
<br /><br />Using a material from another model works fine, ie 
<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"
<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.
<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 6:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.
<br /><br />To test the material shader simply load up one of the test maps and type...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225122947/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 8:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 4:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071019013006/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071019013006/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071019013006im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071019013006/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061041/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061041/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061041/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 2:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.&#13;<br /><br />I have created a folder in \base called \materials&#13;<br />I created a text file called fleabay.mtr with the following...&#13;<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>&#13;<br /><br />the texture files were copied from elsewhere in the game and renamed.&#13;<br /><br />I don't get any texture on my ase model with the following BITMAP line.&#13;<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;<br /><br />but if I use a direct reference to my texture...&#13;<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;<br />...I get a textured model with no shadow.  &#13;<br /><br />Using a material from another model works fine, ie &#13;<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 5:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;<br /><br />To test the material shader simply load up one of the test maps and type...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213628/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 7:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 3:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>
<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.
<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.
<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.
<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>
<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.
<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.
<br /><br />Here is a material shader found in vehicles.mtr...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>
<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.
<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.
<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>
<br /><br />Now you should have a pretty good idea how to write your own material shaders.
<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.
<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:
<br /><br /><a href="https://web.archive.org/web/20081121121344/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!
<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?
<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: 
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>
<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>
<br /><br />Renderbump is used to render a normal map for use with a low poly model.
<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.
<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?
<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.
<br /><br />2,4,8,16,32,64,128,256,512,1024
<br /><br />Anything inbetween will be resized to match.
<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.
<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.
<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.
<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.
<br /><br />The way this is done is by using the scale keyword in your material shader.
<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:
<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>
<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.
<br /><br />For example:
<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.
<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.
<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.
<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.
<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:
<br /><br /><!-- m --><a class="postlink" href="../../www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>
<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.
<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.
<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.
<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br />Whiskey Tango Foxtrot?!
<br /><br />(ie,  <img src="https://web.archive.org/web/20081121121344im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:
<br /><!-- m --><a class="postlink" href="viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061041/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061041/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061041im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061041/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 3:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.
<br /><br />I have created a folder in \base called \materials
<br />I created a text file called fleabay.mtr with the following...
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>
<br /><br />the texture files were copied from elsewhere in the game and renamed.
<br /><br />I don't get any texture on my ase model with the following BITMAP line.
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"
<br /><br />but if I use a direct reference to my texture...
<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"
<br />...I get a textured model with no shadow.  
<br /><br />Using a material from another model works fine, ie 
<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"
<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.
<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 6:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.
<br /><br />To test the material shader simply load up one of the test maps and type...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20101225122947/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 8:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 4:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20101225122947im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p117047" date="Posted: Fri Oct 21, 2005 2:27 am "><author>fleabay</author><body><![CDATA[<div class="postbody">I've been messing with this forever and can't get it working right.&#13;<br /><br />I have created a folder in \base called \materials&#13;<br />I created a text file called fleabay.mtr with the following...&#13;<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/fleabay/pissy<br />{<br />   bumpmap      models/mapobjects/fleabay/pissy_local.tga<br />   diffusemap      models/mapobjects/fleabay/pissy_d.tga<br />   specularmap      models/mapobjects/fleabay/pissy_s.tga<br />}<br /></div>&#13;<br /><br />the texture files were copied from elsewhere in the game and renamed.&#13;<br /><br />I don't get any texture on my ase model with the following BITMAP line.&#13;<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;<br /><br />but if I use a direct reference to my texture...&#13;<br />*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;<br />...I get a textured model with no shadow.  &#13;<br /><br />Using a material from another model works fine, ie &#13;<br />*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;<br /><br />Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;<br /><br />And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Please help.</div>]]></body></post><post id="p117066" date="Posted: Fri Oct 21, 2005 5:09 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;<br /><br />To test the material shader simply load up one of the test maps and type...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">r_materialOverride "models/mapobjects/fleabay/pissy"</div><br /><br />More details on the CVar can be found here...<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213628/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29">http://wiki.doom3reference.com/wiki/R_m ... %28cvar%29</a><!-- m --><br /><br />If the material shader works then it's the reference in the ASE.<br /><br />Try...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</div><br /><br />or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</div></div>]]></body></post><post id="p117079" date="Posted: Fri Oct 21, 2005 7:17 am "><author>fleabay</author><body><![CDATA[<div class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /><br /><br />And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</div>]]></body></post><post id="p117143" date="Posted: Fri Oct 21, 2005 3:38 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20071027213628im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="117047" date="Posted: Fri Oct 21, 2005 2:27 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">I've been messing with this forever and can't get it working right.&#13;
<br/><br/>
I have created a folder in \base called \materials&#13;
<br/>
I created a text file called fleabay.mtr with the following...&#13;
<br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">&#13;
<br/>
models/mapobjects/fleabay/pissy&#13;
<br/>
{&#13;
<br/>
   bumpmap      models/mapobjects/fleabay/pissy_local.tga&#13;
<br/>
   diffusemap      models/mapobjects/fleabay/pissy_d.tga&#13;
<br/>
   specularmap      models/mapobjects/fleabay/pissy_s.tga&#13;
<br/>
}&#13;
<br/></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
the texture files were copied from elsewhere in the game and renamed.&#13;
<br/><br/>
I don't get any texture on my ase model with the following BITMAP line.&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;
<br/><br/>
but if I use a direct reference to my texture...&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;
<br/>
...I get a textured model with no shadow.  &#13;
<br/><br/>
Using a material from another model works fine, ie &#13;
<br/>
*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;
<br/><br/>
Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;
<br/><br/>
And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/>
Please help.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117066" date="Posted: Fri Oct 21, 2005 5:09 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;
<br/><br/>
To test the material shader simply load up one of the test maps and type...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">r_materialOverride "models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
More details on the CVar can be found here...&#13;
<br/><br/><a href="https://web.archive.org/web/20070509181516/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29" target="_blank">http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29</a>&#13;
<br/><br/>
If the material shader works then it's the reference in the ASE.&#13;
<br/><br/>
Try...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
or&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="https://web.archive.org/web/20070509181516/http://www.doom3world.org/" target="_blank" class="postlink"><img src="https://web.archive.org/web/20070509181516im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117079" date="Posted: Fri Oct 21, 2005 7:17 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/><br/><br/>
And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117143" date="Posted: Fri Oct 21, 2005 3:38 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/>_________________<br/><a href="https://web.archive.org/web/20070509181516/http://www.doom3world.org/" target="_blank" class="postlink"><img src="https://web.archive.org/web/20070509181516im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117047" date="Posted: Fri Oct 21, 2005 2:27 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">I've been messing with this forever and can't get it working right.&#13;
<br/><br/>
I have created a folder in \base called \materials&#13;
<br/>
I created a text file called fleabay.mtr with the following...&#13;
<br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">&#13;
<br/>
models/mapobjects/fleabay/pissy&#13;
<br/>
{&#13;
<br/>
   bumpmap      models/mapobjects/fleabay/pissy_local.tga&#13;
<br/>
   diffusemap      models/mapobjects/fleabay/pissy_d.tga&#13;
<br/>
   specularmap      models/mapobjects/fleabay/pissy_s.tga&#13;
<br/>
}&#13;
<br/></td>	</tr></table><span class="postbody">&#13;
<br/><br/>
the texture files were copied from elsewhere in the game and renamed.&#13;
<br/><br/>
I don't get any texture on my ase model with the following BITMAP line.&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy.tga"&#13;
<br/><br/>
but if I use a direct reference to my texture...&#13;
<br/>
*BITMAP "\\base\models\mapobjects\fleabay\pissy_d.tga"&#13;
<br/>
...I get a textured model with no shadow.  &#13;
<br/><br/>
Using a material from another model works fine, ie &#13;
<br/>
*BITMAP "\\base\models\mapobjects\filler\monitor1.tga"&#13;
<br/><br/>
Anyway, I can't find "fleabay" anywhere in the media browser materials list.  Its like it is not reading in my custom base\material\fleabay.mtr file.&#13;
<br/><br/>
And yes, I named it 'pissy' on purpose. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/><br/>
Please help.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117066" date="Posted: Fri Oct 21, 2005 5:09 am    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">It's either a problem with the material shader itself or the way it's being referenced by the model.&#13;
<br/><br/>
To test the material shader simply load up one of the test maps and type...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">r_materialOverride "models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
More details on the CVar can be found here...&#13;
<br/><br/><a href="https://web.archive.org/web/20070509181516/http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29" target="_blank">http://wiki.doom3reference.com/wiki/R_materialOverride_%28cvar%29</a>&#13;
<br/><br/>
If the material shader works then it's the reference in the ASE.&#13;
<br/><br/>
Try...&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//purgatory/purgatory/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody">&#13;
<br/><br/>
or&#13;
<br/><br/></span><table width="90%" cellspacing="1" cellpadding="3" border="0" align="center"><tr><td><span class="genmed"><b>Code:</b></span></td>	</tr><tr><td class="code">*BITMAP "//doom3/base/models/mapobjects/fleabay/pissy"</td>	</tr></table><span class="postbody"><br/>_________________<br/><a href="https://web.archive.org/web/20070509181516/http://www.doom3world.org/" target="_blank" class="postlink"><img src="https://web.archive.org/web/20070509181516im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117079" date="Posted: Fri Oct 21, 2005 7:17 am    Post subject: "><author>fleabay</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Works like a charm without Rich Text Formatting.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_redface.gif" alt="Embarassed" border="0"/><br/><br/>
And yes, i've use wordpad to code many times in the past without a problem.  I got burned good this time.</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="117143" date="Posted: Fri Oct 21, 2005 3:38 pm    Post subject: "><author>rich_is_bored</author><body><![CDATA[<tr><td colspan="2"><span class="postbody">Ah yes that could be a problem. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smiles/icon_smile.gif" alt="Smile" border="0"/><br/>_________________<br/><a href="https://web.archive.org/web/20070509181516/http://www.doom3world.org/" target="_blank" class="postlink"><img src="https://web.archive.org/web/20070509181516im_/http://www.doom3world.org/site/img/d3w.gif" border="0"/>  Staff</a>&#13;
<br/>
Learn something today? Why not write an article about it on <a href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Main_Page" target="_blank" class="postlink">modwiki.net</a>?</span><span class="gensmall"/></td>
			</tr>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061019/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061019/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061019im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061019/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054702/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054702/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054702im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054702/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071027213601/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213601/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071027213601im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213601/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028060936/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060936/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028060936im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060936/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054832/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054832/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054832im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054832/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061001/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061001/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061001im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061001/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071027213644/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213644/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071027213644im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213644/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071027213546/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213546/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071027213546im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213546/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028060744/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060744/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028060744im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060744/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071027213532/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213532/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071027213532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071027213532/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054612/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054612/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054612im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054612/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028060826/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060826/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028060826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060826/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061304/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061304/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061304im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061304/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061121/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061121/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061121im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061121/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054532/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054532/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054532im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054532/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054751/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054751/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054751im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054751/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028060846/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060846/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028060846im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028060846/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054854/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054854/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054854im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054854/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028054637/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054637/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028054637im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028054637/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>&#13;<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.&#13;<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.&#13;<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.&#13;<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>&#13;<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.&#13;<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.&#13;<br /><br />Here is a material shader found in vehicles.mtr...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>&#13;<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.&#13;<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.&#13;<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.&#13;<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>&#13;<br /><br />Now you should have a pretty good idea how to write your own material shaders.&#13;<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.&#13;<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:&#13;<br /><br /><a href="https://web.archive.org/web/20071028061101/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!&#13;<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?&#13;<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: &#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>&#13;<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>&#13;<br /><br />Renderbump is used to render a normal map for use with a low poly model.&#13;<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.&#13;<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?&#13;<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.&#13;<br /><br />2,4,8,16,32,64,128,256,512,1024&#13;<br /><br />Anything inbetween will be resized to match.&#13;<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.&#13;<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.&#13;<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.&#13;<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.&#13;<br /><br />The way this is done is by using the scale keyword in your material shader.&#13;<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:&#13;<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>&#13;<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.&#13;<br /><br />For example:&#13;<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.&#13;<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.&#13;<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.&#13;<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.&#13;<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:&#13;<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061101/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>&#13;<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.&#13;<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.&#13;<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.&#13;<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>&#13;<br /><br />Whiskey Tango Foxtrot?!&#13;<br /><br />(ie,  <img src="https://web.archive.org/web/20071028061101im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:&#13;<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20071028061101/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post><post id="p55989" date="Posted: Sun Oct 10, 2004 9:31 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><span style="font-size: 200%; line-height: normal"><span style="font-weight: bold">Quick and Dirty Material Shader Primer</span></span>
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Introduction</span></span>
<br /><br />In Doom 3 textures are usually composed of several images. These images are blended using different techniques to form a material. These materials are what you see as "textures" in game.
<br /><br />What these images do is define the asthetics of a surface. By combining the efforts of multiple images, each reacting differently to the light surrounding it, you can convey more realism than by using a single image.
<br /><br />The problem with using multiple images is that you need a way to associate them with one another. This is where material shaders come into play.
<br /><br />A material shader is nothing more than a list of commands enclosed in curly brackets with a given name. These commands define what images to use, where to locate them, how they should behave, and how the surface should react to different events in game.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Naming Convention</span></span>
<br /><br />If you've ever used Doom 3's level editor, you've probably seen the media browser and how it appears to be a directory tree. If you take anything away from this tutorial please note that this menu while it is a directory tree, is not a reflection of actual directories on your hard drive or inside pak files.
<br /><br />In order to help explain this I'm going to have to throw a material shader in your face real quick.
<br /><br />Here is a material shader found in vehicles.mtr...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now what's important to note here is the very first line. It says models/mapobjects/buggy/buggy. This is the name of the material. Yes, I am aware that there are forward slashes and it looks like it's pointing to a directory.<br /><br />And to help prove my point we're going to look for this mysterious directory. First, it says models so that means we should look in pak002.pk4. Now try to browse to models\mapobjects\buggy\buggy.<br /><br />What's that? There is no buggy directory? Well that can't be right because clearly models/mapobjects/buggy/buggy is a path because it has slashes. Now you can search the other pak files if you want but I'm telling you right now that you're not going to find a buggy directory anywhere unless you're a smart ass and create one yourself.<br /><br />So, now you've got to be wondering, if models/mapobjects/buggy/buggy is a material name then why are there slashes?<br /><br />Well, I'll explain that with an example. Remember how the media browser displays a directory tree? Well, if you were to open the editor and go to the media browser. Then browse to models/mapobjects/ you'd see that in the media browser a buggy folder exists and inside this folder is a material named buggy. Coinsidence?<br /><br />Note: If you have the clean shaders pak that you won't find this shader in the editor.<br /><br />So, while models/mapobjects/buggy/buggy does not point to a directory inside the pak files it does point to a location inside the media browser.<br /><br />What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages and Curly Brackets</span></span><br /><br />Now that we know how to name a material shader we need to define where the shader begins and ends. Let's look at that buggy shader again...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />If you look at the shader above you'll see two curly brackets. These brackets define where models/mapobjects/buggy/buggy begins and ends. Opening curly brackets define the start and closing curly brackets define the end.<br /><br />Now, in this material shader there are three stages. What are stages? Well, you can think of them as layers in Photoshop where each layer could act as it's own separate image. They are in a stack and in some cases the order in which you code them has an effect on the outcome.<br /><br />For instance, if I had a opaque image on one stage and an image with an alpha blend on another, I would have to ensure that the alpha blended stage was the top most stage so you could see through the transparent parts to the opaque stage below. If it were the other way around, I would not be able to see the alpha blended stage because the opaque stage would obscure it.<br /><br />The good news is that the three most common blend modes do not have to be in a certain order to render properly.<br /><br />Don't breathe a sigh of relief yet. There is more to talk about in regards to stages but we'll get back to that later.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Three Most Common Blend Modes</span></span><br /><br />Now that we can name a material shader and understand the basic structure we can actually start with the important stuff, blend modes. And since this is just a primer we're only going to bother with the three most common. They are diffusemap, bumpmap, and specularmap.<br /><br />Diffuse maps define the color of a surface. Diffuse maps do not effect lighting.<br /><br />Normal maps define the slope of a surface. Normal maps are the most influential in regards to how light effects a surface.<br /><br />Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.<br /><br />As for how to use these blend modes let's yet again look at an example shader...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">models/mapobjects/buggy/buggy<br />{<br />   renderbump -size 512 512 -aa 2 models/md5/vehicles/buggy/buggy_local.tga models/md5/vehicles/buggy/buggy_hi.lwo<br />   diffusemap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   specularmap   models/mapobjects/base/chairs/chair1_bmp.tga<br />   bumpmap      models/md5/vehicles/buggy/buggy_local.tga<br />}</div><br /><br />Now you can see above that each command diffusemap, specularmap, and bumpmap is followed by a reference to an image file. These file paths are relative to the Doom 3 base directory, a mod directory, or the structure of a pak file. In this case they refer to pak002.pk4 because that is the pak with a models folder.<br /><br />Just to wrap this section up I want to spend a bit of time on the command qer_editorimage. It's not a blend mode but it's format is the same. So, if it's not a blend mode then why is it important?<br /><br />Well, the editor relies on this command so it knows what to display on the face of your brushes in the camera window. If you leave it out, like it is missing from this shader, then whenever you apply a new material to a brush it will be solid black.<br /><br />What image you point it to is not important since it has no effect in game but generally it's a good idea to point it at the diffuse map just for the sake of asthetics.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Stages with Special Parameters</span></span><br /><br />Here's an example shader I wrote using what we've talked about up to this point...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   specularmap   textures\custom\grey.tga<br />}</div><br /><br />Let's say I want my specular map to scroll. Well, the command for that is called translate. But where would I put this command? How would the game know what stage I want to apply this effect to?<br /><br />Well, without adding new curly brackets it won't. But there's more to it then just wrapping the specularmap command in a set of curly brackets.<br /><br />Here's how my shader would look after adding the translate command to the specularmap stage...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div><br /><br />So, what's happening here is a curly bracket defines where this new stage starts. Then it's followed by a blend command that informs the game that this stage will be a specular map stage. Then it's followed by a map command that tells the game what image I intend to use as my specular map. And finally I have my translate command followed by a closing bracket to let the game know that this is the end of the specular stage.<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">General Material Parameters</span></span><br /><br />The last thing I want to talk about is general material parameters. These are commands that do not affect individual stages but rather the entire material as a whole.<br /><br />For instance, one of these parameters is metal, and if I added it to my example material it would look like this...<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/mask<br />{<br />   metal<br />   qer_editorimage   textures\custom\mask_d.tga<br />   diffusemap   textures\custom\mask_d.tga<br />   {<br />      blend      specularmap<br />      map   textures\custom\grey.tga<br />      translate   1,   0<br />   }<br />}</div>
<br /><br />What this parameter does is tell the game that when this material is shot it should react as if it were made of metal.
<br /><br />One thing to keep in mind though is that we are not limited to defining the behavior of a material with these commands. There are also commands that effect the way a material is rendered.
<br /><br />An example is the command twosided. This command is best used with decals when you want both sides to be rendered. An example would be all those non-patch hanging wires you see in game. Those are just decals that are set to be two sided.
<br /><br /><span style="font-size: 134%; line-height: normal"><span style="font-weight: bold">Conclusion</span></span>
<br /><br />Now you should have a pretty good idea how to write your own material shaders.
<br /><br />Granted, it's not going to be anything complex but the whole point of this tutorial is just to get the most basic of questions answered and to fill the need for a primer since the SDK is taking longer than I expected.
<br /><br />If you spend a little time examining Doom 3's existing shaders then figuring out what other commands do should be a breeze. And if it's not, the SDK is on the way and there should be a shader manual included.</div>]]></body></post><post id="p56081" date="Posted: Mon Oct 11, 2004 5:17 am "><author>ajerara</author><body><![CDATA[<div class="postbody">Thanks, rich. I could really use this, as you know.</div>]]></body></post><post id="p58997" date="Posted: Mon Oct 25, 2004 4:41 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">Boredom + Visio = Confusing graph:
<br /><br /><a href="https://web.archive.org/web/20080418201014/http://www.doom3reference.com/images/models_materials.gif" class="postlink">http://www.doom3reference.com/images/models_materials.gif</a></div>]]></body></post><post id="p64941" date="Posted: Sat Nov 27, 2004 7:16 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Thanks, Rich! Most of my questions have been answered!
<br /><br />The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?
<br /><br />Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness: 
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/wood_door<br />{<br />   renderbump -size 256 512 -aa 2<br />textures\custom\textures\door1.tga<br />   qer_editorimage   textures\custom\textures\door1.tga<br />   diffusemap   textures\custom\textures\door1.tga<br />   specularmap   textures\custom\textures\door1.tga<br />}</div>
<br /><br />...(don't worry, I don't have my hard drive directories confused with my media browser paths) I'm obviously missing stuff, like an .lwo file (or the like).</div>]]></body></post><post id="p64949" date="Posted: Sat Nov 27, 2004 8:48 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">evilartist wrote:</div><div class="quotecontent">The only problem I have now is getting my own texture to display at a size of 256 x 512. I noticed near the top is a quick display of a texture with a rendered dimension of 512 x 512. I'm missing an .lwo file (or .ase, etc.). I have no idea how to create those files. Is there a way I can not need an .lwo?</div><br /><br />What are the dimensions of your images? And what do you mean by a size of 256x512? Are you refering to units in game or image resolution?<br /><br />And what do you mean you're missing an LWO/ASE file? Are we talking about a texture for a map or a model?<br /><br />LWO and ASE files are model file formats. LWO is Lightwave 3D and ASE is 3DSMAX.<br /><br />You don't need either to create textures and I'm not sure where you got the idea that you did.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Btw, when I added the renderbump thing in my .mtr, the door texture appears as black nothingness:</div>
<br /><br />Renderbump is used to render a normal map for use with a low poly model.
<br /><br />Unless your making a texture for a model you have no use for it.</div>]]></body></post><post id="p64956" date="Posted: Sat Nov 27, 2004 10:33 pm "><author>evilartist</author><body><![CDATA[<div class="postbody">Sorry, I did a terrible job explaining my problem.
<br /><br />The actual picture is 286 x 511, but when I mentioned 256x512 (I meant to say 64x128), I was referring to units in the editor. When I used the texture on a brush, the picture was "stretched" out to like 256x256, or something. I want the texture to appear at a size of 64x128. Why won't it?
<br /><br />Sorry again about my crappy inexperience. I only misinterpretted one of the example material shaders you displayed.  <img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /> I thought it was weird that I was using .ase and .lwo in association with a simple texture.</div>]]></body></post><post id="p64966" date="Posted: Sun Nov 28, 2004 1:37 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">The images need to have a resolution that is a power of two.
<br /><br />2,4,8,16,32,64,128,256,512,1024
<br /><br />Anything inbetween will be resized to match.
<br /><br />Your image is 286 x 511. Doom 3 will rescale this image. Whether it would scale it up, down, or to the closest match, I'm not sure. In the end, your texture is going to be 256 x 256, 512 x 512, or 256 x 512 ingame.
<br /><br />Mac hates this analogy but based on Doom 3's vanilla textures your looking at a scale of 2 pixels for every unit in game.
<br /><br />This means for a brush that is 64x128 units, an image that is 128x256 would fit it perfectly.
<br /><br />Now, keep in mind you are not limited to making textures to Doom 3's specifications. If you want you can use higher resolution images by instructing the game to scale the texture down.
<br /><br />The way this is done is by using the scale keyword in your material shader.
<br /><br />So say you wanted to double the resolution of your texture to 256x512 but squeeze it into the same space as a 128x256 texture. Here's an example of what your shader would look like...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/custom/double_rez<br />{<br />    qer_editorimage   textures/custom/dbl_rez.tga<br />    {<br />        blend   diffusemap<br />        map    textures/custom/dbl_rez.tga<br />        scale    0.5, 0.5                                 // shrinks the size by half to<br />                                                               // cover the same space as<br />                                                               // a smaller resoultion texture<br />    }<br />}</div></div>]]></body></post><post id="p66010" date="Posted: Fri Dec 03, 2004 9:03 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Good work rich. Sorry to be nitpicking but there's a few things I'd like to comment on for completeness' sake:
<br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">Note: If you have the clean shaders pak that you won't find this shader in the editor.</span></div><br /><br />Yes of course because <span style="color: red">models/mapobjects/buggy/buggy</span> is a broken material shader. A broken shader is a shader that refers to one or more inexistent assets (TGA files).<br /><br />In this case: <span style="color: green">models/md5/vehicles/buggy/buggy_local.tga</span><br /><br />If you search in the pak002.pk4 file, you will see it's not there. The TGA file for the diffuse map <span style="color: green">models/mapobjects/base/chairs/chair1_bmp.tga</span> does exist however but it's a solid grey texture. Since the same texture is also used for the specular map, there would effectively be no specular effects as a result.<br /><br />Bottom line: a model or brush with this shader applied to it would render with a plain, flat solid grey in the game. Not very useful even if the buggy model mesh (models/md5/vehicles/buggy/buggy.lwo) did exist (but it doesn't of course) <img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="quotetitle">rich_is_bored wrote:</div><div class="quotecontent"><span style="font-size: 92%; line-height: normal">What does this mean? That you can name your material shaders whatever the hell you want. I can name a material shader foo/dee/dum/wee and it won't matter if my images are stored in the models, or textures folder. All the shader name applies to is the location of the material in the media browser.</span></div>
<br /><br />Yes, absolutely correct in technical terms. However I think that from a practical point of view, it's important for game designers and mod creators to assign names to shaders which are relevant to their intended use. It's not any harder to choose a logical, orderly name for them than to name them "whatever the hell you want". But the payoff in terms of orderliness and "confusion free" use for the map designers is tremendous.
<br /><br />For example:
<br />If you intend to create a shader meant to be used to skin a model mesh or for oriented particle effects, it's not really a good idea to choose a name that begins with textures/... It will still work fine but that will cause it to appear in the <span style="font-weight: bold">Textures</span> tree of the media window, thus confusing users into thinking that the shader is meant to be used for applying to world geometry.
<br /><br />There can be exceptions however. If the said shader works fine on map brushes and patch meshes, then there's no problem. If though, the shader has stages with parameters incompatible with brush geometry like "vertexcolor" or oriented sprites for example, then naming that shader textures/.... is really a bad idea because it won't look right when applied on brushes.
<br /><br />Sorry if I bring this up but I'm very partial to this. The designers at Id (remember, they're only human and everybody can make mistakes) mis-named a few of their shaders this way and it caused me great headaches when cleaning up the textures/... material files (and sadly, it is likely to cause confusion for newbie Doom3 mappers forever). Please try and learn from this and not repeat the same mistakes. Bottom line is that one should try and exercise good judgment when naming new shaders.
<br /><br />The TGA file assets for your shaders however, those <span style="text-decoration: underline">can</span> reside <span style="font-weight: bold">anywhere the hell you want</span> because the map editor does not see TGA files directly. It sees ONLY material names to fill the media window with.</div>]]></body></post><post id="p66041" date="Posted: Sat Dec 04, 2004 12:03 am "><author>eskimo roll</author><body><![CDATA[<div class="postbody">cheers for that info rich_is_bored, looking forward to putting it into practice at some stage.</div>]]></body></post><post id="p74208" date="Posted: Wed Jan 26, 2005 8:48 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">Just a quick question which I didnt see the need for me to post a new thread, how do I use just a black and white heightmap and not a heightmap + a normal map?</div>]]></body></post><post id="p74209" date="Posted: Wed Jan 26, 2005 9:08 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">You'd define your bumpmap stage like so...
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">{<br />   blend   bumpmap<br />   map   heightmap( textures/custom/whatever.tga, 5)<br />}</div></div>]]></body></post><post id="p74216" date="Posted: Wed Jan 26, 2005 9:39 am "><author>SyPHer_</author><body><![CDATA[<div class="postbody">thanks <img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p74232" date="Posted: Wed Jan 26, 2005 11:54 am "><author>ViPr</author><body><![CDATA[<div class="postbody">after reading this explanation i don't understand what specular maps are anymore and i've been explaining them to other people for ages now.
<br /><br />i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>]]></body></post><post id="p74276" date="Posted: Wed Jan 26, 2005 4:25 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />For an explanation of the specular "factor" used in D3 read this:
<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20080418201014/http://www.iddevnet.com/doom3/lighting.php">http://www.iddevnet.com/doom3/lighting.php</a><!-- m --></div>]]></body></post><post id="p74306" date="Posted: Wed Jan 26, 2005 7:14 pm "><author>ViPr</author><body><![CDATA[<div class="postbody">dude after reading that i know even less what a specular map is. so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>]]></body></post><post id="p74310" date="Posted: Wed Jan 26, 2005 7:26 pm "><author>crimity</author><body><![CDATA[<div class="postbody">d3 reads in rgb for specular maps.  I'm sure there are some that only use grey though.</div>]]></body></post><post id="p74336" date="Posted: Wed Jan 26, 2005 9:36 pm "><author>rich_is_bored</author><body><![CDATA[<div class="postbody"><div class="quotetitle">ViPr wrote:</div><div class="quotecontent">i thought the brightness and colors in specular maps affected the brightness and color of specular highlights. i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div><br /><br />You're right, I reworded the terminology...<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Specular maps define the specular intensity and color of highlights on a surface. Brightness effects the intensity. Hue and saturation effects color.</div><br /><br />Better?<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">so a specular map is grayscale now? how the hell are you supposed to do gold then? don't tell me id software actually wrote this.</div>
<br /><br />No. It's RGB just like everything else. I certainly don't remember saying that specular maps were greyscale but if so, please point out where the confusion is so I can correct it.
<br /><br />You'd do gold by drawing a yellow/orange tinted specular map.
<br /><br />And no, id didn't write this. I did in an attempt to provide a more in depth explanation.
<br /><br />But hey, I'm not a professional. I don't get paid for my work and the tutorials submitted here don't go through an editor. The occasional use of incorrect terminology is expected. That's why I rely on comments and such to revise and correct our documentation.</div>]]></body></post><post id="p74407" date="Posted: Thu Jan 27, 2005 3:55 am "><author>ViPr</author><body><![CDATA[<div class="postbody">no i was not saying that you said that specular maps were greyscale i was saying that that site Mordenkainen pointed out said it.</div>]]></body></post><post id="p74468" date="Posted: Thu Jan 27, 2005 9:44 am "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">i thought Doom3 uses constant glossiness without using textures to vary it and this is the main reason i decided not to buy this game.</div>
<br /><br />Whiskey Tango Foxtrot?!
<br /><br />(ie,  <img src="https://web.archive.org/web/20080418201014im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /> )</div>]]></body></post><post id="p74478" date="Posted: Thu Jan 27, 2005 10:28 am "><author>der_ton</author><body><![CDATA[<div class="postbody">We shouldn't use this thread to talk about this other issue. Continue the talk about glossiness here please:
<br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20080418201014/http://www.doom3world.org/phpbb2/viewtopic.php?p=74477#74477">http://www.doom3world.org/phpbb2/viewto ... 4477#74477</a><!-- m --></div>]]></body></post></posts></thread></xml>
