<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="3868"><title>Complete GUI Scripting - 5: Applying a GUI script to a map</title><posts><post id="p35364" date="Posted: Sat Aug 14, 2004 4:57 pm "><author>zeh</author><body><![CDATA[<div class="postbody">Welcome to lesson five-and-a-half in the complete GUI scripting series. In this tutorial, we'll apply the GUI we created on previous lessons to a map. This is a really short and a really simple tutorial, but added to the previous two lessons, it's aimed to make a complete GUI script tutorial from start to finish.
<br /><br />This tutorial presumes you have some minimum knowledge of the map editor in DOOM 3. If you don't, please take a moment to see <a href="https://web.archive.org/web/20100522163800/http://www.doom3world.org/phpbb2/viewtopic.php?t=3017&amp;sid=b013b61b704023f42bebe717cbff9132" class="postlink">the many tutorials</a> available on this topic, specially BNA!'s <a href="https://web.archive.org/web/20100522163800/http://www.doom3world.org/phpbb2/viewtopic.php?t=3016" class="postlink">Your first box map</a> tutorial and <a href="https://web.archive.org/web/20100522163800/http://www.doom3world.org/phpbb2/viewtopic.php?t=3&amp;sid=b013b61b704023f42bebe717cbff9132" class="postlink">the DOOM 3 level editing FAQ</a> on how to properly set up the editor.
<br /><br /><span style="font-size: 167%; line-height: normal"><span style="font-weight: bold">Complete GUI Scripting - 5: Applying a GUI script to a map</span></span>
<br /><br />One of the most powerful features of GUI scripting in the DOOM 3 engine is the ability to apply your GUI script to an in-game object, giving the player the ability to interact with it in the game world itself, without opening outside dialog windows.
<br /><br />Adding GUI scripts to in-game objects is pretty easy. For this tutorial, I've created a simple 'kitchen' map to place our cake status reporter panel. This is a rather crude copy &amp; paste job from the original DOOM 3 singleplayer maps, so please bare since I don't have that much of an experience in the DOOM 3 map editor.
<br /><br />Well, first of all, you'll have to download <a href="https://web.archive.org/web/20100522163800/http://hosted.zeh.com.br/doom3/tutorials/tut5.zip" class="postlink">the source files</a> for this tutorial, since the map we use is inside of it. Open the zip, put all *.map files on the &lt;doom3&gt;/base/maps folder, and put all the rest in the &lt;doom3&gt;/base/guis/cakestatus folder.
<br /><br />Something to take notice is that, since I've changed the location of our "cakestatus" script from /base/cakestatus to /base/guis/cakestatus, all material references had to be changed too. So I changed the GUI script and cakestatus3.gui is different from the cakestatus2.gui file we used on the previous lesson. This is, however, just a hack job to get us going. On real, serious mod works, it'd better to have your GUIs on /guis and your assets somewhere else, all correctly distributed.
<br /><br />Back to the topic. Run the map editor and open up our map - kitchen.map.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_01.jpg" alt="Image" /><br /><br />This is pretty much your default kitchen. It has a refrigerator, and that's where the UAC personnel puts the dangerous UAC cake, so we need to put the cake status reporter panel next to it. First, we have to add a new model that will display our panel.
<br /><br />Press ESC to deselect everything, right-click on the editor area, and select "New Model...". On the window that pops up, find a model to place on the map - not all models will do, though, so we need models that are prepared to have a GUI entity. Navigate to the "base &gt; models &gt; mapobjects &gt; guiobjects" folder - anyone from there will do. I used "flatmonitor &gt; flatmonitor.lwo", which is a large, flat panel you can put on the wall.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_02.jpg" alt="Image" /><br /><br />After pressing OK, the object is ready to be moved. Move it by dragging the model or rotate it by using the "Selection &gt; Rotate" menu until you find a position that it fits well.
<br /><br />That done, we're ready to get the panel working. With the model selected, be sure to have the "entity" tab opened in the 'property' window. There are many options, but we won't be dealing with them.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_03.jpg" alt="Image" /><br /><br />On the entity window, press the "Gui..." button to select a GUI that will be placed on the panel. On the window that pops up, navigate to the "base &gt; guis &gt; cakestatus" folder, and sure enough, select the "cakestatus3" GUI script.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_04.jpg" alt="Image" /><br /><br />Easy enough, it's already working on our preview window, if you have the render window enabled (if you don't, press F3 to enable it, then F4 or F7 to put on the lights).
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_05.jpg" alt="Image" /><br /><br />Select the BSP &gt; BSP menu to compile it, make sure it has no leaks, then press F2 to open it in-game. As soon as the game runs, if it kicks you to the console (it does for me), type "map kitchen" to run the map.
<br /><br />I think the cake is bad...
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_06.jpg" alt="Image" /><br /><br />...or maybe I'll just say it's good so somebody will eat it and die.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_07.jpg" alt="Image" /><br /><br />Let's have a final look in our kitchen. It's a pretty big panel, nobody will miss it. And hopefully, the world will be a better place... <span style="font-style: italic">thank to UAC cake status reporting technology</span>.
<br /><br /><img src="https://web.archive.org/web/20100522163800im_/http://hosted.zeh.com.br/doom3/tutorials/tut5_08.jpg" alt="Image" /><br /><br />Well, that's pretty much it - this lesson is just about applying a GUI script to a model anyways. There's much more that could be said about interaction between GUIs and levels, but it's out of the scope of this lesson. I'd like to thanks <span style="font-weight: bold">Njal</span> for <a href="https://web.archive.org/web/20100522163800/http://www.doom3world.org/phpbb2/viewtopic.php?t=3182" class="postlink">this tutorial</a> that helped me write mine, and point it out for people that are looking for a bit more serious level control with GUIs.
<br /><br /><a href="https://web.archive.org/web/20100522163800/http://hosted.zeh.com.br/doom3/tutorials/tut5.zip" class="postlink">Download source and example files</a> (544kb)</div>]]></body></post><post id="p40848" date="Posted: Tue Aug 24, 2004 3:17 am "><author>noodlygod</author><body><![CDATA[<div class="postbody">Hey, I just registered to say thanks a bunch for these tutorials. I started reading maybe 2 hours ago and now I've got a kooky custom GUI in-game. Thanks! -Noodly</div>]]></body></post><post id="p47639" date="Posted: Mon Sep 06, 2004 6:49 pm "><author>b0ksah</author><body><![CDATA[<div class="postbody">heheh ... and we bump ... it <img src="https://web.archive.org/web/20100522163800im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><img src="https://web.archive.org/web/20100522163800im_/http://www.doom3world.org/phpbb2/images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /></div>]]></body></post></posts></thread></xml>
