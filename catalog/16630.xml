<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="16630"><title>Tutorial: Random monster events using triggers _ scripts</title><posts><post id="p151761" date="Posted: Mon Jul 31, 2006 10:08 am "><author>Zakyrus</author><body><![CDATA[<div class="postbody">In this quick tutorial I will briefly describe how to add random monster events to a map without having to make them teleport in like most random scripts do. Ok, this is really simple(sorry I can't give screenshots, but they shouldn't be needed).  Also I will assume you know *somewhat* about using scripts in a map.
<br /><br />1. Create a box room (or wherever you wish to produce this horrible trap within your map).
<br />2. Place a trigger_once somewhere that you know the player is going to step through. 
<br />3. Then place 4 imps and give them all the K/Vs "hide" "1" and "no_idle_chatter" "1". 
<br />4. Then in the trigger_once give it K/V "call" "impset1".
<br />5. Make a script file for your map.(you *may* need to link it in Doom_main.script)
<br />6. Within this script file add this code:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   void impset1() {<br />      float randomnumber = 100 - 1;         //random number - 1 (this is necessary)<br />      float x = 0;               //temp counting var (this is necessary even though you don't see it)<br />      float random_x = int(sys.random(randomnumber));   // generate the random number<br /><br />      if ( random_x &lt; 25)<br />      {<br />         sys.trigger ($monster_demon_imp_1);<br />      }<br />      if (( 24 &lt; random_x ) &amp;&amp; ( random_x &lt; 50 ))<br />      {<br />         sys.trigger ($monster_demon_imp_2);<br />      }<br />      if (( 49 &lt; random_x ) &amp;&amp; ( random_x &lt; 75 ))<br />      {<br />         sys.trigger ($monster_demon_imp_3);<br />      }<br />      if (74 &lt; random_x)<br />      {<br />         sys.trigger ($monster_demon_imp_4);<br />      }<br />      //sys.print("And the number is: " + random_x + "\n");<br />   }<br /><br />   void main() {<br />      // main does nothing(except laugh at all unsuspecting players from the shadows!!)<br />   }<br /></div>
<br /><br />That's all there is to it! I am sure there is a better way to do the above math, but I have been working on this for hours and it works perfectly so who cares? Anyways... now you can add random monster events to your map! <img src="https://web.archive.org/web/20071110225008im_/http://www.doom3world.org/phpbb2/images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /> There's no longer any excuse not to! Many thanks to The Happy Friar for helping me on this! <img src="https://web.archive.org/web/20071110225008im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />Side note: You can make them also spawn in or whatever. By the way, this will also work for random sounds, hallucinations, etc. Although for random sound effects it would be easier to make a .sndshd file with a list of sounds then have the speaker in your map play off the shader file.
<br /><br />Btw, on another note. How does the "random_delay" work, is a "delay" also required for this? I am trying to figure this one out. If anyone can tell me that would be great. 
<br /><br />On a final note:(damn. There sure are alot of "notes" here <img src="https://web.archive.org/web/20071110225008im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /> ) I will be adding this type of stuff to vanilla DooM 3. Look forward to my Ultra-Scariness mod where you'll never be able to memorize where the monsters in the Single Player levels are ever again! (unless of course you cheat and look at the scripts <img src="https://web.archive.org/web/20071110225008im_/http://www.doom3world.org/phpbb2/images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" /> )
<br /><br />Peace out for now... (and GO MAKE SOME COOL MAPS... )   <img src="https://web.archive.org/web/20071110225008im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p151869" date="Posted: Tue Aug 01, 2006 5:29 am "><author>Zakyrus</author><body><![CDATA[<div class="postbody">I am going to also note that I found that this only works by using trigger_touch or trigger_relay(maybe a few others). Trying to use call when an entity is killed doesn't seem to work, so beware of this. I am not entirely sure why though.</div>]]></body></post></posts></thread></xml>
