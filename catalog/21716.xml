<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="21716"><title>Problem with Q4 player model bones in Max - Can anyone help?</title><posts><post id="p201476" date="Posted: Tue Jul 08, 2008 7:27 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody">Hi everyone - haven't posted for a while, but as usual here I am again with a problem needs solving.<br /><br />I am trying to get a player model from Q4 to work properly in 3DSMax. I have successfully imported it using der_ton's simply excellent plugin (works with Max2009!). One thing I've noticed with many of these character models is that the arms never seem to work properly - there is something wrong with the bones. In this model, the problem is that the 'forarm' (that's how they are spelled) bones seem to distort the mesh incorrectly when moved. All other bones appear to work fine.<br /><br />I have attached an annotated screenshot of the model in the default pose after import (the arms look normal, with no distortion along the forearms) if this helps. I just wondered if anyone else using the Q4 character models in Max has noticed the deformation in the arm joints? Any ideas how this can be fixed? I think it's problem with bone linkage but I've very little idea how to properly fix it.<br /><br />I will zip up the model for anyone interested, with Max2009, who wants to take a closer look - just give me shout and address to send it.<br /><br />Any help from you good folk very gratefully acknowledged - even if you don't have a solution, suggestions welcome.<br /><br />- Dogstar<br /><br /><a href="https://web.archive.org/web/20081203103351/http://good-times.webshots.com/photo/2965566400100602689yuYmbs" class="postlink"><img src="https://web.archive.org/web/20081203103351im_/http://thumb9.webshots.net/t/50/650/5/66/40/2965566400100602689yuYmbs_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201485" date="Posted: Wed Jul 09, 2008 12:24 am "><author>LDAsh</author><body><![CDATA[<div class="postbody">Have been over this unresolved issue before in other threads and it boiled down to an incompatibility with the importer, something is different about the elbow and wrist bones in Q4 compared to Doom3, that the importer doesn't like.<br />Compare - <a href="https://web.archive.org/web/20081203103351/http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi" class="postlink">http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi</a><br />I never got around to figuring out how to fix it so that a simple script may be written to orientate that stuff back how it should be, I'm sure that would be possible, since if it fixes the problem with one model it should fix them all.<br />Nothing to do with any problems with the exporter though, as far as I can tell.</div>]]></body></post><post id="p201508" date="Posted: Wed Jul 09, 2008 7:24 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Damn. I feared that would be one of the most likely answers. So it IS a prolem specificaly identified with the importer? <img src="https://web.archive.org/web/20081203103351im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />If anyone has ANY idea how I could 'fix' these bones I'd be willing to give it a try...</div>]]></body></post><post id="p201519" date="Posted: Wed Jul 09, 2008 11:21 am "><author>mth</author><body><![CDATA[<div class="postbody">strange. in max 5 and 6, after importing npc meshes (i didn't try mp player models) everything works perfectly.</div>]]></body></post><post id="p201531" date="Posted: Wed Jul 09, 2008 2:10 pm "><author>mavrik65</author><body><![CDATA[<div class="postbody">Try gmax. It's a brilliant and free animating/modelling package, with md5 exporter and importer plugins it's well worth downloading.</div>]]></body></post><post id="p201542" date="Posted: Wed Jul 09, 2008 3:49 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">I'm not sure if I really understood the problem, but could it be that those bones are never moved in the game's animations? That way there wouldn't be a visible problem, whatever awkward influences on the mesh they have.</div>]]></body></post><post id="p201593" date="Posted: Thu Jul 10, 2008 8:41 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Okay, small update - located a tiny bone object in each arm called 'elbo_l' and 'elbo_r'. These appear to pivot the arm meshes correctly without any deformation. The 'forarm' bones appear to do nothing, but I'm sure the mo-cap files use them in some way.<br /><br />Anyway, just a quick question for Der-ton or anyone else familiar with his plugin md5 importer for Max:<br /><br />should I always tick the 'reorient bones' box when importing Q4 meshes into Max? The bones do re-orient and everything looks orderly and seems to work fine in the rigged character models.<br /><br />Just wondered what your comment might be on that - as I notice the box is not ticked by default. What's the reason for this?</div>]]></body></post><post id="p201594" date="Posted: Thu Jul 10, 2008 8:56 am "><author>der_ton</author><body><![CDATA[<div class="postbody">The importer's readme has a note on that option. To summarize, it simply depends on wether you want your new creation (mesh or anim) after export to have a compatible skeleton for use with the one you imported.<br />The reason for that is, if you enable "reorient bones", the bones look nicer in max but are not the same anymore as the original skeleton.<br />There is a way to work with the bones in max that Obihb came up with: <br /><!-- l --><a class="postlink-local" href="https://web.archive.org/web/20081203103351/http://www.doom3world.org/phpbb2/viewtopic.php?f=3&amp;t=9588">viewtopic.php?f=3&amp;t=9588</a><!-- l --></div>]]></body></post><post id="p201623" date="Posted: Thu Jul 10, 2008 5:11 pm "><author>LDAsh</author><body><![CDATA[<div class="postbody">Might it have something to do with how the MD5s were originally exported?<br />If you import Doom3 models they are in a relaxed normal pose (like AF pose but relaxed), but Q4s are in a gun-ready pose, as if part of an existing animation.  There are probably technical reasons for the difference, and they are affecting how they get imported, possibly?  I think this because if you have a real close look at how the forearms get deformed (use its af_pose.md5anim), the right arm seems worse than the left.  When you see it in the gun-ready pose (initial import, no anims), the right is more affected than the left, holding the gun.  Also, the elbows are the major differences, while also the upper torso and shoulders are different but this isn't quite as noticeable when static, yet if you see bad exports animating in-game, you will notice lesser errors in the upper torso and shoulders, lesser but still there, but almost everything below the waist seems just fine, possibly because those initial poses are very similar in everything except the elbows and forearms, and lesser in the upper torso and shoulders.  That all makes sense to me, I think.<br />I wouldn't want to imply the importer should be rewritten just for the hard Q4 MD5mesh poses, but perhaps some universal fix-it script could be used after importing?  If my little perceptions are true, hopefully it'd give a clue on how exactly it can be fixed.  It's a little out of my league unfortunately.</div>]]></body></post><post id="p201734" date="Posted: Sat Jul 12, 2008 9:06 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Help me, Der_ton... you are my only hope... <img src="https://web.archive.org/web/20081203103351im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />I've tried everything. I loaded in meshes with reorient bones on and off. If 'off' (defalt) what happens is what you see in the attached screenshot, if 'on' the animations distort other parts of the mesh when applied. I've looked at the game running - even on the 360 version, with close examination in-game, I notice some unusual arm distortions which makes me think there was perhaps a problem right from the start with the way the modellers set up the bones for the arms... in the end I just don't know.<br /><br />Is there any way I can plead with you to have a look at the issue? I know you probably don't care any longer to return to a plugin only a few of us are bothering with any more, but you understand this stuff, you might find an answer...<br /><br />I'm at my wits end with this.<br /><br /><a href="https://web.archive.org/web/20081203103351/http://good-times.webshots.com/photo/2194136250100602689FpBroj" class="postlink"><img src="https://web.archive.org/web/20081203103351im_/http://thumb9.webshots.net/t/24/665/1/36/25/2194136250100602689FpBroj_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201754" date="Posted: Sat Jul 12, 2008 3:56 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103351im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br />If that's how the vanilla mesh deforms ingame then there is nothing wrong with the importer, in fact if these deformations carry over into 3dsmax exactly as they are ingame, then that means the importer is working perfectly BECAUSE the results are true to the ingame appearance, whatever strange appearance that might be.<br />Which md5mesh (and anim, if any is applied) is that in your screenshot? I'd like to take a look at it myself to really be sure about this.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">if 'on' the animations distort other parts of the mesh when applied</div><br />Using "reorient bones" on the mesh import (changing the skeleton) and then importing an animation (one that was supposed to animate the original skeleton) will naturally give wrong reults, as I explained above.<br />The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.<br /><br />LDAsh, I also think that somehow Raven's 3dsmax exporter might have messed up the vertex weighting, maybe it was irritated by those additional bones in those areas and didn't extract the weights properly.</div>]]></body></post><post id="p201758" date="Posted: Sat Jul 12, 2008 5:03 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody"><div class="quotetitle">der_ton wrote:</div><div class="quotecontent">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103351im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div><br /><br />I said there was some distortion in the actual game, but nowhere near as bad as shown in my screen from within Max8 - sorry I didn't make that clear. I do think the arm bones for the human models in Q4 have been set up oddly. A tiny elbow pivot actually controls the bend of the arm (properly, without deformation), but the two other bone objects present seem to offer no use, whatsoever.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.</div><br /><br />And when used that way the meshes are perfect, there is no deformation. I just can't use the great mo-cap files for the models, which sort of puts a damper on things. Keyframing by hand is a bugger and takes forever...<br /><br />Never mind, though. Thank you for a great plugin which I still use daily - it's fantastic little script I couldn't live without.</div>]]></body></post><post id="p201476" date="Posted: Tue Jul 08, 2008 7:27 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody">Hi everyone - haven't posted for a while, but as usual here I am again with a problem needs solving.<br /><br />I am trying to get a player model from Q4 to work properly in 3DSMax. I have successfully imported it using der_ton's simply excellent plugin (works with Max2009!). One thing I've noticed with many of these character models is that the arms never seem to work properly - there is something wrong with the bones. In this model, the problem is that the 'forarm' (that's how they are spelled) bones seem to distort the mesh incorrectly when moved. All other bones appear to work fine.<br /><br />I have attached an annotated screenshot of the model in the default pose after import (the arms look normal, with no distortion along the forearms) if this helps. I just wondered if anyone else using the Q4 character models in Max has noticed the deformation in the arm joints? Any ideas how this can be fixed? I think it's problem with bone linkage but I've very little idea how to properly fix it.<br /><br />I will zip up the model for anyone interested, with Max2009, who wants to take a closer look - just give me shout and address to send it.<br /><br />Any help from you good folk very gratefully acknowledged - even if you don't have a solution, suggestions welcome.<br /><br />- Dogstar<br /><br /><a href="https://web.archive.org/web/20081203103543/http://good-times.webshots.com/photo/2965566400100602689yuYmbs" class="postlink"><img src="https://web.archive.org/web/20081203103543im_/http://thumb9.webshots.net/t/50/650/5/66/40/2965566400100602689yuYmbs_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201485" date="Posted: Wed Jul 09, 2008 12:24 am "><author>LDAsh</author><body><![CDATA[<div class="postbody">Have been over this unresolved issue before in other threads and it boiled down to an incompatibility with the importer, something is different about the elbow and wrist bones in Q4 compared to Doom3, that the importer doesn't like.<br />Compare - <a href="https://web.archive.org/web/20081203103543/http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi" class="postlink">http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi</a><br />I never got around to figuring out how to fix it so that a simple script may be written to orientate that stuff back how it should be, I'm sure that would be possible, since if it fixes the problem with one model it should fix them all.<br />Nothing to do with any problems with the exporter though, as far as I can tell.</div>]]></body></post><post id="p201508" date="Posted: Wed Jul 09, 2008 7:24 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Damn. I feared that would be one of the most likely answers. So it IS a prolem specificaly identified with the importer? <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />If anyone has ANY idea how I could 'fix' these bones I'd be willing to give it a try...</div>]]></body></post><post id="p201519" date="Posted: Wed Jul 09, 2008 11:21 am "><author>mth</author><body><![CDATA[<div class="postbody">strange. in max 5 and 6, after importing npc meshes (i didn't try mp player models) everything works perfectly.</div>]]></body></post><post id="p201531" date="Posted: Wed Jul 09, 2008 2:10 pm "><author>mavrik65</author><body><![CDATA[<div class="postbody">Try gmax. It's a brilliant and free animating/modelling package, with md5 exporter and importer plugins it's well worth downloading.</div>]]></body></post><post id="p201542" date="Posted: Wed Jul 09, 2008 3:49 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">I'm not sure if I really understood the problem, but could it be that those bones are never moved in the game's animations? That way there wouldn't be a visible problem, whatever awkward influences on the mesh they have.</div>]]></body></post><post id="p201593" date="Posted: Thu Jul 10, 2008 8:41 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Okay, small update - located a tiny bone object in each arm called 'elbo_l' and 'elbo_r'. These appear to pivot the arm meshes correctly without any deformation. The 'forarm' bones appear to do nothing, but I'm sure the mo-cap files use them in some way.<br /><br />Anyway, just a quick question for Der-ton or anyone else familiar with his plugin md5 importer for Max:<br /><br />should I always tick the 'reorient bones' box when importing Q4 meshes into Max? The bones do re-orient and everything looks orderly and seems to work fine in the rigged character models.<br /><br />Just wondered what your comment might be on that - as I notice the box is not ticked by default. What's the reason for this?</div>]]></body></post><post id="p201594" date="Posted: Thu Jul 10, 2008 8:56 am "><author>der_ton</author><body><![CDATA[<div class="postbody">The importer's readme has a note on that option. To summarize, it simply depends on wether you want your new creation (mesh or anim) after export to have a compatible skeleton for use with the one you imported.<br />The reason for that is, if you enable "reorient bones", the bones look nicer in max but are not the same anymore as the original skeleton.<br />There is a way to work with the bones in max that Obihb came up with: <br /><!-- l --><a class="postlink-local" href="https://web.archive.org/web/20081203103543/http://www.doom3world.org/phpbb2/viewtopic.php?f=3&amp;t=9588">viewtopic.php?f=3&amp;t=9588</a><!-- l --></div>]]></body></post><post id="p201623" date="Posted: Thu Jul 10, 2008 5:11 pm "><author>LDAsh</author><body><![CDATA[<div class="postbody">Might it have something to do with how the MD5s were originally exported?<br />If you import Doom3 models they are in a relaxed normal pose (like AF pose but relaxed), but Q4s are in a gun-ready pose, as if part of an existing animation.  There are probably technical reasons for the difference, and they are affecting how they get imported, possibly?  I think this because if you have a real close look at how the forearms get deformed (use its af_pose.md5anim), the right arm seems worse than the left.  When you see it in the gun-ready pose (initial import, no anims), the right is more affected than the left, holding the gun.  Also, the elbows are the major differences, while also the upper torso and shoulders are different but this isn't quite as noticeable when static, yet if you see bad exports animating in-game, you will notice lesser errors in the upper torso and shoulders, lesser but still there, but almost everything below the waist seems just fine, possibly because those initial poses are very similar in everything except the elbows and forearms, and lesser in the upper torso and shoulders.  That all makes sense to me, I think.<br />I wouldn't want to imply the importer should be rewritten just for the hard Q4 MD5mesh poses, but perhaps some universal fix-it script could be used after importing?  If my little perceptions are true, hopefully it'd give a clue on how exactly it can be fixed.  It's a little out of my league unfortunately.</div>]]></body></post><post id="p201734" date="Posted: Sat Jul 12, 2008 9:06 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Help me, Der_ton... you are my only hope... <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />I've tried everything. I loaded in meshes with reorient bones on and off. If 'off' (defalt) what happens is what you see in the attached screenshot, if 'on' the animations distort other parts of the mesh when applied. I've looked at the game running - even on the 360 version, with close examination in-game, I notice some unusual arm distortions which makes me think there was perhaps a problem right from the start with the way the modellers set up the bones for the arms... in the end I just don't know.<br /><br />Is there any way I can plead with you to have a look at the issue? I know you probably don't care any longer to return to a plugin only a few of us are bothering with any more, but you understand this stuff, you might find an answer...<br /><br />I'm at my wits end with this.<br /><br /><a href="https://web.archive.org/web/20081203103543/http://good-times.webshots.com/photo/2194136250100602689FpBroj" class="postlink"><img src="https://web.archive.org/web/20081203103543im_/http://thumb9.webshots.net/t/24/665/1/36/25/2194136250100602689FpBroj_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201754" date="Posted: Sat Jul 12, 2008 3:56 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br />If that's how the vanilla mesh deforms ingame then there is nothing wrong with the importer, in fact if these deformations carry over into 3dsmax exactly as they are ingame, then that means the importer is working perfectly BECAUSE the results are true to the ingame appearance, whatever strange appearance that might be.<br />Which md5mesh (and anim, if any is applied) is that in your screenshot? I'd like to take a look at it myself to really be sure about this.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">if 'on' the animations distort other parts of the mesh when applied</div><br />Using "reorient bones" on the mesh import (changing the skeleton) and then importing an animation (one that was supposed to animate the original skeleton) will naturally give wrong reults, as I explained above.<br />The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.<br /><br />LDAsh, I also think that somehow Raven's 3dsmax exporter might have messed up the vertex weighting, maybe it was irritated by those additional bones in those areas and didn't extract the weights properly.</div>]]></body></post><post id="p201758" date="Posted: Sat Jul 12, 2008 5:03 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody"><div class="quotetitle">der_ton wrote:</div><div class="quotecontent">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div><br /><br />I said there was some distortion in the actual game, but nowhere near as bad as shown in my screen from within Max8 - sorry I didn't make that clear. I do think the arm bones for the human models in Q4 have been set up oddly. A tiny elbow pivot actually controls the bend of the arm (properly, without deformation), but the two other bone objects present seem to offer no use, whatsoever.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.</div><br /><br />And when used that way the meshes are perfect, there is no deformation. I just can't use the great mo-cap files for the models, which sort of puts a damper on things. Keyframing by hand is a bugger and takes forever...<br /><br />Never mind, though. Thank you for a great plugin which I still use daily - it's fantastic little script I couldn't live without.</div>]]></body></post><post id="p201476" date="Posted: Tue Jul 08, 2008 7:27 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody">Hi everyone - haven't posted for a while, but as usual here I am again with a problem needs solving.<br /><br />I am trying to get a player model from Q4 to work properly in 3DSMax. I have successfully imported it using der_ton's simply excellent plugin (works with Max2009!). One thing I've noticed with many of these character models is that the arms never seem to work properly - there is something wrong with the bones. In this model, the problem is that the 'forarm' (that's how they are spelled) bones seem to distort the mesh incorrectly when moved. All other bones appear to work fine.<br /><br />I have attached an annotated screenshot of the model in the default pose after import (the arms look normal, with no distortion along the forearms) if this helps. I just wondered if anyone else using the Q4 character models in Max has noticed the deformation in the arm joints? Any ideas how this can be fixed? I think it's problem with bone linkage but I've very little idea how to properly fix it.<br /><br />I will zip up the model for anyone interested, with Max2009, who wants to take a closer look - just give me shout and address to send it.<br /><br />Any help from you good folk very gratefully acknowledged - even if you don't have a solution, suggestions welcome.<br /><br />- Dogstar<br /><br /><a href="https://web.archive.org/web/20081203103543/http://good-times.webshots.com/photo/2965566400100602689yuYmbs" class="postlink"><img src="https://web.archive.org/web/20081203103543im_/http://thumb9.webshots.net/t/50/650/5/66/40/2965566400100602689yuYmbs_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201485" date="Posted: Wed Jul 09, 2008 12:24 am "><author>LDAsh</author><body><![CDATA[<div class="postbody">Have been over this unresolved issue before in other threads and it boiled down to an incompatibility with the importer, something is different about the elbow and wrist bones in Q4 compared to Doom3, that the importer doesn't like.<br />Compare - <a href="https://web.archive.org/web/20081203103543/http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi" class="postlink">http://www.violationentertainment.com/temp/Q4&amp;D3elbowrigs.avi</a><br />I never got around to figuring out how to fix it so that a simple script may be written to orientate that stuff back how it should be, I'm sure that would be possible, since if it fixes the problem with one model it should fix them all.<br />Nothing to do with any problems with the exporter though, as far as I can tell.</div>]]></body></post><post id="p201508" date="Posted: Wed Jul 09, 2008 7:24 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Damn. I feared that would be one of the most likely answers. So it IS a prolem specificaly identified with the importer? <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />If anyone has ANY idea how I could 'fix' these bones I'd be willing to give it a try...</div>]]></body></post><post id="p201519" date="Posted: Wed Jul 09, 2008 11:21 am "><author>mth</author><body><![CDATA[<div class="postbody">strange. in max 5 and 6, after importing npc meshes (i didn't try mp player models) everything works perfectly.</div>]]></body></post><post id="p201531" date="Posted: Wed Jul 09, 2008 2:10 pm "><author>mavrik65</author><body><![CDATA[<div class="postbody">Try gmax. It's a brilliant and free animating/modelling package, with md5 exporter and importer plugins it's well worth downloading.</div>]]></body></post><post id="p201542" date="Posted: Wed Jul 09, 2008 3:49 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">I'm not sure if I really understood the problem, but could it be that those bones are never moved in the game's animations? That way there wouldn't be a visible problem, whatever awkward influences on the mesh they have.</div>]]></body></post><post id="p201593" date="Posted: Thu Jul 10, 2008 8:41 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Okay, small update - located a tiny bone object in each arm called 'elbo_l' and 'elbo_r'. These appear to pivot the arm meshes correctly without any deformation. The 'forarm' bones appear to do nothing, but I'm sure the mo-cap files use them in some way.<br /><br />Anyway, just a quick question for Der-ton or anyone else familiar with his plugin md5 importer for Max:<br /><br />should I always tick the 'reorient bones' box when importing Q4 meshes into Max? The bones do re-orient and everything looks orderly and seems to work fine in the rigged character models.<br /><br />Just wondered what your comment might be on that - as I notice the box is not ticked by default. What's the reason for this?</div>]]></body></post><post id="p201594" date="Posted: Thu Jul 10, 2008 8:56 am "><author>der_ton</author><body><![CDATA[<div class="postbody">The importer's readme has a note on that option. To summarize, it simply depends on wether you want your new creation (mesh or anim) after export to have a compatible skeleton for use with the one you imported.<br />The reason for that is, if you enable "reorient bones", the bones look nicer in max but are not the same anymore as the original skeleton.<br />There is a way to work with the bones in max that Obihb came up with: <br /><!-- l --><a class="postlink-local" href="https://web.archive.org/web/20081203103543/http://www.doom3world.org/phpbb2/viewtopic.php?f=3&amp;t=9588">viewtopic.php?f=3&amp;t=9588</a><!-- l --></div>]]></body></post><post id="p201623" date="Posted: Thu Jul 10, 2008 5:11 pm "><author>LDAsh</author><body><![CDATA[<div class="postbody">Might it have something to do with how the MD5s were originally exported?<br />If you import Doom3 models they are in a relaxed normal pose (like AF pose but relaxed), but Q4s are in a gun-ready pose, as if part of an existing animation.  There are probably technical reasons for the difference, and they are affecting how they get imported, possibly?  I think this because if you have a real close look at how the forearms get deformed (use its af_pose.md5anim), the right arm seems worse than the left.  When you see it in the gun-ready pose (initial import, no anims), the right is more affected than the left, holding the gun.  Also, the elbows are the major differences, while also the upper torso and shoulders are different but this isn't quite as noticeable when static, yet if you see bad exports animating in-game, you will notice lesser errors in the upper torso and shoulders, lesser but still there, but almost everything below the waist seems just fine, possibly because those initial poses are very similar in everything except the elbows and forearms, and lesser in the upper torso and shoulders.  That all makes sense to me, I think.<br />I wouldn't want to imply the importer should be rewritten just for the hard Q4 MD5mesh poses, but perhaps some universal fix-it script could be used after importing?  If my little perceptions are true, hopefully it'd give a clue on how exactly it can be fixed.  It's a little out of my league unfortunately.</div>]]></body></post><post id="p201734" date="Posted: Sat Jul 12, 2008 9:06 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Help me, Der_ton... you are my only hope... <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cry.gif" alt=":cry:" title="Crying or Very sad" /><br /><br />I've tried everything. I loaded in meshes with reorient bones on and off. If 'off' (defalt) what happens is what you see in the attached screenshot, if 'on' the animations distort other parts of the mesh when applied. I've looked at the game running - even on the 360 version, with close examination in-game, I notice some unusual arm distortions which makes me think there was perhaps a problem right from the start with the way the modellers set up the bones for the arms... in the end I just don't know.<br /><br />Is there any way I can plead with you to have a look at the issue? I know you probably don't care any longer to return to a plugin only a few of us are bothering with any more, but you understand this stuff, you might find an answer...<br /><br />I'm at my wits end with this.<br /><br /><a href="https://web.archive.org/web/20081203103543/http://good-times.webshots.com/photo/2194136250100602689FpBroj" class="postlink"><img src="https://web.archive.org/web/20081203103543im_/http://thumb9.webshots.net/t/24/665/1/36/25/2194136250100602689FpBroj_th.jpg" alt="Image" /></a></div>]]></body></post><post id="p201754" date="Posted: Sat Jul 12, 2008 3:56 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /><br />If that's how the vanilla mesh deforms ingame then there is nothing wrong with the importer, in fact if these deformations carry over into 3dsmax exactly as they are ingame, then that means the importer is working perfectly BECAUSE the results are true to the ingame appearance, whatever strange appearance that might be.<br />Which md5mesh (and anim, if any is applied) is that in your screenshot? I'd like to take a look at it myself to really be sure about this.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">if 'on' the animations distort other parts of the mesh when applied</div><br />Using "reorient bones" on the mesh import (changing the skeleton) and then importing an animation (one that was supposed to animate the original skeleton) will naturally give wrong reults, as I explained above.<br />The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.<br /><br />LDAsh, I also think that somehow Raven's 3dsmax exporter might have messed up the vertex weighting, maybe it was irritated by those additional bones in those areas and didn't extract the weights properly.</div>]]></body></post><post id="p201758" date="Posted: Sat Jul 12, 2008 5:03 pm "><author>Dogstar</author><body><![CDATA[<div class="postbody"><div class="quotetitle">der_ton wrote:</div><div class="quotecontent">You want me to fix bad vertex-weighting in the vanilla game?  <img src="https://web.archive.org/web/20081203103543im_/http://www.doom3world.org/phpbb2/images/smilies/icon_lol.gif" alt=":lol:" title="Laughing" /></div><br /><br />I said there was some distortion in the actual game, but nowhere near as bad as shown in my screen from within Max8 - sorry I didn't make that clear. I do think the arm bones for the human models in Q4 have been set up oddly. A tiny elbow pivot actually controls the bend of the arm (properly, without deformation), but the two other bone objects present seem to offer no use, whatsoever.<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">The default state for that "reorient bones" checkbox in the gui is "off" because it shouldn't be on, except when you're really sure you don't want to use those reoriented skeletons with their original animations.</div><br /><br />And when used that way the meshes are perfect, there is no deformation. I just can't use the great mo-cap files for the models, which sort of puts a damper on things. Keyframing by hand is a bugger and takes forever...<br /><br />Never mind, though. Thank you for a great plugin which I still use daily - it's fantastic little script I couldn't live without.</div>]]></body></post></posts></thread></xml>
