<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="20217"><title>Quake 4 and trees. : \</title><posts><post id="p185006" date="Posted: Thu Aug 02, 2007 1:20 pm "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">I've been tasked with creating a bunch of trees for Quake 4, and for the most part, that's easy enough. The actual wood won't be too hard to create, but the leaves are becoming a pain.<br /><a href="https://web.archive.org/web/20070509181516/http://img378.imageshack.us/my.php?image=bigtreejy5.jpg" class="postlink"><img src="https://web.archive.org/web/20070509181516im_/http://img378.imageshack.us/img378/8940/bigtreejy5.th.jpg" alt="Image" /></a><br /><br />What I want to do here, is take what I have in that image, and with this material:<br />textures/tree/leaves<br />{     <br />	noshadows<br />	twosided<br />	{<br />		blend		diffusemap<br />		map		textures/tree/leaves_d.tga<br />		alphatest		.75<br />	}<br /><br />}<br /><br />And implement some lines that would make the leaves 75 percent opaque,  <span style="font-style: italic">and</span> deform with turbulance. Sounds easy enough, <span style="font-style: italic">but</span>, with alphatest, the "deform turbulant" keyword only affects the alpha layer, for some horrible reason. Parts of the meshes that should be invisible become white, and the green, visible parts of the leaves become invisible as the alpha moves around. Now, with regular alpha, I turbulant works fine and the leaves become opaque, <span style="font-style: italic">but</span> the leaves can't be lit, which looks pretty terrible, considering that Quake 4 is very heavy on lighting. That's also the same reason I can't use sprites, or a bunch of different planes that criss cross.<br /><br />Now, does anyone know any keywords that could help me achieve this effect? Or does anyone one have a tried and true method to building trees better, stronger, and...faster?(?)<br /><br />I really do appreciate any kind of help. &lt;3</div>]]></body></post><post id="p185011" date="Posted: Thu Aug 02, 2007 2:21 pm "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">sadly, not much you can do.  your best bet for moving leaves/branches is to use an animated model.  <br /><br />Also, you'll find you have an issue with lighting the leaves.  When using a light source, the leaves will be lit from that direction.  Won't look good.  Some leaves will be black.<br /><br />I recommend making the leaves a certain spectrum in the material file &amp; use a special light on that spectrum to light the leaves with an ambient light.  You'll notice, in the day time, forests are general a single light level with exceptions where the light gets through the trees.</div>]]></body></post><post id="p185014" date="Posted: Thu Aug 02, 2007 2:48 pm "><author>parsonsbear</author><body><![CDATA[<div class="postbody">use a solid diffuse channel and keep using the deform turbulent w/ alphatest. or better yet, drop def turbulent and translate it around with a sin table or something along those lines. It'd prevent you from putting the branches in the same texture though.<br /><br />the spectrum ambient is a great idea, that keyword doesn't get used nearly as much as it should, considering how useful light linking is in renderers w/ limited shading capabilities. It's probably broken in some annoying way...</div>]]></body></post><post id="p185410" date="Posted: Mon Aug 06, 2007 6:16 am "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">So, uhhh... how do I use this spectrum keyword? I mean, I read the modwiki page on it, but I never created a light shader. D:</div>]]></body></post><post id="p185411" date="Posted: Mon Aug 06, 2007 6:23 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">They are created the same way material shaders are created. In fact, the only difference between light shaders and material shaders is the naming convention.<br /><br />For instance, if you preface the name of your shader with "light/" it will show up in the light inspector.</div>]]></body></post><post id="p185446" date="Posted: Mon Aug 06, 2007 2:32 pm "><author>The Happy Friar</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Super Happy Cow wrote:</div><div class="quotecontent">So, uhhh... how do I use this spectrum keyword? I mean, I read the modwiki page on it, but I never created a light shader. D:</div><br /><br />you need a texture with the spectrum keyword &amp; a number:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/thf/war_baby/nature/ivy02<br />{<br />   twoSided<br />   nonsolid<br />   spectrum 7<br />   qer_editorimage textures/thf/nature/ivy02.tga<br />   {<br />      blend diffusemap<br />      map    textures/thf/nature/ivy02.tga<br />      alphatest .5<br />   }<br /><br />}</div><br /><br />Then you need the light to affect it:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lights/ambientLight_fast_falloff_1_spectrum_7<br />{<br />   ambientLight<br />   spectrum 7<br />   lightFalloffImage   makeIntensity( textures/thf/ambient/fast_falloff_1.tga )<br />   {<br />      map textures/thf/ambient/fast_falloff_1.tga<br />      colored<br />      zeroClamp<br />   }<br />}</div><br /><br />as long as the #'s are the same the light affects only that texture!  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />  (i may make maps that rank 10 on the crap-o-meter but i learn a lot from them!  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /> )</div>]]></body></post></posts></thread></xml>
