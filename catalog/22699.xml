<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="22699"><title>DoF + Motion Blur + Glow! (Downloads)</title><posts><post id="p213359" date="Posted: Fri Apr 03, 2009 10:42 pm "><author>6th Venom</author><body><![CDATA[<div class="postbody"><span style="font-weight: bold">Pictures:</span>  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><a href="https://web.archive.org/web/20101224124402/http://img238.imageshack.us/my.php?image=shot00006t.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img238.imageshack.us/img238/1/shot00006t.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img23.imageshack.us/my.php?image=shot00007z.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img23.imageshack.us/img23/2678/shot00007z.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img26.imageshack.us/my.php?image=shot00008h.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img26.imageshack.us/img26/1751/shot00008h.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img23.imageshack.us/my.php?image=shot00010q.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img23.imageshack.us/img23/2992/shot00010q.th.jpg" alt="Image" /></a><br /><span style="font-size: 75%; line-height: normal"><span style="font-weight: bold">!THOSE PICTURES ARE FROM AN EARLIEST VERSION!</span></span><br /><br /><span style="font-weight: bold">Description:</span><br />An advanced adaptative Depth of Field effect. It calculate the near &amp; far distance by tracing from the player eyes position to forward at 2048 units maximum.<br /><br /><span style="font-weight: bold">Technical:</span> (EDITED)<br />This effect is made by combining coding &amp; shaders. in order, i inject my code in the singleview() thread (i work on the DentonmodV2 sdk), i apply a globalmaterial on a new renderscene (hackedView2), this material reference to a VFP that write the fragment depth as a black(0) to white(1) value. the shader inverse the 0 to 0.5 range into 1 to 0.5.<br />Then i substract 1.0, add the trace value (0 to 1), and mutliply by 2, so everything further &amp; nearer than the trace colision is white to black like this:<br /><a href="https://web.archive.org/web/20101224124402/http://img22.imageshack.us/my.php?image=shot00001onu.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img22.imageshack.us/img22/9926/shot00001onu.th.jpg" alt="Image" /></a><br />Then i capture the screen to _depthOfField, then use it with _renderView to calculate the bluriness. I also have some functions going on to remove unwanted models from my hackedView2.<br /><br /><span style="font-weight: bold">Issues:</span><br />Yes, there is always downsides. here the main one is that the depth is not fragment/pixel calculated, cause i never succeed to capture _renderView fragment depth (is it even possible?!?), but it's a surface depth calculated.<br />That's mean that there is no transparency. i removed all particles in my special renderview aswell as unwanted models and smoke particle to limit the bug. then every glasses stop the depth visibility too. i didn't find any workaround for that one.<br /><br /><br />I'm really proud of it, but i had modified so much things in the code for this and other things (for personnal project/tests) that i cannot give the code without heavily restore things, or copy the code to a new &amp; fresh SDK.<br /><br />That's why i give the general idea about setting it rather than a code, but i'll give it when i'll release my project. (not really near) &amp; i'm actually working on a dynamic directionnal motion blur.<br />Hope you like what you see. <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /><br /><br /><br /><span style="font-size: 150%; line-height: normal"><span style="text-decoration: underline"><span style="font-style: italic"><span style="font-weight: bold">EDIT</span></span>: 12 April 2009.</span></span><br />A quick note about a futur release of a pack i'm working on. (followed by a clean code release)<br /><a href="https://web.archive.org/web/20101224124402/http://img27.imageshack.us/my.php?image=shot00001plu.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img27.imageshack.us/img27/1723/shot00001plu.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img237.imageshack.us/my.php?image=shot00002n.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img237.imageshack.us/img237/4540/shot00002n.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img12.imageshack.us/my.php?image=shot00005trx.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img12.imageshack.us/img12/2261/shot00005trx.th.jpg" alt="Image" /></a><a href="https://web.archive.org/web/20101224124402/http://img4.imageshack.us/my.php?image=shot00006wfu.jpg" class="postlink"><img src="https://web.archive.org/web/20101224124402im_/http://img4.imageshack.us/img4/803/shot00006wfu.th.jpg" alt="Image" /></a><br /><span style="font-size: 75%; line-height: normal"><span style="font-weight: bold">!PICTURES FROM THE ACTUAL VERSION!</span></span><br /><br />This pack will contain some VFPs, materials and an updated DentonModV2 DLL that will bring to DoomIII new improvements like an Adaptative Depth of Field (DoF), a Motion Blur (based on mouse+key moves, but also on animated things on screen), and finally, a Glow implementation like <a href="https://web.archive.org/web/20101224124402/http://www.visualwalkthroughs.com/prey/hiddenagenda/6.jpg" class="postlink">this one</a>. (i'll post screens on release)<br /><br />r_DepthOfField &amp; r_motionBlur will work with the vanilla game maps, but r_glow will need special materials settings, so until someone convert/rework all vanilla materials, Glow will only be usable for (futur) mods and will be turned off but availlable. (a demo map will be in the pack to still demonstrate all effects combined together.)<br /><br />Each effect is in alpha stages, and they eat ressources, but i still play at 60fps in ultra 80% of the time in the DoomIII campaign on my old comp: Dual Core 3800, 2gb ram, and a Geforce 9800 GTX+. I didn't test on any other comp.<br /><br />Stay tuned!  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br /><span style="font-size: 150%; line-height: normal"><span style="text-decoration: underline"><span style="font-style: italic"><span style="font-weight: bold">EDIT</span></span>: 19 April 2009.</span></span><br />Finally, it's time for you all to get you hands on the alpha release of this little baby, codename: <span style="color: #008080"><span style="font-weight: bold"><span style="font-style: italic">idTech4 Extended</span></span></span><br />Here come a zip that 'only' contain a DLL, a map to test all the features: showcase.map, and a DentonModV2 vital pack (def files, etc.), as my work is build upon Denton's source.<br /><br />You can grab it on <a href="https://web.archive.org/web/20101224124402/http://www.filefront.com/14416023/idTech4EX.rar/" class="postlink"><span style="font-weight: bold">FILEFRONT</span></a>!<br /><span style="font-size: 85%; line-height: normal"><span style="font-style: italic">(28/08/09 : LINK UPDATED)</span></span><br /><br />In its current state (alpha), you can't enable the Glow with unmodified materials, so you can't play SP or MP common maps without rewriting all materials. you can't really use all weapons with depth of field enabled, because it's based on surface depth, and some weapons use to toggle muzzlefalsh sprites visible/invisible (try the bazooka to understand what i mean).<br /><br />Read the readme for more general infos, and dig into files for technicals.<br /><br />The source will come really soon, i promise!  <br />6th Venom. <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><br /><br />PS: Sorry to release it so late, i worked (irl job) all the weekend.  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_neutral.gif" alt=":|" title="Neutral" /><br /><br /><span style="font-size: 150%; line-height: normal"><span style="text-decoration: underline"><span style="font-style: italic"><span style="font-weight: bold">EDIT</span></span>: 21 April 2009.</span></span><br />Here come the source code from the alpha version, you must extract it over the DentonModV2.0 source code game folder to compile it.<br /><br /><a href="https://web.archive.org/web/20101224124402/http://files.filefront.com/13632429" class="postlink"><span style="font-weight: bold">idTech4 Extended [alpha] source code</span></a>,<br /><a href="https://web.archive.org/web/20101224124402/http://files.filefront.com/13632866" class="postlink">DentonModV2 source code</a>. (filefront links)<br /><br />Enjoy, 6th Venom.</div>]]></body></post><post id="p213361" date="Posted: Fri Apr 03, 2009 11:58 pm "><author>Jack Rammsdell</author><body><![CDATA[<div class="postbody"><div class="quotetitle">6th Venom wrote:</div><div class="quotecontent">!!! No source Downloadable !!!</div><br />!!!!!!<br /><br />I like what I see.</div>]]></body></post><post id="p213362" date="Posted: Sat Apr 04, 2009 12:49 am "><author>Sikkpin</author><body><![CDATA[<div class="postbody">Beautiful!! I'm so glad someone else has the motivation to do these types of post-processing effects as learning ARB assembly is somewhat difficult (though I'm slowly getting more and more comfortable with it). <br /><br />I understand by not releasing the code but would it be possible to check out your fragment code for getting the depth value to black/white?</div>]]></body></post><post id="p213363" date="Posted: Sat Apr 04, 2009 12:55 am "><author>parsonsbear</author><body><![CDATA[<div class="postbody">This is pretty awesome, bravo.<br /><br />I'm sure someone would have the motivation to put together a vanilla D3 version if you post the important bits.</div>]]></body></post><post id="p213368" date="Posted: Sat Apr 04, 2009 3:19 am "><author>ALien8ed</author><body><![CDATA[<div class="postbody">Damn that looks sweeeeet...  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br />Keep up the good work man.</div>]]></body></post><post id="p213384" date="Posted: Sat Apr 04, 2009 11:11 am "><author>rebb</author><body><![CDATA[<div class="postbody">Very cool <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />.<br /><br />How do you manage things like alphatested materials ?<br /><br />I've played around with the global material a good while ago but was disappointed that it couldn't replace just certain material elements like "diffuse rgb only".</div>]]></body></post><post id="p213385" date="Posted: Sat Apr 04, 2009 11:18 am "><author>6th Venom</author><body><![CDATA[<div class="postbody">See the first post, i added some infos.</div>]]></body></post><post id="p213392" date="Posted: Sat Apr 04, 2009 4:25 pm "><author>MBolus</author><body><![CDATA[<div class="postbody">6th, I don't know how much you're considering when you determine what range to keep focused, but I have a few suggestions that should help even more. <br /><br />If you're not already doing it, you should consider adapting or expanding the depth of unblurred field to include more potential enemies. For example, If an enemy is near the middle of a hallway, the above already works well. If another enemy comes around the corner, the range of focus could gradually expand or shift so that both enemies are reasonably focused. If you're firing at an enemy and / or they're firing at you, should consider making sure they're within reasonable focus. <br /><br />Hope these suggestions help with your results which already look good!</div>]]></body></post><post id="p213395" date="Posted: Sat Apr 04, 2009 5:16 pm "><author>6th Venom</author><body><![CDATA[<div class="postbody"><div class="quotetitle">rebb wrote:</div><div class="quotecontent">I've played around with the global material a good while ago but was disappointed that it couldn't replace just certain material elements like "diffuse rgb only".</div><br />I've found some interresting things in renderer\material.h like idMaterial : GetStage (get a specific stage), hasAlphaTest (shaderStage_t), and alphaTestRegister (shaderStage_t) but don't really know how i could use those without checking every single material in PVS at each frame...  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_eek.gif" alt=":shock:" title="Shocked" /><br /><br /><div class="quotetitle">MBolus wrote:</div><div class="quotecontent">Hope these suggestions help with your results which already look good!</div><br />Yep this is something i"m thinking about, even if i actually experiment dynamic &amp; adaptative motion blur more than i work on DoF. I already used to sent a FocusDistanceNear &amp; FocusDistanceFar to the shader so i think it's just a matter of doing a good "distanceto" with monsters in PVS. i'll seriously digg into that later...<br /><br />it's still a good point, thanks for the suggestions.</div>]]></body></post><post id="p213586" date="Posted: Mon Apr 13, 2009 8:07 am "><author>6th Venom</author><body><![CDATA[<div class="postbody">Edited the first post. <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p213592" date="Posted: Mon Apr 13, 2009 3:35 pm "><author>Phobos</author><body><![CDATA[<div class="postbody">Looks great. Finish soon  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p213770" date="Posted: Sun Apr 19, 2009 7:55 pm "><author>6th Venom</author><body><![CDATA[<div class="postbody"><span style="color: #FF0000">You can download an alpha version in the first post...</span>  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p213782" date="Posted: Mon Apr 20, 2009 5:33 am "><author>Phobos</author><body><![CDATA[<div class="postbody">Oh my. That's extreme. The motion blur isn't so much motion as a fading progressive after image that's blurred. Makes me feel very, very high. The adaptive depth of field is nice except for not being able to read ammo counters on the weapons when the focal point is too far away  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p213806" date="Posted: Mon Apr 20, 2009 10:43 pm "><author>6th Venom</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Phobos wrote:</div><div class="quotecontent">Oh my. That's extreme.</div> Is "extreme" bad or good?  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_surprised.gif" alt=":o" title="Surprised" /><br /><br /><div class="quotetitle">Phobos wrote:</div><div class="quotecontent">The motion blur isn't so much motion as a fading progressive after image that's blurred. Makes me feel very, very high.</div>I understand well, i struggled with another method a lot till ending with this balanced mix of hacks, but i already think about another appoach to test.<br /><br /><div class="quotetitle">Phobos wrote:</div><div class="quotecontent">The adaptive depth of field is nice except for not being able to read ammo counters on the weapons when the focal point is too far away  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>Yeah that's the primary wrong thing to deal with, simple answer should be to make the hud indicate ammos for ALL weapons, as it does for grenades and some others.<br /><br />Thank you for feedbacks.  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p213810" date="Posted: Tue Apr 21, 2009 12:42 am "><author>parsonsbear</author><body><![CDATA[<div class="postbody">Awesome- and frankly, if your ammo count is on the stock of your gun, you won't be able to see it while firing anyway. It's not a bug, it's 'survival horror'.</div>]]></body></post><post id="p213811" date="Posted: Tue Apr 21, 2009 12:59 am "><author>Neurological</author><body><![CDATA[<div class="postbody">Is like FEAR 2, but for me is too extreme in a bad way. It would be good to have the option to adjust the strenght if is possible. Love the glow.</div>]]></body></post><post id="p213825" date="Posted: Tue Apr 21, 2009 9:12 am "><author>6th Venom</author><body><![CDATA[<div class="postbody">It's really possible to create some new multiplicators Cvars for DoF, MotionBlur &amp; Glow. (just like how denton made it for bloom)<br />Then after, just make a new option in the mainmenu gui with a bar to choose from 0 to 1 or 2 for extreme effects.<br /><br />Like i said before, it's an alpha, plus it's more a "how to implement it into your futur mods" than a "it's done &amp; 100% compatible with vanilla game".<br /><br /><img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />EDIT: <span style="color: #00BF40">You can download the source from alpha version in the first post</span>  <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p213828" date="Posted: Tue Apr 21, 2009 10:29 am "><author>jorewe</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">you must extract it over the DentonModV2.0 source code game folder to compile it.</div><br /><br />sorry for possible noobishness, lack of searching etc.. <img src="https://web.archive.org/web/20101224124402im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br />where can I find/download the DentonModV2.0 source?<br /><br />best regards..</div>]]></body></post><post id="p213830" date="Posted: Tue Apr 21, 2009 12:02 pm "><author>6th Venom</author><body><![CDATA[<div class="postbody">I added the link into the first post too. ^^</div>]]></body></post><post id="p213832" date="Posted: Tue Apr 21, 2009 2:30 pm "><author>jorewe</author><body><![CDATA[<div class="postbody">Thanks a bunch, 6th Venom..</div>]]></body></post></posts></thread></xml>
