<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="3283"><title>Custom PDA Part 2: Security Clearance</title><posts><post id="p31066" date="Posted: Mon Aug 09, 2004 4:19 am "><author>lophyte</author><body><![CDATA[<div class="postbody">CUSTOM PDAS PART 2: SECURITY CLEARANCE DOORS
<br />By: lophyte &lt;lophyteNO@SPAMgmail.com&gt;
<br /><br /><br />This tutorial assumes that you've read BNA's <a href="https://web.archive.org/web/20100522170152/http://www.doom3world.org/phpbb2/viewtopic.php?p=29691#29691" class="postlink">Hallway and Door</a> tutorial, and <a href="https://web.archive.org/web/20100522170152/http://www.doom3world.org/phpbb2/viewtopic.php?t=3204" class="postlink">Custom PDAs part 1</a>. The map I used for this was actually BNA's tutorial map, so have that handy.
<br /><br /><br />1. SETTING UP THE PDA AND DOOR
<br /><br />Starting with that map, add two PDAs as detailed in part 1, with all of the same details. This time, in the custom PDA's entity properties, change "inv_name" to "Area2_PDA". Also, select the door, and in the entity properties, add key "locked" and value "2". Note the name key of the door -- it'll be something like func_door_1.
<br /><br /><img src="https://web.archive.org/web/20100522170152im_/http://lophyte.is-a-geek.org/doom3/pdatut/pdatut2-1.jpg" alt="Image" /><br /><br /><br />2. CREATING THE PANEL
<br /><br />Deselect the PDA. Now we're going to create the panel that you click on to check your security clearance. Right click on the grid, and go to func, then func_static. This will create a standard box brush. Go into the entity properties and click the "Model..." button which brings up the model window. Browse through the model tree to base/models/mapobjects/guiobjects/techdrpanel1/techdrpanel1.lwo and click OK.
<br /><br />A common bug in Radiant is that the shape of the entity on the grid doesn't change to the model when you select a new one. This can be fixed by cloning the entity with the spacebar, then deleting the old one. Now you have your panel -- rotate it and line it up against the wall. It should be about 64 units off the ground.
<br /><br />Now, back in the entity properties, click on the "Gui..." button and browse through the gui tree to base/guis/doors/pda_door.gui and click OK. This is the part where we add data to the panel. Clear the text in the Key textbox, and type "gui_parm1", then clear the text in the Val textbox, and type "Area 2". Whatever value you give gui_parm1 will show up on the panel as the area you're trying to access. The next few keys, gui_parm2 to gui_parm5, are a list of names who's PDAs can access this area. We only have one PDA, so we'll set gui_parm2 to "Joe Schmoe".
<br /><br />This is the important part: gui_parm7. This is how the panel checks if you're authorized or not. Set the gui_parm7 key to "Area2_PDA", matching the inv_name value we gave to the PDA earlier.
<br /><br /><img src="https://web.archive.org/web/20100522170152im_/http://lophyte.is-a-geek.org/doom3/pdatut/pdatut2-2.jpg" alt="Image" /><br /><br /><br />3. UNLOCKING THE DOOR
<br /><br /><br />It's now time to make the panel unlock the door. Click on the grid and hit escape to make sure nothing's selected. Right click on the grid and go to trigger, then trigger_once. Note the name of the trigger in the entity properties window -- it should be something like trigger_once_1. Now, add a "target" key to the properties, and set the value to the name of the door you're unlocking.
<br /><br />Unselect the trigger, and select the panel. Go into the entity properties and add a "target" key for the panel as well, and set the value to the name of the trigger. On the grid, the panel should have a line connecting it to the trigger, and the trigger should have a line connecting it to the door.
<br /><br /><img src="https://web.archive.org/web/20100522170152im_/http://lophyte.is-a-geek.org/doom3/pdatut/pdatut2-3.jpg" alt="Image" /><br /><br />And that's it! Fire up Doom and give your map a try. Also, if you want the "Security Clearance Updated" message to show up when you pick up Joe Schmoe's PDA, edit the PDA file we created in part 1, in newpdas/test_schmoe.pda, and change the security line to whatever you like.
<br /><br /><br />Well, that's all for now. Comments, suggestions and feedback is welcome and appreciated.
<br /><br /><br />- lophyte</div>]]></body></post><post id="p31142" date="Posted: Mon Aug 09, 2004 6:34 am "><author>Vash</author><body><![CDATA[<div class="postbody">Great tutorial.</div>]]></body></post><post id="p31560" date="Posted: Mon Aug 09, 2004 8:35 pm "><author>just1n</author><body><![CDATA[<div class="postbody">Nice tutorial.</div>]]></body></post><post id="p33358" date="Posted: Wed Aug 11, 2004 11:17 pm "><author>3xodus</author><body><![CDATA[<div class="postbody">I have one problem. The door opens even if the person doesn't have the pda. How can I stop this? Also, when I pick up the PDA in game, all it says is "Default PDA" even though it's been configured in game</div>]]></body></post><post id="p33385" date="Posted: Thu Aug 12, 2004 12:28 am "><author>lophyte</author><body><![CDATA[<div class="postbody">Make sure that you set a "locked" key on the door - it should have a val of 2. Also, make sure that the following bolded names match:
<br /><br />In the entity properties for the PDA, the key "pda_name" should have a val of "<span style="font-weight: bold">test_schmoe</span>"
<br /><br />In the PDA file, the first block should look something like:
<br />pda <span style="font-weight: bold">test_schmoe</span> {
<br />name "Joe Schmoe"
<br /><span style="font-style: italic">etc, etc...</span>
<br />}
<br /><br />Also, make sure the PDA file is called test_schmoe.pda and its in your doom3/base/newpdas folder.</div>]]></body></post><post id="p33995" date="Posted: Thu Aug 12, 2004 6:34 pm "><author>CodeMonkey</author><body><![CDATA[<div class="postbody">Nicely done.  Even a mapping-challenged coder like me can follow it <img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p41773" date="Posted: Wed Aug 25, 2004 7:21 pm "><author>RSLink</author><body><![CDATA[<div class="postbody">Thx alot, did work fine.
<br />I just see 1 error in the tutorial. If you set a trigger_once the door will unlock if you touch the trigger_once and/or if you use the panel. Just connect the panel with the doors (fun_door). The trigger_once is incorrect in this place. You will only be able to press the panel one time (with this gui).</div>]]></body></post><post id="p42225" date="Posted: Thu Aug 26, 2004 4:16 pm "><author>DCBKNC1701</author><body><![CDATA[<div class="postbody">I just discovered something that might be helpful.In order to have the player start off with a PDA (as in no 'stop in at reception desk message') all you have to do is:
<br /><br />Create an item_pda,then give it a 'pda_name' of 'personal' (or if you used a custom one) then,all you have to do,is give it a key of 'inv_carry' and a value of '1'.This will make the player already have it when the level starts.I hope i helped some people,i know i was trying to figure this out myself  <img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /><img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p42293" date="Posted: Thu Aug 26, 2004 6:17 pm "><author>goliathvt</author><body><![CDATA[<div class="postbody">Nice DCBKNC1701... I sat there trying to use target_give and all kinds of other sh!t... rofl... the answer was right in front of me the whole time.... <img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=";)" title="Wink" /><br /><br />Thanks!
<br /><br />G</div>]]></body></post><post id="p43612" date="Posted: Sun Aug 29, 2004 11:39 am "><author>jon-driverdown</author><body><![CDATA[<div class="postbody">very nice find. i was placing the pda next to the start. meh. 
<br /><br />anyone know how to make the PDA not give the intro screen with the click to continue that takes about 14 days to appear?</div>]]></body></post><post id="p43633" date="Posted: Sun Aug 29, 2004 2:12 pm "><author>DCBKNC1701</author><body><![CDATA[<div class="postbody">If you did it right,that shouldnt appear,itll be like the player already had the PDA when the level started</div>]]></body></post><post id="p43703" date="Posted: Sun Aug 29, 2004 5:25 pm "><author>goliathvt</author><body><![CDATA[<div class="postbody">Hey.  I can't get this to work... can you post an example map or go into more detail about what you're doing to get the PDA in the user's inventory?
<br /><br />G</div>]]></body></post><post id="p43727" date="Posted: Sun Aug 29, 2004 5:55 pm "><author>goliathvt</author><body><![CDATA[<div class="postbody">Nevermind, I got it.  What is written above is incorrect:
<br /><br />To give a PDA to a player when the level begins, simply set the PDA item as a target in your info_player_start entity.
<br /><br />That's all that's needed.
<br /><br />Edit: Figured I'd add some more detail to this:
<br /><br />Note: I'm using +set fs_game someModDirectory, so creating a custom personal PDA for me does not overwrite the vanilla game's personal PDA.... 
<br /><br />To get this to work, I created a custom <span style="font-style: italic">personal.pda</span> and placed it in someModDirectory/newpdas.  
<br /><br /><span style="font-weight: bold">personal.pda</span>
<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">// NO audio files in the personal pda and subsequently no video files in other pdas<br />// all vidoes are downloaded to your personal pda and individual pdas can contain<br />// audio logs<br /><br />pda personal<br />{<br />   name      "^5TT Personal^0"<br />   fullname   "TT User"<br />   icon      "gui/pda/bio1"<br />   id         "3819x-22"<br />   post      "Mars"            // for the personal pda this is ignored<br />   title      "Marine Security"   // this is used for title or rank ( for the player )<br />   security   "Marine HQ"         // only set this if it contains a new security clearance.. as far as the pda and hud goes this is informational only<br />   pda_email   "tt_personal"<br />   //pda_video   "marine_sop"<br />}<br /><br />email tt_personal<br />{<br />   date      "08-22-2004"<br />   to         "Trigger Tutorial Users"<br />   from      "SJR"<br />   subject      "Welcome!"<br />   text <br />   {<br />   "Welcome to GoliathVT's Trigger Tutorial.\n\n"<br />   "Visit each GUI station for information on the various trigger types used in the map.\n\n"<br />   "\n"<br />   "Enjoy the tutorial\n\n"<br />   "SJR\n\n"<br />   }<br />}<br /></div>
<br /><br />Now, here are the entities used and their various properties:
<br /><br /><span style="font-weight: bold">The Player Start Point</span>
<br />classname:  info_player_start
<br />name:  info_player_start_1
<br />angle:  0
<br />target:  personal_pda
<br /><br /><span style="font-weight: bold">The PDA</span>
<br />inv_name:   personal
<br />classname: item_pda
<br />name:  personal_pda
<br />inv_item:   1
<br /><br />===
<br /><br />That's it.
<br /><br />G</div>]]></body></post><post id="p43744" date="Posted: Sun Aug 29, 2004 6:09 pm "><author>DCBKNC1701</author><body><![CDATA[<div class="postbody">It isnt incorrect,its just another way of doing it,cause it works too</div>]]></body></post><post id="p43746" date="Posted: Sun Aug 29, 2004 6:11 pm "><author>goliathvt</author><body><![CDATA[<div class="postbody">Can you post a map using your method, because it didn't work for me.
<br /><br />G</div>]]></body></post><post id="p43767" date="Posted: Sun Aug 29, 2004 6:41 pm "><author>DCBKNC1701</author><body><![CDATA[<div class="postbody">OMG youre right!!Its because i had the PDA spawn where the player spawns,it must have the player pick it up as the level is loading!  <img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_redface.gif" alt=":oops:" title="Embarassed" /></div>]]></body></post><post id="p43785" date="Posted: Sun Aug 29, 2004 7:23 pm "><author>goliathvt</author><body><![CDATA[<div class="postbody">No worries.  <img src="https://web.archive.org/web/20100522170152im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />  I'm just glad it was figured out... esp. since that little info window sticks around so long after you pick up the first PDA... its very annoying. 
<br /><br />G</div>]]></body></post><post id="p130602" date="Posted: Sat Jan 21, 2006 10:36 pm "><author>maddios</author><body><![CDATA[<div class="postbody">Im having trouble with the gui_parms. First, when I type in the key/val they wont show up in that little window with all of the key/vals. 
<br /><br />At first, i thought this was just a defect in editor.
<br />But then when I loaded the map, nothing appeared on the gui, just the pda scan icon(the area name and the list of names were missing), and when I scaned my pda with the right security clearance, it 
<br />would saqy 'Incorrect Security Clearance'.</div>]]></body></post><post id="p130638" date="Posted: Sun Jan 22, 2006 1:55 am "><author>maddios</author><body><![CDATA[<div class="postbody">please someone help?</div>]]></body></post><post id="p130664" date="Posted: Sun Jan 22, 2006 5:47 am "><author>rich_is_bored</author><body><![CDATA[<div class="postbody">When you enter key/value pairs into the coorisponding text boxes, are you pressing enter afterwards?</div>]]></body></post></posts></thread></xml>
