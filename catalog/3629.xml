<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="3629"><title>[Tutorial] Storage Cabinets</title><posts><post id="p33555" date="Posted: Thu Aug 12, 2004 6:22 am "><author>Ekkruker</author><body><![CDATA[<div class="postbody">A few people have been asking about this, and they are great anyways, so here goes:
<br /><br /><br />First, right click and add a "env-&gt;env_storagecabinet". You'll be left with an awkward square that doesn't look quite like a storage cabinet. To fix this, press 'N' and put 'anim' in key and 'open' in val. Hit enter and it shows the correct model. (Press 1 to space the grid by one. Press 4 to go back to default).
<br /><br />Next, create a thin brush as so:
<br /><br /><a href="https://web.archive.org/web/20100522162555/http://img16.exs.cx/my.php?loc=img16&amp;image=Screen1Tutcab.png" class="postlink"><img src="https://web.archive.org/web/20100522162555im_/http://img16.exs.cx/img16/6107/Screen1Tutcab.th.png" alt="Image" /></a>(Click Image for Full Size)
<br /><br />Make sure its aligned as such. Now, select the brush and give it the texture 'common-&gt;entitygui'. Now click the GUI button and select 'controlpanels-&gt;cabinet'. Next are some keys you must set as you want:
<br /><br />gui_parm1  -&gt;  This is the first number of the passcode. Put only one digit.
<br />gui_parm2  -&gt;  This is the second number. One digit.
<br />gui_parm3  -&gt;  This is the third number. One digit as well.
<br />gui_parm4  -&gt;  The name that appears on the GUI.
<br />gui_parm5  -&gt;  This is the number that appears in the upper right of the GUI. Just for show, no importance.
<br /><br />Now you have that set up you have to connect the GUI to the locker itself. Set the GUI's 'target' key to the locker's 'name' key.
<br /><br />Next, plop down a trigger-&gt;relay_trigger in front of the locker. Back at the GUI, set the GUI's 'target2' key to the relay_trigger's 'name' key.
<br /><br />This is the time you put the items into the locker. You might even put a shelf into the locker (a brush with a shelfy texture) and put stuff on there. That part is up to you. Put whatever item you want in the locker now. Next, select the relay trigger and change its 'target1' to the first item's 'name, its 'target2' the the second, 'target4' to the fourth, 'target748' to the seven-hundred eigth and so on. Then, set each item's 'triggerFirst' key to '1'.
<br /><br />Now, the cabinet has no collision. The way I got around this was to put clip brushes (brushes with the texture 'common-&gt;clip_plusmovables') around the very edges of the cabinet and on top and such. Just put them around until you get it so that the camera can never go inside the cabinet.
<br /><br />I hope this helps, and Lophyte gets a lot of credit for this too, I didn't figure it out alone! <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /><br /><br /><br /><span style="color: red">EDIT: The piece that the gui must be on needs to be a func_static. After you shape and texture it, right click with it selected and go to func-&gt;func_static and it will change it. Thanks to <span style="font-weight: bold">pad</span> for pointing this out.</span></div>]]></body></post><post id="p33614" date="Posted: Thu Aug 12, 2004 8:06 am "><author>pad</author><body><![CDATA[<div class="postbody">It is all fine, but haven't You forgotten to write that locker should be func_static ? Without that my locker didn't work.</div>]]></body></post><post id="p33618" date="Posted: Thu Aug 12, 2004 8:12 am "><author>PsychoDad</author><body><![CDATA[<div class="postbody">Nice one!
<br /><br />One question: How do I change the tutorial, so that a locker is already open?</div>]]></body></post><post id="p33639" date="Posted: Thu Aug 12, 2004 9:23 am "><author>The_Hell</author><body><![CDATA[<div class="postbody">Hey! I was supposed to write a tutorial  <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_twisted.gif" alt=":twisted:" title="Twisted Evil" /><br />I figured everything out, but it was late in my country so i went to sleep...</div>]]></body></post><post id="p33646" date="Posted: Thu Aug 12, 2004 9:35 am "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">pad wrote:</div><div class="quotecontent">It is all fine, but haven't You forgotten to write that locker should be func_static ? Without that my locker didn't work.</div>
<br /><br />Er, be more specific about didn't work..</div>]]></body></post><post id="p33669" date="Posted: Thu Aug 12, 2004 10:10 am "><author>pad</author><body><![CDATA[<div class="postbody">I meant i hadn't seen it at all.</div>]]></body></post><post id="p33671" date="Posted: Thu Aug 12, 2004 10:12 am "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Ekkruker wrote:</div><div class="quotecontent">You'll be left with an awkward square that doesn't look quite like a storage cabinet. To fix this, press 'N' and put 'anim' in key and 'open' in val. Hit enter and it shows the correct model. </div>
<br /><br />Did you do that part?</div>]]></body></post><post id="p33680" date="Posted: Thu Aug 12, 2004 10:25 am "><author>pad</author><body><![CDATA[<div class="postbody">Yes i did. I am a total newbie, so i followed Your tutorial step-by-step. 
<br />On picture You presented locker's brush has light blue color (like all statics), so i tried in that way and then it worked all ok.
<br />Sorry if i misunderstood something - as i said - i am newbie.</div>]]></body></post><post id="p33696" date="Posted: Thu Aug 12, 2004 10:54 am "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">pad wrote:</div><div class="quotecontent">Yes i did. I am a total newbie, so i followed Your tutorial step-by-step. <br />On picture You presented locker's brush has light blue color (like all statics), so i tried in that way and then it worked all ok.<br />Sorry if i misunderstood something - as i said - i am newbie.</div>
<br /><br />Ok, but what did you do exactly (to make it a static)? If there is something wrong that you had to do I'll need to add that on <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" />.
<br /><br />Also, im a newb too: I just started the editor on Sunday <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" />. This editor is fast learnin'. <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p33712" date="Posted: Thu Aug 12, 2004 11:15 am "><author>pad</author><body><![CDATA[<div class="postbody">In my final version i :
<br />- created brush
<br />- changed it to patch (Patch-&gt;Simple Patch Mesh...)
<br />- put it in proper position (rotate, move, etc.) - patch is flat so i just put it in front of desired surface
<br />- changed it to 'func_static'
<br /><br />Entity parameters and all other actions (trigger etc.) exactly same as described in tutorial.</div>]]></body></post><post id="p33717" date="Posted: Thu Aug 12, 2004 11:17 am "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">pad wrote:</div><div class="quotecontent">In my final version i :<br />- created brush<br />- changed it to patch (Patch-&gt;Simple Patch Mesh...)<br />- put it in proper position (rotate, move, etc.) - patch is flat so i just put it in front of desired surface<br />- changed it to 'func_static'<br /><br />Entity parameters and all other actions (trigger etc.) exactly same as described in tutorial.</div>
<br /><br />OH your talking about the thingo the GUI goes on. I thought you were talking about the locker itself.. Yes it needs to be a func_static I forgot to mention that. I'll add it now.</div>]]></body></post><post id="p33729" date="Posted: Thu Aug 12, 2004 11:55 am "><author>Rayne</author><body><![CDATA[<div class="postbody">and yes, use a simple patch mesh when you need ONE SIDED surfaces... <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p33738" date="Posted: Thu Aug 12, 2004 12:09 pm "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Rayne wrote:</div><div class="quotecontent">and yes, use a simple patch mesh when you need ONE SIDED surfaces... <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>
<br /><br />Actually, I left the one in my map as a thin mesh as in the picture. For one thing, it has collision so you don't have to set up a clip brush right there. Besides, thats the way the stock maps do it, anyways.</div>]]></body></post><post id="p35348" date="Posted: Sat Aug 14, 2004 3:57 pm "><author>Circastes</author><body><![CDATA[<div class="postbody">Say, is the GUI supposed to be super-sized? Like, it doesn't fit on the func_static, let alone the area given on the actual cabinent model.
<br />Let me know if I'm doing something wrong, and if I'm not, let me know if there's a way to resize GUIs.
<br /><br /><span style="font-weight: bold">EDIT: Oh right, surface inspector. <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=";)" title="Wink" /></span></div>]]></body></post><post id="p35401" date="Posted: Sat Aug 14, 2004 5:47 pm "><author>amusedtoe</author><body><![CDATA[<div class="postbody">It's always nice when someone's already asked the question for you. <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p35452" date="Posted: Sat Aug 14, 2004 7:29 pm "><author>OldRod</author><body><![CDATA[<div class="postbody">I'm having a strange problem with this gui object.
<br /><br />I made the cabinet and then created the gui brush as shown in the above picture.  It's a 1 pixel thick brush and sized to cover the size shown in your example.  I textured it and turned it into a func_static, then entered all the keys.
<br /><br />When I run the level in-game I see this:
<br /><br /><img src="https://web.archive.org/web/20100522162555im_/http://members.cox.net/rodburns/gui_problem.jpg" alt="Image" /><br /><br />It's like a '+' shape billboard, so I see two intersecting planes from whatever angle I view it.  Plus, when I approach it, I get the GUI sound and the cursor changes, but I can't push any of the buttons.
<br /><br />What did I do wrong? <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_sad.gif" alt=":(" title="Sad" /><br /><br />*edit*  Here's the entity in the actual map file.  Looks like all the keys are set ok unless I'm not understanding something <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">// entity 3<br />{<br />"classname" "func_static"<br />"name" "func_static_4"<br />"model" "func_static_4"<br />"origin" "-603 330 90"<br />"gui" "guis/controlpanels/cabinet.gui"<br />"gui_parm1" "1"<br />"gui_parm2" "2"<br />"gui_parm3" "3"<br />"gui_parm4" "Stuff"<br />"gui_parm5" "666"<br />"target" "env_storagecabinet_2"<br />"target2" "trigger_relay_1"<br />// primitive 0<br />{<br /> brushDef3<br /> {<br />  ( 0 0 -1 -8 ) ( ( 0.03125 0 0 ) ( 0 0.03125 -0.03125 ) ) "textures/common/entitygui" 0 0 0<br />  ( 0 0 1 -8 ) ( ( 0.03125 0 0 ) ( 0 0.03125 0.03125 ) ) "textures/common/entitygui" 0 0 0<br />  ( 0 -1 0 -6 ) ( ( 0.03125 0 0.03125 ) ( 0 0.03125 0 ) ) "textures/common/entitygui" 0 0 0<br />  ( 1 0 0 -1 ) ( ( 0.03125 0 0 ) ( 0 0.03125 0 ) ) "textures/common/entitygui" 0 0 0<br />  ( 0 1 0 -6 ) ( ( 0.03125 0 -0.03125 ) ( 0 0.03125 0 ) ) "textures/common/entitygui" 0 0 0<br />  ( -1 0 0 0 ) ( ( 0.03125 0 0 ) ( 0 0.03125 0 ) ) "textures/common/entitygui" 0 0 0<br /> }<br />}<br /></div></div>]]></body></post><post id="p35482" date="Posted: Sat Aug 14, 2004 8:14 pm "><author>OldRod</author><body><![CDATA[<div class="postbody">Ok, with enough trial and error, I finally got it working.  A couple things you might want to add to your tutorial to help other clueless newbs like myself <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />  :
<br /><br />1 - create the brush for the gui and texture it, then make it into a patch mesh.  Mine was a brush and was showing up like the one pictured in the previous post.  This seems to be discussed in later posts after your tutorial, but it's never really spelled out
<br /><br />2 - Once you make the patch brush, bring up the surface window and click the 'Fit' button.  If the texture is upside down in the editor window (like mine was) the patch won't show up in game, click the 'Flip X' button to fix it.
<br /><br />Now mine works <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Thanks for the tutorial!!</div>]]></body></post><post id="p35528" date="Posted: Sat Aug 14, 2004 9:42 pm "><author>OldRod</author><body><![CDATA[<div class="postbody">Some more tips for people to customize their lockers <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />If you put ammo/items/weapons inside the locker and are using a clip brush around the locker to keep from going through it, you may not be able to actually pick up the items inside once you open it.
<br /><br />To get around this, add the following keys to your items:
<br /><br />"triggerfirst"  "1"   - this requires the item to be triggered before you can pick it up (the func_relay in the tutorial above triggers it, but it also puts it directly in your inventory - this makes it so you have to actually pick it up manually).
<br /><br />"triggersize"  "20"  - this makes the trigger area of the item bigger so you can pick it up while standing in front of the cabinet.  After the cabinet opens, you still can't enter it due to the clip brush, so this allows the item to be picked up from just outside the cabinet - experiment with different values depending on how deep in the cabinet you placed your items.</div>]]></body></post><post id="p35574" date="Posted: Sat Aug 14, 2004 11:15 pm "><author>Ekkruker</author><body><![CDATA[<div class="postbody"><div class="quotetitle">OldRod wrote:</div><div class="quotecontent">If you put ammo/items/weapons inside the locker and are using a clip brush around the locker to keep from going through it, you may not be able to actually pick up the items inside once you open it.<br /></div>
<br /><br />Yes. I didn't say to cover the entire locker with clip, though <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" />. Just make sort of shelves that block progress partially. Like so:
<br /><br /><img src="https://web.archive.org/web/20100522162555im_/http://img65.exs.cx/img65/7030/Untitled-1copy2.png" alt="Image" /><br /><br />Note that they don't intersect the items. That can cause problems. There is some vis fighting going on on the side but its not a big deal because you can't see clip brushes in game anyways. Although the larger triggerdistance can be used as well.. probably quicker <img src="https://web.archive.org/web/20100522162555im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" />.</div>]]></body></post><post id="p39659" date="Posted: Sat Aug 21, 2004 7:43 pm "><author>skurk</author><body><![CDATA[<div class="postbody">argh! for some reason, whenever i create a brush with the clip_plusmovables texture, it disappears when I click space to clone, or esc to deselect it! i've also tried creating the brushes with a different texture and applying clip_plusmovables to them all at once, but then they all disappear. has this happened to anybody else?</div>]]></body></post></posts></thread></xml>
