<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="26010"><title>Using setkeyval and or via script to change an entity</title><posts><post id="p244076" date="Posted: Sat Nov 10, 2012 5:06 pm "><author>heady89</author><body><![CDATA[<div class="postbody">Hello folks,<br /><br />Let me first say that every answer so far has been very helpful, and i appreciate your time.<br />I'm wondering how i can trigger a target_setkeyval to set the health of for example a func_fracture to 0.<br /><br />Tried to set the keyval as health;0 and then have it target the actual func_fracture without success.<br />I'm not quite sure how the setkeyval works, i mean could i trigger it from a trigger_once so that i have control of when it occurs?<br /><br />My second question relates more to scripting, could i perhaps just use a trigger_once that calls my script function and then somehow<br />set the health of a specific entity from my scriptfunction. If possible, how would that syntax look?<br /><br />Kind regards,<br />heady</div>]]></body></post><post id="p244078" date="Posted: Sat Nov 10, 2012 5:38 pm "><author>chimueloeldragon2011</author><body><![CDATA[<div class="postbody">I'm not sure how exactly the key/val target works in the editor, but I don't know if you can actually, dynamically change spawnargs of an entity while running a game other than "hide" or some shaderparms/guiparms, (those are toggled on trigger events)<br /><br />What I do know is that you can set a key/val for further use in script, which would look like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void setkey() {<br /><br />   entity ent;<br />   ent = sys.getEntity("func_static_1");<br /><br />   ent.setKey( "spawnarg_here", "0 or 1 or whatever number" );<br />}</div><br /><br />That worked fine for me and does the job but it doesn't actually change the behaviour of the entity while in game.<br />Then you can later fetch the key value using "getKey"<br /><br />Anyway, take a look at script/doom_events, that will help you a lot!<br /><br /><div class="quotetitle">doom_events wrote:</div><div class="quotecontent">// Sets a key on this entity's spawn args. Note that most spawn args are evaluated when<br />// this entity spawns in, so this will not change the entity's behavior in most cases.<br />// This is chiefly for saving data the script needs in an entity for later retrieval.<br /><br />scriptEvent	void 	setKey( string key, string value );<br /><br />// Retrieves the value of a specific spawn arg.<br /><br />scriptEvent	string	getKey( string key );</div><br /><br />I hope somebody else can give you more detailed, working info.<br />Good luck</div>]]></body></post><post id="p244272" date="Posted: Sat Nov 17, 2012 5:38 am "><author>bladeghost</author><body><![CDATA[<div class="postbody">from what I'm reading here is that your trying to shatter a func_fracture or something or at least make it break apart when triggered.<br />what you can try is putting a func_explosion by it and trigger that and then the func_fracture should break apart, thats one method.<br />I did this in my phantasm beyond D3 mod with a closet mirror as I needed it to shatter on cue , that's what I used and that worked well for what I needed, you didn't really describe how or what your func_fracture relates to but just trying to trigger a func_fracture directly won't work as you'll need something else to 'affect it and that will in essence trigger it. good luck with it.</div>]]></body></post><post id="p244076" date="Posted: Sat Nov 10, 2012 5:06 pm "><author>heady89</author><body><![CDATA[<div class="postbody">Hello folks,<br /><br />Let me first say that every answer so far has been very helpful, and i appreciate your time.<br />I'm wondering how i can trigger a target_setkeyval to set the health of for example a func_fracture to 0.<br /><br />Tried to set the keyval as health;0 and then have it target the actual func_fracture without success.<br />I'm not quite sure how the setkeyval works, i mean could i trigger it from a trigger_once so that i have control of when it occurs?<br /><br />My second question relates more to scripting, could i perhaps just use a trigger_once that calls my script function and then somehow<br />set the health of a specific entity from my scriptfunction. If possible, how would that syntax look?<br /><br />Kind regards,<br />heady</div>]]></body></post><post id="p244078" date="Posted: Sat Nov 10, 2012 5:38 pm "><author>chimueloeldragon2011</author><body><![CDATA[<div class="postbody">I'm not sure how exactly the key/val target works in the editor, but I don't know if you can actually, dynamically change spawnargs of an entity while running a game other than "hide" or some shaderparms/guiparms, (those are toggled on trigger events)<br /><br />What I do know is that you can set a key/val for further use in script, which would look like this:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">void setkey() {<br /><br />   entity ent;<br />   ent = sys.getEntity("func_static_1");<br /><br />   ent.setKey( "spawnarg_here", "0 or 1 or whatever number" );<br />}</div><br /><br />That worked fine for me and does the job but it doesn't actually change the behaviour of the entity while in game.<br />Then you can later fetch the key value using "getKey"<br /><br />Anyway, take a look at script/doom_events, that will help you a lot!<br /><br /><div class="quotetitle">doom_events wrote:</div><div class="quotecontent">// Sets a key on this entity's spawn args. Note that most spawn args are evaluated when<br />// this entity spawns in, so this will not change the entity's behavior in most cases.<br />// This is chiefly for saving data the script needs in an entity for later retrieval.<br /><br />scriptEvent	void 	setKey( string key, string value );<br /><br />// Retrieves the value of a specific spawn arg.<br /><br />scriptEvent	string	getKey( string key );</div><br /><br />I hope somebody else can give you more detailed, working info.<br />Good luck</div>]]></body></post><post id="p244272" date="Posted: Sat Nov 17, 2012 5:38 am "><author>bladeghost</author><body><![CDATA[<div class="postbody">from what I'm reading here is that your trying to shatter a func_fracture or something or at least make it break apart when triggered.<br />what you can try is putting a func_explosion by it and trigger that and then the func_fracture should break apart, thats one method.<br />I did this in my phantasm beyond D3 mod with a closet mirror as I needed it to shatter on cue , that's what I used and that worked well for what I needed, you didn't really describe how or what your func_fracture relates to but just trying to trigger a func_fracture directly won't work as you'll need something else to 'affect it and that will in essence trigger it. good luck with it.</div>]]></body></post></posts></thread></xml>
