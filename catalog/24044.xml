<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="24044"><title>Quake 4 PC music replacement from Xbox 360</title><posts><post id="p228305" date="Posted: Thu Nov 11, 2010 8:20 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Hi everyone!<br />I registered here just to open this topic. I'm no gamer but I collect video game music. Thus, I'm also interested in quality issues, e.g. frequency richness. Having compared Quake 4 PC to Quake 4 Xbox 360 I quickly found out that the Xbox 360 version has MUCH better sound and music quality. Maybe it's possible to write something like a "HQ sound and music Patch" for Quake 4.<br />For this you'll need the Xbox 360 version of Quake 4. Extract the contents to your hard disk. I wrote an extractor for the *.xpr archives that contain the main game contents. You'll need Quickbms for that: <!-- m --><a class="postlink" href="https://web.archive.org/web/20101225121340/http://aluigi.altervista.org/papers.htm#quickbms">http://aluigi.altervista.org/papers.htm#quickbms</a><!-- m -->. Save the following text file as *.bms, open it with QuickBMS.exe and follow the instructions. Just select any *.xpr archive you want and extract it anywhere you want. For the sounds and music, the XMA files need to be decoded, but I'll come to that later.<br />First of all, here's the extraction script:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">IDSTRING XPR2<br />endian big<br />get INFOSIZE long<br />get DATASIZE long <br />get FILES long<br />set OFFCORR INFOSIZE<br />math OFFCORR += 0xc<br /><br />for i = 1 &lt;= FILES<br />   getDstring EXT 4<br />   get HEADER long<br />   get HEADERSIZE long<br />   get OFFSET long<br />   get SIZE long<br />   get NAMEPOS long<br />   math HEADER += 0xc<br />   math NAMEPOS += 0xc<br />   math OFFSET += OFFCORR<br />   savepos MYOFF<br />   goto NAMEPOS<br />   get NAME string<br />   string NAME += "."<br />   string NAME += EXT<br />   savepos NAMEPOS<br />   goto MYOFF<br />   log MEMORY_FILE 0 0<br />   append<br />   log MEMORY_FILE HEADER HEADERSIZE<br />   log MEMORY_FILE OFFSET SIZE<br />   get SIZE asize MEMORY_FILE<br />   log NAME 0 SIZE MEMORY_FILE<br />   append<br />next i</div>I'm going to post here soon when I've figured out how to change the XMA header variant to a standard XMA RIFF header. If you're interested in the whole purpose here, please post!<br /><br />P.S.: PM me if you don't have a copy of Quake 4 for Xbox 360.</div>]]></body></post><post id="p228718" date="Posted: Sat Dec 04, 2010 6:42 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Will take a look at the XMA files this weekend. =)</div>]]></body></post><post id="p228305" date="Posted: Thu Nov 11, 2010 8:20 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Hi everyone!<br />I registered here just to open this topic. I'm no gamer but I collect video game music. Thus, I'm also interested in quality issues, e.g. frequency richness. Having compared Quake 4 PC to Quake 4 Xbox 360 I quickly found out that the Xbox 360 version has MUCH better sound and music quality. Maybe it's possible to write something like a "HQ sound and music Patch" for Quake 4.<br />For this you'll need the Xbox 360 version of Quake 4. Extract the contents to your hard disk. I wrote an extractor for the *.xpr archives that contain the main game contents. You'll need Quickbms for that: <!-- m --><a class="postlink" href="https://web.archive.org/web/20101225120759/http://aluigi.altervista.org/papers.htm#quickbms">http://aluigi.altervista.org/papers.htm#quickbms</a><!-- m -->. Save the following text file as *.bms, open it with QuickBMS.exe and follow the instructions. Just select any *.xpr archive you want and extract it anywhere you want. For the sounds and music, the XMA files need to be decoded, but I'll come to that later.<br />First of all, here's the extraction script:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">IDSTRING XPR2<br />endian big<br />get INFOSIZE long<br />get DATASIZE long <br />get FILES long<br />set OFFCORR INFOSIZE<br />math OFFCORR += 0xc<br /><br />for i = 1 &lt;= FILES<br />   getDstring EXT 4<br />   get HEADER long<br />   get HEADERSIZE long<br />   get OFFSET long<br />   get SIZE long<br />   get NAMEPOS long<br />   math HEADER += 0xc<br />   math NAMEPOS += 0xc<br />   math OFFSET += OFFCORR<br />   savepos MYOFF<br />   goto NAMEPOS<br />   get NAME string<br />   string NAME += "."<br />   string NAME += EXT<br />   savepos NAMEPOS<br />   goto MYOFF<br />   log MEMORY_FILE 0 0<br />   append<br />   log MEMORY_FILE HEADER HEADERSIZE<br />   log MEMORY_FILE OFFSET SIZE<br />   get SIZE asize MEMORY_FILE<br />   log NAME 0 SIZE MEMORY_FILE<br />   append<br />next i</div>I'm going to post here soon when I've figured out how to change the XMA header variant to a standard XMA RIFF header. If you're interested in the whole purpose here, please post!<br /><br />P.S.: PM me if you don't have a copy of Quake 4 for Xbox 360.</div>]]></body></post><post id="p228718" date="Posted: Sat Dec 04, 2010 6:42 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Will take a look at the XMA files this weekend. =)</div>]]></body></post><post id="p228305" date="Posted: Thu Nov 11, 2010 8:20 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Hi everyone!<br />I registered here just to open this topic. I'm no gamer but I collect video game music. Thus, I'm also interested in quality issues, e.g. frequency richness. Having compared Quake 4 PC to Quake 4 Xbox 360 I quickly found out that the Xbox 360 version has MUCH better sound and music quality. Maybe it's possible to write something like a "HQ sound and music Patch" for Quake 4.<br />For this you'll need the Xbox 360 version of Quake 4. Extract the contents to your hard disk. I wrote an extractor for the *.xpr archives that contain the main game contents. You'll need Quickbms for that: <!-- m --><a class="postlink" href="https://web.archive.org/web/20101225120759/http://aluigi.altervista.org/papers.htm#quickbms">http://aluigi.altervista.org/papers.htm#quickbms</a><!-- m -->. Save the following text file as *.bms, open it with QuickBMS.exe and follow the instructions. Just select any *.xpr archive you want and extract it anywhere you want. For the sounds and music, the XMA files need to be decoded, but I'll come to that later.<br />First of all, here's the extraction script:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">IDSTRING XPR2<br />endian big<br />get INFOSIZE long<br />get DATASIZE long <br />get FILES long<br />set OFFCORR INFOSIZE<br />math OFFCORR += 0xc<br /><br />for i = 1 &lt;= FILES<br />   getDstring EXT 4<br />   get HEADER long<br />   get HEADERSIZE long<br />   get OFFSET long<br />   get SIZE long<br />   get NAMEPOS long<br />   math HEADER += 0xc<br />   math NAMEPOS += 0xc<br />   math OFFSET += OFFCORR<br />   savepos MYOFF<br />   goto NAMEPOS<br />   get NAME string<br />   string NAME += "."<br />   string NAME += EXT<br />   savepos NAMEPOS<br />   goto MYOFF<br />   log MEMORY_FILE 0 0<br />   append<br />   log MEMORY_FILE HEADER HEADERSIZE<br />   log MEMORY_FILE OFFSET SIZE<br />   get SIZE asize MEMORY_FILE<br />   log NAME 0 SIZE MEMORY_FILE<br />   append<br />next i</div>I'm going to post here soon when I've figured out how to change the XMA header variant to a standard XMA RIFF header. If you're interested in the whole purpose here, please post!<br /><br />P.S.: PM me if you don't have a copy of Quake 4 for Xbox 360.</div>]]></body></post><post id="p228718" date="Posted: Sat Dec 04, 2010 6:42 pm "><author>AlphaTwentyThree</author><body><![CDATA[<div class="postbody">Will take a look at the XMA files this weekend. =)</div>]]></body></post></posts></thread></xml>
