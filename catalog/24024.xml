<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="24024"><title>Script compile errors</title><posts><post id="p228126" date="Posted: Mon Nov 01, 2010 9:40 pm "><author>insanoflex</author><body><![CDATA[<div class="postbody">Im using a script to trigger radio entities in my map. But when I go to run my map, I am getting some pretty strange compile errors. First, when I used a switch statement for the different radio transmissions, I got an error "Switch is not a type". I changed them to if statements. Started to work, so I changed a few things in it. Now Im getting a "If is not a type" error. Also, am I not allowed to declare int, only float?<br /><br />code here (sorry kinda messy). The first part is used for some ragdolls.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/************************************<br /> * Map Scripts for Crewsquarters<br /> ***********************************/<br /><br />//this script launches the two skeletons, revealing some enemies<br />//location: maintenance access level 1<br /><br />void ragdollthrow1 () <br />{<br />   $ragdoll1mover.time(.1);<br />   $ragdoll1mover.moveTo ( $ragdoll1dest );<br />   $ragdoll2mover.time(.1);<br />   $ragdoll2mover.moveTo ( $ragdoll2dest );<br />   sys.waitFor ($ragdoll1mover);<br />   $ragdoll1.unbind();<br />   $ragdoll2.unbind();<br />}<br /><br />//this script moves the corpse to the pentagram and throws it at<br />//the ceiling panel, blocking off the room for the fight<br />//location: breakroom level 1<br /><br />void ragdollthrow2 ()<br />{<br />   //first, bind the corpse to the mover<br />   sys.trigger ( $ragdollthrow2_soundstinger );<br />   $ragdoll3.bind( $ragdoll3mover );<br />   sys.wait(2);<br /><br />   //move to the pentagram<br />   sys.trigger ( $ragdollthrow2_soundcrying );<br />   $ragdoll3mover.time(.5);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest1 );<br />   sys.waitFor ($ragdoll3mover);<br />   sys.wait(1);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest2 );<br />   sys.waitFor ($ragdoll3mover);<br /><br />        //trigger the pentagram<br />        sys.trigger( $ragdollthrow2_soundchant );<br />        sys.trigger( $ragdollthrow2_soundstinger2 );<br />        sys.wait(1);<br />   sys.trigger( $ragdollthrow2_pentagram );<br />   sys.wait(5);<br />   sys.trigger( $ragdollthrow2_pentagram );<br /><br />   //move to the ceiling panel<br />   sys.trigger( $ragdollthrow2_light1 );<br />        sys.trigger( $ragdollthrow2_light2 );<br />        sys.trigger( $ragdollthrow2_light3 );<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest3 );<br />   sys.waitFor ($ragdoll3mover);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest4 );<br />   sys.waitFor ($ragdoll3mover);<br />   $ragdoll3.unbind();<br />   sys.trigger( $ragdollthrow2_soundmetal2 );<br /><br />   //the ceiling panel rotates because of the hit<br />   $ragdollthrow2_ceilingpanel.time(.4);<br />   $ragdollthrow2_ceilingpanel.accelTime(.1);<br />   $ragdollthrow2_ceilingpanel.decelTime(.2);<br />   $ragdollthrow2_ceilingpanel.rotateOnce( '0 0 90' );<br />   sys.waitFor( $ragdollthrow2_ceilingpanel );<br />   sys.trigger( $ragdollthrow2_soundmetal1 );<br /><br />   //trigger monsters<br />   sys.trigger( $ragdollthrow2_monstertele );   <br />}<br /><br />//This script calls a random radio sound each time it<br />//is triggered.<br />//location: whole map<br /><br />void random_radio ()<br />{<br />   float transmission;<br />   transmission = sys.random(8) + 1;<br />   sys.print ("triggering radio with value ");<br />   sys.print (transmission);<br />   <br />   if (transmission &gt;= 1)<br />   { <br />      if (transmission &lt;= 2)<br />         sys.trigger($radio_random1);<br />   }<br />   if (transmission &gt;= 2)<br />   {<br />      if (transmission &lt;= 3)<br />         sys.trigger($radio_random2);<br />   }<br />   if (transmission &gt;= 3)<br />      if (transmission &lt;= 4)<br />         sys.trigger($radio_random3);<br />   }<br />   if (transmission &gt;= 4)<br />   {<br />      if (transmission &lt;= 5)<br />         sys.trigger($radio_random4);<br />   }<br />   if (transmission &gt;= 5)<br />   {<br />      if (transmission &lt;= 6)<br />         sys.trigger($radio_random5);<br />   }<br />   if (transmission &gt;= 6)<br />   {<br />      if (transmission &lt;= 7)<br />         sys.trigger($radio_random6);<br />   }<br />   if (transmission &gt;= 7) <br />   {<br />      if (transmission &lt;= 8)<br />         sys.trigger($radio_random7);<br />   }<br />   if (transmission &gt;= 8)<br />   {   <br />      if (transmission &lt;= 9)<br />         sys.trigger($radio_random8);<br />   }<br />}<br /><br />//This is the radio sound script that calls right after <br />//the initial invasion.<br />//location: whole map<br /><br />void radio_start ()<br />{<br />   //We have a codered<br />   sys.trigger ($radio_codered);<br />   sys.wait (7);<br />   <br />   //Fall back to HQ<br />   sys.trigger ($radio_fallback);<br />   sys.wait (10);<br /><br />   //random radio chatter<br />   sys.trigger ($radio_someguydying);<br />   sys.wait (10);<br /><br />   sys.trigger ($radio_screaming);<br />   sys.wait (10);<br /><br />   sys.trigger ($radio_overrun);<br />   sys.wait (11);<br />   <br />   //Say again, fall back to regroup<br />   sys.trigger ($radio_fallbackrepeat);<br />   sys.wait (10);<br /><br />   //calling the random radio script<br />   float radio_count;<br />   float max_radio_count;<br />   radio_count = 0;<br />   random_radio();<br />   max_radio_count = sys.random(1)+1;<br /><br />   while (radio_count &lt; max_radio_count)<br />   {<br />      sys.wait (sys.random(4) +20);<br />      radio_count += 1;<br />      random_radio();<br />   }<br /><br />   //Give sitreps<br />   sys.trigger ($radio_givesitreps);<br />   sys.wait (5);<br />   <br />   //Sitreps<br />   sys.trigger ($radio_sitrep1);<br />   sys.wait (6);<br />   sys.trigger ($radio_sitrep2);<br />   sys.wait (14);<br />   sys.trigger ($radio_sitrep3);<br />   sys.wait (6);<br /><br />   //calling the random radio script<br />   radio_count = 0;<br />   random_radio ();<br />   max_radio_count = sys.random(4)+9;<br />      <br />   while (radio_count &lt; max_radio_count )<br />   {<br />      sys.wait (sys.random(4) +20);<br />      radio_count += 1;<br />      random_radio();<br />   }<br />}<br /><br /><br />   <br />   <br />}</div></div>]]></body></post><post id="p228127" date="Posted: Mon Nov 01, 2010 11:07 pm "><author>Sikkpin</author><body><![CDATA[<div class="postbody">Looks like you are missing the opening bracket here:<div class="codetitle"><b>Code:</b></div><div class="codecontent">   if (transmission &gt;= 3)<br />      if (transmission &lt;= 4)<br />         sys.trigger($radio_random3);<br />   }<br /></div><br />Also, you can cast the random value to an integer like so:<div class="codetitle"><b>Code:</b></div><div class="codecontent">transmission = int( sys.random(8) + 1 )</div>This way you only have to do your if's like this:<div class="codetitle"><b>Code:</b></div><div class="codecontent"> if ( transmission == 1 )<br />    sys.trigger( $radio_random1 );<br />...etc...</div></div>]]></body></post><post id="p228130" date="Posted: Mon Nov 01, 2010 11:49 pm "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">Then you'd need exact numbers.  I've found random integers isn't as varied as random floats.  No clue why.<br /><br />But the if could be made easier.  Two ways:<br />1)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (transmission &gt;= 3) &amp;&amp; (transmission &lt; 4)<br /> blah...<br />if (transmission &gt;=4) &amp;&amp; (transmission &lt; 5)<br /></div><br /><br />Or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (transmission &gt;= 8)<br /> blah...<br />else if transmission &gt;= 7)<br /> blah..<br /> else....<br /></div><br /><br />That (technically) is faster because once it's found what # it is, it exists the if statement &amp; doesn't check the rest.</div>]]></body></post><post id="p228131" date="Posted: Tue Nov 02, 2010 1:05 am "><author>insanoflex</author><body><![CDATA[<div class="postbody">it was giving me an error when I tried to use &amp;&amp;, thats why I changed it to how it is. Kinda weird I think. <br /><br />@Sikkpin Fixed, but now I get a '}' is not a type error. <br /><br />edit: another typo found and fixed and now it works! Maybe I'll try to rewrite it, that could have been the reason I was getting the '&amp;&amp;' is not a type error. Ill post again if doom3 starts hating my script again. Thanks</div>]]></body></post><post id="p228133" date="Posted: Tue Nov 02, 2010 3:59 am "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">While not required, to me it's just good organization to always put in { &amp; } even if you don't need them.</div>]]></body></post><post id="p228126" date="Posted: Mon Nov 01, 2010 9:40 pm "><author>insanoflex</author><body><![CDATA[<div class="postbody">Im using a script to trigger radio entities in my map. But when I go to run my map, I am getting some pretty strange compile errors. First, when I used a switch statement for the different radio transmissions, I got an error "Switch is not a type". I changed them to if statements. Started to work, so I changed a few things in it. Now Im getting a "If is not a type" error. Also, am I not allowed to declare int, only float?<br /><br />code here (sorry kinda messy). The first part is used for some ragdolls.<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">/************************************<br /> * Map Scripts for Crewsquarters<br /> ***********************************/<br /><br />//this script launches the two skeletons, revealing some enemies<br />//location: maintenance access level 1<br /><br />void ragdollthrow1 () <br />{<br />   $ragdoll1mover.time(.1);<br />   $ragdoll1mover.moveTo ( $ragdoll1dest );<br />   $ragdoll2mover.time(.1);<br />   $ragdoll2mover.moveTo ( $ragdoll2dest );<br />   sys.waitFor ($ragdoll1mover);<br />   $ragdoll1.unbind();<br />   $ragdoll2.unbind();<br />}<br /><br />//this script moves the corpse to the pentagram and throws it at<br />//the ceiling panel, blocking off the room for the fight<br />//location: breakroom level 1<br /><br />void ragdollthrow2 ()<br />{<br />   //first, bind the corpse to the mover<br />   sys.trigger ( $ragdollthrow2_soundstinger );<br />   $ragdoll3.bind( $ragdoll3mover );<br />   sys.wait(2);<br /><br />   //move to the pentagram<br />   sys.trigger ( $ragdollthrow2_soundcrying );<br />   $ragdoll3mover.time(.5);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest1 );<br />   sys.waitFor ($ragdoll3mover);<br />   sys.wait(1);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest2 );<br />   sys.waitFor ($ragdoll3mover);<br /><br />        //trigger the pentagram<br />        sys.trigger( $ragdollthrow2_soundchant );<br />        sys.trigger( $ragdollthrow2_soundstinger2 );<br />        sys.wait(1);<br />   sys.trigger( $ragdollthrow2_pentagram );<br />   sys.wait(5);<br />   sys.trigger( $ragdollthrow2_pentagram );<br /><br />   //move to the ceiling panel<br />   sys.trigger( $ragdollthrow2_light1 );<br />        sys.trigger( $ragdollthrow2_light2 );<br />        sys.trigger( $ragdollthrow2_light3 );<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest3 );<br />   sys.waitFor ($ragdoll3mover);<br />   $ragdoll3mover.moveTo( $ragdoll3mover_dest4 );<br />   sys.waitFor ($ragdoll3mover);<br />   $ragdoll3.unbind();<br />   sys.trigger( $ragdollthrow2_soundmetal2 );<br /><br />   //the ceiling panel rotates because of the hit<br />   $ragdollthrow2_ceilingpanel.time(.4);<br />   $ragdollthrow2_ceilingpanel.accelTime(.1);<br />   $ragdollthrow2_ceilingpanel.decelTime(.2);<br />   $ragdollthrow2_ceilingpanel.rotateOnce( '0 0 90' );<br />   sys.waitFor( $ragdollthrow2_ceilingpanel );<br />   sys.trigger( $ragdollthrow2_soundmetal1 );<br /><br />   //trigger monsters<br />   sys.trigger( $ragdollthrow2_monstertele );   <br />}<br /><br />//This script calls a random radio sound each time it<br />//is triggered.<br />//location: whole map<br /><br />void random_radio ()<br />{<br />   float transmission;<br />   transmission = sys.random(8) + 1;<br />   sys.print ("triggering radio with value ");<br />   sys.print (transmission);<br />   <br />   if (transmission &gt;= 1)<br />   { <br />      if (transmission &lt;= 2)<br />         sys.trigger($radio_random1);<br />   }<br />   if (transmission &gt;= 2)<br />   {<br />      if (transmission &lt;= 3)<br />         sys.trigger($radio_random2);<br />   }<br />   if (transmission &gt;= 3)<br />      if (transmission &lt;= 4)<br />         sys.trigger($radio_random3);<br />   }<br />   if (transmission &gt;= 4)<br />   {<br />      if (transmission &lt;= 5)<br />         sys.trigger($radio_random4);<br />   }<br />   if (transmission &gt;= 5)<br />   {<br />      if (transmission &lt;= 6)<br />         sys.trigger($radio_random5);<br />   }<br />   if (transmission &gt;= 6)<br />   {<br />      if (transmission &lt;= 7)<br />         sys.trigger($radio_random6);<br />   }<br />   if (transmission &gt;= 7) <br />   {<br />      if (transmission &lt;= 8)<br />         sys.trigger($radio_random7);<br />   }<br />   if (transmission &gt;= 8)<br />   {   <br />      if (transmission &lt;= 9)<br />         sys.trigger($radio_random8);<br />   }<br />}<br /><br />//This is the radio sound script that calls right after <br />//the initial invasion.<br />//location: whole map<br /><br />void radio_start ()<br />{<br />   //We have a codered<br />   sys.trigger ($radio_codered);<br />   sys.wait (7);<br />   <br />   //Fall back to HQ<br />   sys.trigger ($radio_fallback);<br />   sys.wait (10);<br /><br />   //random radio chatter<br />   sys.trigger ($radio_someguydying);<br />   sys.wait (10);<br /><br />   sys.trigger ($radio_screaming);<br />   sys.wait (10);<br /><br />   sys.trigger ($radio_overrun);<br />   sys.wait (11);<br />   <br />   //Say again, fall back to regroup<br />   sys.trigger ($radio_fallbackrepeat);<br />   sys.wait (10);<br /><br />   //calling the random radio script<br />   float radio_count;<br />   float max_radio_count;<br />   radio_count = 0;<br />   random_radio();<br />   max_radio_count = sys.random(1)+1;<br /><br />   while (radio_count &lt; max_radio_count)<br />   {<br />      sys.wait (sys.random(4) +20);<br />      radio_count += 1;<br />      random_radio();<br />   }<br /><br />   //Give sitreps<br />   sys.trigger ($radio_givesitreps);<br />   sys.wait (5);<br />   <br />   //Sitreps<br />   sys.trigger ($radio_sitrep1);<br />   sys.wait (6);<br />   sys.trigger ($radio_sitrep2);<br />   sys.wait (14);<br />   sys.trigger ($radio_sitrep3);<br />   sys.wait (6);<br /><br />   //calling the random radio script<br />   radio_count = 0;<br />   random_radio ();<br />   max_radio_count = sys.random(4)+9;<br />      <br />   while (radio_count &lt; max_radio_count )<br />   {<br />      sys.wait (sys.random(4) +20);<br />      radio_count += 1;<br />      random_radio();<br />   }<br />}<br /><br /><br />   <br />   <br />}</div></div>]]></body></post><post id="p228127" date="Posted: Mon Nov 01, 2010 11:07 pm "><author>Sikkpin</author><body><![CDATA[<div class="postbody">Looks like you are missing the opening bracket here:<div class="codetitle"><b>Code:</b></div><div class="codecontent">   if (transmission &gt;= 3)<br />      if (transmission &lt;= 4)<br />         sys.trigger($radio_random3);<br />   }<br /></div><br />Also, you can cast the random value to an integer like so:<div class="codetitle"><b>Code:</b></div><div class="codecontent">transmission = int( sys.random(8) + 1 )</div>This way you only have to do your if's like this:<div class="codetitle"><b>Code:</b></div><div class="codecontent"> if ( transmission == 1 )<br />    sys.trigger( $radio_random1 );<br />...etc...</div></div>]]></body></post><post id="p228130" date="Posted: Mon Nov 01, 2010 11:49 pm "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">Then you'd need exact numbers.  I've found random integers isn't as varied as random floats.  No clue why.<br /><br />But the if could be made easier.  Two ways:<br />1)<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (transmission &gt;= 3) &amp;&amp; (transmission &lt; 4)<br /> blah...<br />if (transmission &gt;=4) &amp;&amp; (transmission &lt; 5)<br /></div><br /><br />Or<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">if (transmission &gt;= 8)<br /> blah...<br />else if transmission &gt;= 7)<br /> blah..<br /> else....<br /></div><br /><br />That (technically) is faster because once it's found what # it is, it exists the if statement &amp; doesn't check the rest.</div>]]></body></post><post id="p228131" date="Posted: Tue Nov 02, 2010 1:05 am "><author>insanoflex</author><body><![CDATA[<div class="postbody">it was giving me an error when I tried to use &amp;&amp;, thats why I changed it to how it is. Kinda weird I think. <br /><br />@Sikkpin Fixed, but now I get a '}' is not a type error. <br /><br />edit: another typo found and fixed and now it works! Maybe I'll try to rewrite it, that could have been the reason I was getting the '&amp;&amp;' is not a type error. Ill post again if doom3 starts hating my script again. Thanks</div>]]></body></post><post id="p228133" date="Posted: Tue Nov 02, 2010 3:59 am "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">While not required, to me it's just good organization to always put in { &amp; } even if you don't need them.</div>]]></body></post></posts></thread></xml>
