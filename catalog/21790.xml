<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="21790"><title>Blender to Md5 export problems.</title><posts><post id="p202481" date="Posted: Tue Jul 22, 2008 11:29 pm "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">I'm trying to export some view arms for Enemy Territory, but whenever I export the model for some reason parts of it are moved and resized which completely baffles me. The weirdest part is that it seems to have nothing to do with vertex groups or bones, as those are all weighted properly. For instance, the part just above the muzzle are misplaced even though they are part of the same group.<br /><br />There is also a little box shape that holds the revolver's cylinder in place that has one end of the box misplaced. It's really odd. Anyone ever have this happen?</div>]]></body></post><post id="p202498" date="Posted: Wed Jul 23, 2008 10:08 am "><author>der_ton</author><body><![CDATA[<div class="postbody">Are you using scaling on bones in blender? That would be a source for problems like these.<br />You can send the .blend file to my email and I can take a look if you want.</div>]]></body></post><post id="p202523" date="Posted: Thu Jul 24, 2008 3:33 am "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">I'm pretty sure I'm not using scale, though when I make a new keyframe I save locrotand scale even if I didn't change scale.</div>]]></body></post><post id="p202893" date="Posted: Thu Jul 31, 2008 11:55 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">The problems just lie in how the objects are organized in the scene, you won't have to animate or do the weighting all over again.<br /><br />You used modifiers for the skeletal animation, while you should just parent a mesh object to an armature object. That's why the main part of your gun (object called "arms.001") doesn't get exported (is ignored by the exporter because it is not parented to the armature), and in the case of the object called "cylinder", it is parented to the armature but also has a modifier and the parenting is not affecting the deformation, but the modifier is, which looks fine in Blender but my exporter relies on the parent link and ignores the modifier (it was developed before modifiers in Blender were introduced). The parent linking of "cylinder" to the armature is in a mode where there is no deformation effected by the parent linking.<br /><br />To properly connect the cylinder you should first delete its modifier, then clear its parent (alt-p with cylinder selected), then select cylinder and shift-select the armature, ctrl-p to parent it again, but this time select "parent to armature" in the upcoming dialog, and then "don't create vertex groups" in the next dialog, because you already have those set up.<br /><br />To properly connect "arm.001" which only has a modifier but no parent, you delete the modifier and parent it in the same way as described above for "cylinder".<br /><br />Then you will see it is roughly ok but there are some vertex glitches that I didn't investigate further, they are probably due to vertex weighting or mesh editing problems. If you can't solve them then just post here again, maybe Kat has an idea about these aswell.<br /><br />edit: <!-- l --><a class="postlink-local" href="https://web.archive.org/web/20081203142109/http://www.doom3world.org/phpbb2/viewtopic.php?f=50&amp;t=1711&amp;p=192924">viewtopic.php?f=50&amp;t=1711&amp;p=192924</a><!-- l --><br />Similar problem, but I just noticed I proposed a different but equivalent solution: leave the modifier as it is, but parent the mesh to the armature in "object mode", which doesn't do the transformation. I just tried it on your blend file with both "cylinder" and "arm.001" objects and it gives the same result, including the remaining glitches.</div>]]></body></post><post id="p204867" date="Posted: Sat Sep 13, 2008 10:05 pm "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">Well, now I'm pretty sure the issue has nothing to do with the bones and the animation, but the md5 and the vertex groups, since when the model is imported the issue is still prevalent.<br /><br />It has something to do with the md5 exporter adding the vertex points to a group that doesn't really exist, or Blender not fully removing vertex points from a group if the group is deleted with the vertex points still assigned to it.</div>]]></body></post><post id="p204945" date="Posted: Tue Sep 16, 2008 9:58 am "><author>der_ton</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Super Happy Cow wrote:</div><div class="quotecontent">when the model is imported the issue is still prevalent.</div><br />Can you explain what you mean? Maybe that's a way for me to reproduce the problem. If you want you can also send me the relevant files again, I think I don't have them anymore.</div>]]></body></post><post id="p204973" date="Posted: Wed Sep 17, 2008 5:23 am "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">At first we thought it had something to do with the bones and weights, but even without the bones imported the problem is still there.<br /><br />Also, I resent it.</div>]]></body></post><post id="p202481" date="Posted: Tue Jul 22, 2008 11:29 pm "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">I'm trying to export some view arms for Enemy Territory, but whenever I export the model for some reason parts of it are moved and resized which completely baffles me. The weirdest part is that it seems to have nothing to do with vertex groups or bones, as those are all weighted properly. For instance, the part just above the muzzle are misplaced even though they are part of the same group.<br /><br />There is also a little box shape that holds the revolver's cylinder in place that has one end of the box misplaced. It's really odd. Anyone ever have this happen?</div>]]></body></post><post id="p202498" date="Posted: Wed Jul 23, 2008 10:08 am "><author>der_ton</author><body><![CDATA[<div class="postbody">Are you using scaling on bones in blender? That would be a source for problems like these.<br />You can send the .blend file to my email and I can take a look if you want.</div>]]></body></post><post id="p202523" date="Posted: Thu Jul 24, 2008 3:33 am "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">I'm pretty sure I'm not using scale, though when I make a new keyframe I save locrotand scale even if I didn't change scale.</div>]]></body></post><post id="p202893" date="Posted: Thu Jul 31, 2008 11:55 pm "><author>der_ton</author><body><![CDATA[<div class="postbody">The problems just lie in how the objects are organized in the scene, you won't have to animate or do the weighting all over again.<br /><br />You used modifiers for the skeletal animation, while you should just parent a mesh object to an armature object. That's why the main part of your gun (object called "arms.001") doesn't get exported (is ignored by the exporter because it is not parented to the armature), and in the case of the object called "cylinder", it is parented to the armature but also has a modifier and the parenting is not affecting the deformation, but the modifier is, which looks fine in Blender but my exporter relies on the parent link and ignores the modifier (it was developed before modifiers in Blender were introduced). The parent linking of "cylinder" to the armature is in a mode where there is no deformation effected by the parent linking.<br /><br />To properly connect the cylinder you should first delete its modifier, then clear its parent (alt-p with cylinder selected), then select cylinder and shift-select the armature, ctrl-p to parent it again, but this time select "parent to armature" in the upcoming dialog, and then "don't create vertex groups" in the next dialog, because you already have those set up.<br /><br />To properly connect "arm.001" which only has a modifier but no parent, you delete the modifier and parent it in the same way as described above for "cylinder".<br /><br />Then you will see it is roughly ok but there are some vertex glitches that I didn't investigate further, they are probably due to vertex weighting or mesh editing problems. If you can't solve them then just post here again, maybe Kat has an idea about these aswell.<br /><br />edit: <!-- l --><a class="postlink-local" href="https://web.archive.org/web/20081203142051/http://www.doom3world.org/phpbb2/viewtopic.php?f=50&amp;t=1711&amp;p=192924">viewtopic.php?f=50&amp;t=1711&amp;p=192924</a><!-- l --><br />Similar problem, but I just noticed I proposed a different but equivalent solution: leave the modifier as it is, but parent the mesh to the armature in "object mode", which doesn't do the transformation. I just tried it on your blend file with both "cylinder" and "arm.001" objects and it gives the same result, including the remaining glitches.</div>]]></body></post><post id="p204867" date="Posted: Sat Sep 13, 2008 10:05 pm "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">Well, now I'm pretty sure the issue has nothing to do with the bones and the animation, but the md5 and the vertex groups, since when the model is imported the issue is still prevalent.<br /><br />It has something to do with the md5 exporter adding the vertex points to a group that doesn't really exist, or Blender not fully removing vertex points from a group if the group is deleted with the vertex points still assigned to it.</div>]]></body></post><post id="p204945" date="Posted: Tue Sep 16, 2008 9:58 am "><author>der_ton</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Super Happy Cow wrote:</div><div class="quotecontent">when the model is imported the issue is still prevalent.</div><br />Can you explain what you mean? Maybe that's a way for me to reproduce the problem. If you want you can also send me the relevant files again, I think I don't have them anymore.</div>]]></body></post><post id="p204973" date="Posted: Wed Sep 17, 2008 5:23 am "><author>Super Happy Cow</author><body><![CDATA[<div class="postbody">At first we thought it had something to do with the bones and weights, but even without the bones imported the problem is still there.<br /><br />Also, I resent it.</div>]]></body></post></posts></thread></xml>
