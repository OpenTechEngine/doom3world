<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="25931"><title>blender -&gt; ase -&gt; doom3</title><posts><post id="p242889" date="Posted: Sat Oct 13, 2012 7:32 pm "><author>dukedoom</author><body><![CDATA[<div class="postbody">Trying to get the hang of loading exported ASE models from blender.<br /><br />I've modeled a simple light switch, assigned a basic material, and uv unwrapped it. I created a raw tga file and just painted random colors in the uv view. I then used the ASE exporter found at <!-- m --><a class="postlink" href="https://web.archive.org/web/20130320020035/http://code.google.com/p/ase-export-vmc/">http://code.google.com/p/ase-export-vmc/</a><!-- m --> . I'm using blender 2.63 on linux. No errors or warnings on the export. <br /><br />My layout looks like:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">~/.doom3/base<br />  |-- maps<br />  |   `-- guidoor.map<br />  |-- materials<br />  |   `-- mine.mtr<br />  |-- models<br />  |   `-- light_switch.ase<br />  `-- textures<br />      |-- light_switch.tga<br />      |-- light_switch_local.tga<br />      `-- light_switch_s.tga<br /></div><br /><br />I've replaced the *BITMAP line in light_switch.ase with:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "\\base\textures\light_switch.tga"<br /></div><br /><br />My MTR file:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/light_switch {<br />    qer_editorimage textures/light_switch.tga<br />    bumpmap textures/light_switch_local.tga<br />    diffusemap textures/light_switch.tga<br />    specularmap textures/light_switch_s.tga<br />}<br /></div><br /><br />The normal map is just a 128x128 TGA set to 128, 128, 255.<br />The specular is just a 128x128 TGA set to 0, 0, 0.<br /><br />The model loads fine in darkradiant (1.7.2 x64). When I compile the map I get no errors and it says:<br /><br />loaded collision model models/light_switch.ase<br /><br />But, I don't see the model when the map loads.</div>]]></body></post><post id="p242890" date="Posted: Sat Oct 13, 2012 7:52 pm "><author>simulation</author><body><![CDATA[<div class="postbody">I think material files have to be mtr, not mtl.</div>]]></body></post><post id="p242891" date="Posted: Sat Oct 13, 2012 8:04 pm "><author>dukedoom</author><body><![CDATA[<div class="postbody"><div class="quotetitle">simulation wrote:</div><div class="quotecontent">I think material files have to be mtr, not mtl.</div><br /><br />Correct. That was a typo. The file is actually mine.mtr on the drive. I've edited my original post. Thanks!<br /><br />Any other suggestions? I got this far by reading iddevnet and kat's tutorials. One thing I did not do is create smooth groups for the model. Is that required?</div>]]></body></post><post id="p242892" date="Posted: Sat Oct 13, 2012 9:14 pm "><author>BloodRayne</author><body><![CDATA[<div class="postbody">*BITMAP "//base/textures/light_switch.tga"<br /><br />should be backspaces instead of forwards.<br /><br />eg: \\base\textures\common\nodraw</div>]]></body></post><post id="p242893" date="Posted: Sun Oct 14, 2012 12:12 am "><author>dukedoom</author><body><![CDATA[<div class="postbody"><div class="quotetitle">BloodRayne wrote:</div><div class="quotecontent">*BITMAP "//base/textures/light_switch.tga"<br /><br />should be backspaces instead of forwards.<br /><br />eg: \\base\textures\common\nodraw</div><br /><br />Fixed, but still not visible in the game. I tried setting r_showTris just for the hell of it but still nothing was visible.<br /><br />One thing I noticed in darkradiant, if I switch to lighted preview in the 3d view, the switch model dissapears. From loading other .ase models (caves1_6b.ase, for instance), darkradiant seems to cull back faces in both fullbright texture and lighting preview modes. So I don't think the normals on my model are backwards else it would not be visible in either fullbright or lighting mode. Right? So what does that leave? Fubar .tga textures? <br /><br />...<br /><br />Well I made a small bit of progress, I had saved the .tga out of blender as Targa Raw instead of Targa RGBA. It now show up in darkradiant in lighted preview mode but *still* isn't visible in the game. I tried commenting out the spec and bump in the .mtr file too. According to iddevnet the engine should create a default flat bumpmap and turn spec off.</div>]]></body></post><post id="p242895" date="Posted: Sun Oct 14, 2012 2:38 am "><author>The Happy Friar</author><body><![CDATA[<div class="postbody">The .ase requires the material file name not the texture name.  TGA's should be plain RGB, not RAW.  I'm using 2.49 but shouldn't make a difference.<br /><br />IE <div class="codetitle"><b>Code:</b></div><div class="codecontent">*BITMAP "//base/textures/items/health/armor01"</div><br /><br />And the material file:<br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">textures/items/health/armor01<br /> {<br />         qer_editorimage   models/items/armor/armor01.tga<br />   diffusemap     models/items/armor/armor01.tga<br /> }</div></div>]]></body></post><post id="p242896" date="Posted: Sun Oct 14, 2012 3:27 am "><author>dukedoom</author><body><![CDATA[<div class="postbody">I finally got it to show, but I'm not 100% sure how I did it. I started over with a cube and got that to load. I think it has to do with one or two of the ASE py script export options. <br /><br />* Use Submaterials (UDK)<br />* Allow Multiple Materials (UDK)<br /><br />I unchecked these before exporting and the final .ase had *BITMAP path filled in already. But I was also trying different Targa save options, Raw, RGB, RGBA, etc. <br /><br />TheHappyFriar, I tried pointing to a renamed light_switch.mtr like you suggested but got a black hole in the wall where the switch was supposed to be. I'll keep it in mind as I continue my experimentation though.<br /><br />Thanks for the hints/suggestions people. At least I've got a feedback loop working now.</div>]]></body></post><post id="p245005" date="Posted: Wed Dec 26, 2012 9:05 am "><author>Dingo_aus</author><body><![CDATA[<div class="postbody">I had the same problem, the correction was to turn off all the options in the ASE exporter.</div>]]></body></post></posts></thread></xml>
