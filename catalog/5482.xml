<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="5482"><title>Tutorial: How to add a Levelshot to your Multiplayer Map</title><posts><post id="p46781" date="Posted: Sat Sep 04, 2004 5:36 pm "><author>AEon</author><body><![CDATA[<div class="postbody">This is based on tutorial video by PlanetDoom, only this is a more explicit text version, with many additional comments and bug fixes. 
<br /><br />In this example I am assuming you have a multiplayer map called <span style="color: orange">base/maps/<span style="font-weight: bold">aeneon</span>.map</span> and will be using that name throughout the following:
<br /><br /><ol style="list-style-type: arabic-numbers"><li> To add a levelshot to your map you will need to add 2 folders to your development tree for DOOM 3:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">base/guis/map/            // Where your map specific .gui file goes<br />base/guis/assets/splash/    // Where the levelshot should reside<br /></div><br /></li><li> Use the MP .gui file for D3DM1 provided by id in <span style="color: green">pak000.pk4/guis/map/d3dm1.gui</span> as a template for your own map's .gui file.<br />Unpack <span style="color: green">d3dm1.gui</span> e.g. onto e.g. <span style="color: green">c:\</span> drive.<br /></li><li> Name the file like your .map file. In this case, rename <span style="color: green">d3dm1.gui</span> to <span style="color: orange">aeneon.gui</span> and place it in your <span style="color: green">base/guis/map/</span> folder.<br /></li><li> Edit the <span style="color: orange">base/guis/map/aeneon.gui</span> text file. There is a code block that defines the background image on loading:<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">windowDef BackgroundImage<br />   {<br />      rect   0,0,640,480<br />      visible   1<br />      background   "gui/loading/d3dm1"<br />      matcolor   1,1,1,1<br />   }<br /></div><br /><br />   To make this work for us, change the <span style="color: green">background</span> line to<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">// background   "gui/assets/splash/aeneon"   // Suggested by PlanetDoom Video, does not work!<br />// background   "gui/loading/aeneon"         // IMO correct way, but does not work?!<br /><br />      background   "guis/assets/splash/aeneon"  // This actually works!<br /></div><br /><br />	Again using your .map name instead of the default "<span style="color: green">d3dm1</span>".<br /><br />	Next find the <span style="color: green">windowDef TextTitle</span> block in the .gui file.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">windowDef TextTitle<br />   {<br />      rect   16,447,610,30<br />      visible   1<br />      text   "#str_03487"<br />      font   "fonts/micro"<br />      textscale   0.4<br />      forecolor   1,1,1,0<br />   }<br /></div><br /><br />	Change the <span style="color: green">text</span> line to the name/title of your map, i.e.<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">text   "AENEON - AEon's Neon Glow"</div><br /><br />    BTW "<span style="color: green">#str_03487</span>" can be found in <span style="color: green">pak000.pk4/strings/english.lang</span>: <span style="color: green">"#str_03487"	"D3DM1 - TOMIKO REACTOR"</span>.<br />    Note id's naming convention "<span style="color: orange">&lt;All CAPS map name&gt; - &lt;map title&gt;</span>"<br /><br />	Finally save the <span style="color: orange">aeneon.gui</span> file.	 <br /></li><li> Then create the background image in e.g. Photoshop that is <span style="font-weight: bold">512x512 pixel</span> large.<br /><br />Save that image as <span style="font-weight: bold">24bit tga</span> file, into your <span style="color: green">base/guis/assets/splash/</span> folder under the name <span style="color: orange">aeneon.tga</span>.<br /></li><li> To check for your map, run DOOM 3, under Multiplayer, Create Server, you should see your map plus levelshot. <br /><br /><img src="https://web.archive.org/web/20080418195826im_/http://www.planetquake.com/aeons/tmp/mapping/D3WTut-aeglow-lvlshot2.jpg" alt="Image" /><br /><br />When you run the map via "<span style="color: orange">map aeneon</span>" from the in-game console you will see your new levelshot on loading the map.<br /><br /><img src="https://web.archive.org/web/20080418195826im_/http://www.planetquake.com/aeons/tmp/mapping/D3WTut-aeglow-lvlshot1.jpg" alt="Image" /></li></ol></div>]]></body></post><post id="p46791" date="Posted: Sat Sep 04, 2004 6:16 pm "><author>just1n</author><body><![CDATA[<div class="postbody">Good job.</div>]]></body></post><post id="p47446" date="Posted: Mon Sep 06, 2004 7:52 am "><author>PsychoDad</author><body><![CDATA[<div class="postbody">Does this also work for Single Player maps?</div>]]></body></post><post id="p47451" date="Posted: Mon Sep 06, 2004 8:11 am "><author>Scribblehead</author><body><![CDATA[<div class="postbody"><div class="quotetitle">PsychoDad wrote:</div><div class="quotecontent">Does this also work for Single Player maps?</div>
<br /><br />I'd assume the same principle works with SP maps - only way to know, is to try <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p47459" date="Posted: Mon Sep 06, 2004 8:55 am "><author>idiom</author><body><![CDATA[<div class="postbody">If you create a 512 by 512 pic and your monitor is at 4:3 aspect ratio, wouldn't that stretch the pic? Or is it stretched so little it's hardly noticeable <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>]]></body></post><post id="p47462" date="Posted: Mon Sep 06, 2004 9:06 am "><author>TheCray_nz</author><body><![CDATA[<div class="postbody"><div class="quotetitle">idiom wrote:</div><div class="quotecontent">If you create a 512 by 512 pic and your monitor is at 4:3 aspect ratio, wouldn't that stretch the pic? Or is it stretched so little it's hardly noticeable <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>
<br />You should create the 512x512 image by scaling down the 640x480 or whatever) image. That way, when it's viewed ingame, it'll stretch back to the correct aspect ratio.</div>]]></body></post><post id="p47468" date="Posted: Mon Sep 06, 2004 9:51 am "><author>idiom</author><body><![CDATA[<div class="postbody">ahh, what a silly thing to make people do <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div>]]></body></post><post id="p47470" date="Posted: Mon Sep 06, 2004 10:00 am "><author>MNeMiC</author><body><![CDATA[<div class="postbody"><div class="quotetitle">PsychoDad wrote:</div><div class="quotecontent">Does this also work for Single Player maps?</div>
<br /><br /><br />Yes it works for single player maps, only the loading screen though, there's no 'map thumbnails' for single-player maps, well, unless you look at some of the GUI's ingame.</div>]]></body></post><post id="p47487" date="Posted: Mon Sep 06, 2004 11:42 am "><author>bb_matt</author><body><![CDATA[<div class="postbody"><div class="quotetitle">TheCray_nz wrote:</div><div class="quotecontent"><div class="quotetitle">idiom wrote:</div><div class="quotecontent">If you create a 512 by 512 pic and your monitor is at 4:3 aspect ratio, wouldn't that stretch the pic? Or is it stretched so little it's hardly noticeable <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_razz.gif" alt=":P" title="Razz" /></div><br />You should create the 512x512 image by scaling down the 640x480 or whatever) image. That way, when it's viewed ingame, it'll stretch back to the correct aspect ratio.</div>
<br /><br />I guess you mean that you take a screenshot of the normal aspect ratio WidthxHeight (640x480, 800x600, 1024x768 etc.) and then resize the Height of the screenshot to 512 and crop the width ?
<br /><br />Alternatively, resize the width to 512 and increate the canvas size to 512 high  <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />Or mask of a 512x512 square in your screenshot, if it's big enough,
<br /><br />Or ... - ok that's about it <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p47489" date="Posted: Mon Sep 06, 2004 11:57 am "><author>AEon</author><body><![CDATA[<div class="postbody">Since the <span style="color: green">base/guis/assets/splash/</span> folder also contains all the SP images, I'd also think the above works for SP maps.
<br /><br />Only that you should probably use a SP map's gui file as a template instead of <span style="color: green">pak000.pk4/guis/map/d3dm1.gui</span>.
<br /><br />On the <span style="color: orange">Aspect Ratio</span>: Initially I had wanted to write something about that, but simply using the <span style="color: orange">512x512</span> cut from a normal shot, leads to an interesting stretched look some folks may intentionally want to use. IMO this looks ok most of the time. Tip: If you actually use <span style="color: orange">Text</span> in the <span style="color: orange">512x512</span> shot, this will indeed lead to visually ugly stretching of the font.
<br /><br />As was mentioned the "correct" way is to scale a larger image e.g. <span style="color: orange">1280x1024</span> to <span style="color: orange">512x512</span> (Photoshop, <span style="color: red">Alt+i, i</span> - turn off <span style="font-weight: bold">Contrain Proportions</span>, <span style="color: red">no cropping!</span> required, and for good measure <span style="color: orange">Filter menu, Sharpen, Unsharp Mask...</span>). But note that the aspect ratio for European games normally is different than the ratio in the US ones. I have seen many games running <span style="color: orange">1280x960</span> (US) vs. the <span style="color: orange">1280x1024</span> I always use.
<br /><br />Here a list of ratios I have available in the UK version of D3, in most cases <span style="color: orange">1.33</span> would indeed be ok though:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent"> Resolution         Ratio<br />  640x480            1.33<br />  800x600            1.33<br /> 1024x768            1.33<br /> 1152x864            1.33<br /> 1280x960            1.33       (Not in my list of D3 resolutions)<br /> 1280x1024           1.25       &lt;--<br /> 1600x1200           1.33</div>
<br /><br />Post some feedback on the SP levelshots, and I will add the info to the first post.
<br /><br />Edit: Fixed, added several things.</div>]]></body></post><post id="p108651" date="Posted: Wed Aug 17, 2005 10:12 am "><author>blunt3d</author><body><![CDATA[<div class="postbody">Thanks for this Tutorial! I was looking for how to change the loadscreen, npow i know. <img src="https://web.archive.org/web/20080418195826im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p108652" date="Posted: Wed Aug 17, 2005 10:37 am "><author>iceheart</author><body><![CDATA[<div class="postbody"><div class="quotetitle">AEon wrote:</div><div class="quotecontent">But note that the aspect ratio for European games normally is different than the ratio in the US ones. I have seen many games running <span style="color: orange">1280x960</span> (US) vs. the <span style="color: orange">1280x1024</span> I always use.</div>
<br /><br />Uh, no, this is not geographical. 1280x960 is a 4:3 resolution, just like 640x480 or 1600x1200. 1280x1024 is a very special (5:4) resolution you should only EVER use if you have a LCD monitor with this native resolution!</div>]]></body></post><post id="p108704" date="Posted: Wed Aug 17, 2005 6:00 pm "><author>DoV_Tomas</author><body><![CDATA[<div class="postbody">Creating a splash screen is a two step process. You put your image in this folder:
<br /><br />base/guis/assets/splash/yourimage.tga
<br /><br />Then you require some gui code to go in this folder:
<br /><br />base/guis/map/levelname.gui
<br /><br />With respect to the code, it must be named the same as your map. Here is the code I usded for my level load shot, you'll just have to change the appropriate lines to suit your assets.
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">windowDef Desktop<br />{<br />	menugui	1<br />	nocursor	1<br />	rect	0,0,640,480<br />	windowDef BackgroundImage<br />	{<br />		rect	0,0,640,480<br />		visible	1<br />		background	"guis/assets/splash/R2MC1"<br />		matcolor	1,1,1,1<br />	}<br />	windowDef Scanlines2<br />	{<br />		rect	0,0,640,480<br />		matcolor	0.02,0.02,0.02,1<br />		background	"gui/test/gui_scanlines4"<br />		matscaley	3.75<br />		noevents	1<br />		visible	1<br />	}<br />	windowDef bgBlackTop<br />	{<br />		rect	0,0,640,200<br />		visible	1<br />		windowDef bgBlackTop1<br />		{<br />			rect	0,-21,170,-64<br />			background	"guis/assets/mainmenu/bg1"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackTop2<br />		{<br />			rect	170,-21,32,-64<br />			background	"guis/assets/mainmenu/bg2"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackTop3<br />		{<br />			rect	202,-21,458,-64<br />			background	"guis/assets/mainmenu/bg3"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />	}<br />	windowDef bgBlackBottom<br />	{<br />		rect	0,322,640,187<br />		noevents	1<br />		visible	1<br />		windowDef bgBlackBottomFill<br />		{<br />			rect	0,64,640,75<br />			backcolor	0 ,0 ,0 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackBottom1<br />		{<br />			rect	0,0,347,64<br />			background	"guis/assets/mainmenu/bg1"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackBottom2<br />		{<br />			rect	347,0,32,64<br />			background	"guis/assets/mainmenu/bg2"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackBottom3<br />		{<br />			rect	379,0,261,64<br />			background	"guis/assets/mainmenu/bg3"<br />			matcolor	1 ,1 ,1 ,0.6<br />			visible	1<br />			noevents	1<br />		}<br />		windowDef bgBlackBottomFade<br />		{<br />			rect	0,30,642,128<br />			background	"guis/assets/mainmenu/bg4"<br />			matcolor	0,0,0,1<br />			visible	1<br />			noevents	1<br />		}<br />	}<br />	windowDef TitleBar<br />	{<br />		rect	-300,371,512,19<br />		visible	1<br />		background	"gui/loading/titlebar"<br />		matcolor	1,1,1,0.1<br />	}<br />	windowDef TextDescription<br />	{<br />		rect	17,394,521,81<br />		visible	1<br />		noevents	1<br />		forecolor	1,1,1,0<br />		text	"A custom level by Tom Barak. Warning, contains disturbing themes and nudity and is intended for mature audiences. Player discretion is advised. Refer questions and comments to <!-- e --><a href="mailto:tbarak@mts.net">tbarak@mts.net</a><!-- e --> and refer to the walk through contained in the set up information for level specific details. "<br />		textscale	0.25<br />		font	"fonts/an"<br />	}<br />	windowDef TextTitle<br />	{<br />		rect	16,336,610,30<br />		visible	1<br />		text	"Return to Mars City"<br />		font	"fonts/micro"<br />		textscale	0.4<br />		forecolor	1,1,1,0<br />	}<br />	windowDef TextSubTitle<br />	{<br />		rect	16,367,610,30<br />		visible	1<br />		text	"Top Secret Priority Mission"<br />		textscale	0.4<br />		forecolor	1,1,1,0<br />	}<br />	windowDef LoadingFillClip<br />	{<br />		rect	2,18,( "gui::map_loading" * 175 ),16<br />		visible	1<br />		windowDef LoadingFill<br />		{<br />			rect	0,0,256,16<br />			visible	1<br />			background	"guis/assets/splash/load"<br />			matcolor	1,1,1,0.8<br />		}<br />	}<br />	windowDef LoadingLine<br />	{<br />		rect	2,18,256,16<br />		visible	1<br />		background	"guis/assets/splash/loadborder"<br />		matcolor	1,1,1,0<br />	}<br />	windowDef TextLoading<br />	{<br />		rect	16,-6,123,30<br />		visible	1<br />		text	""<br />		font	"fonts/micro"<br />		textscale	0.4<br />		forecolor	0.2,0.6,0.7,1<br />	}<br />	windowDef FlareBox<br />	{<br />		rect	0,0,48,21<br />		background	"gui/mainmenu/textflare"<br />		matcolor	0.4 ,0.6, 0.6, 0<br />		visible	1<br />	}<br />	windowDef BlackFade<br />	{<br />		rect	0,0,640,480<br />		backcolor	0, 0, 0, 1<br />		visible	1<br />	}<br />	windowDef Anim<br />	{<br />		rect	0,0,0,0<br />		visible	1<br /><br />		onTime 0 {<br />			transition "BlackFade::backcolor" "0 0 0 1" "0 0 0 0" "400" ;<br />			set "TextLoading::text" "L" ;<br />			transition "FlareBox::matcolor" "0.4 0.6 0.6 0" "0.4 0.6 0.6 0.5" "200" ;<br /><br />			transition "bgBlackTop1::rect" "0 -21 150 -64" "0 -21 170 -64" "400" "0.2" "0.8" ;<br />			transition "bgBlackTop2::rect" "150 -21 32 -64" "170 -21 32 -64" "400" "0.2" "0.8" ;<br />			transition "bgBlackTop3::rect" "182 -21 498 -64" "202 -21 458 -64" "400" "0.2" "0.8" ;<br />			transition "bgBlackBottom1::rect" "0 0 377 64" "0 0 347 64" "400" "0.2" "0.8" ;	<br />			transition "bgBlackBottom2::rect" "377 0 32 64" "347 0 32 64" "400" "0.2" "0.8" ;<br />			transition "bgBlackBottom3::rect" "409 0 261 64" "379 0 261 64" "400" "0.2" "0.8" ;			<br />		}<br /><br />		onTime 50 {<br />			set "TextLoading::text" "#str_03469" ;<br />			set "FlareBox::rect" "17 0 54 21" ;<br />		}<br /><br />		onTime 100 {<br />			set "TextLoading::text" "#str_03470" ;<br />			set "FlareBox::rect" "37 0 54 21" ;<br />		}<br /><br />		onTime 150 {<br />			set "TextLoading::text" "#str_03343" ;<br />			set "FlareBox::rect" "57 0 54 21" ;<br /><br />		}<br /><br />		onTime 200 {<br />			set "TextLoading::text" "#str_03471" ;<br />			set "FlareBox::rect" "67 0 54 21" ;<br /><br />			transition "TitleBar::rect" "-300 371 512 19" "0 371 512 19" "400" "0.2" "0.8" ;<br />			transition "TextTitle::forecolor" "0 0 0 0" "1 1 1 0.9" "400" "0.2" ".8" ;<br />			transition "TextSubTitle::forecolor" "0 0 0 0" "1 1 1 0.4" "400" "0.2" ".8" ;<br />		}<br /><br />		onTime 250 {<br />			set "TextLoading::text" "#str_03472" ;<br />			set "FlareBox::rect" "81 0 54 21" ;<br />		}<br /><br />		onTime 300 {<br />			set "TextLoading::text" "#str_00408" ;<br />			set "FlareBox::rect" "100 0 54 21" ;<br />			transition "FlareBox::matcolor" "0.4 0.6 0.6 0.5" "0 0 0 0" "200" ;<br />			transition "LoadingLine::matcolor" "1 1 1 0" "1 1 1 0.8" "600" ;<br />			transition "TextLoading::forecolor" "1 1 1 1" "0.2 0.6 0.7 1" "200" ;<br />			transition "TextDescription::forecolor" "0 0 0 0" "1 1 1 1" "400" "0.2" "0.8" ;<br />			transition "TextDescription::rect" "10 394 517 80" "17 394 517 81" "400" "0.2" "0.8" ;<br />		}<br /><br />	}<br />}<br /><br /></div></div>]]></body></post></posts></thread></xml>
