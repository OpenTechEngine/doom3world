<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="6314"><title>Tutorial: Projected Lights, Part II - Custom Lights</title><posts><post id="p53500" date="Posted: Mon Sep 27, 2004 1:00 pm "><author>bb_matt</author><body><![CDATA[<div class="postbody">This is a Follow-up on KolosoK's tutorial, <span style="font-weight: bold">Projected Lights (With screenshots!)</span> which you can find here :-
<br /><br /><!-- m --><a class="postlink" href="https://web.archive.org/web/20100522163022/http://www.doom3world.org/phpbb2/viewtopic.php?t=6306">http://www.doom3world.org/phpbb2/viewtopic.php?t=6306</a><!-- m -->
<br /><br /><span style="font-weight: bold">Projected Lights, Part II - Custom Lights</span>
<br /><br />Here's a very quick rundown for a custom standard non-animated projected light texture. Please note, this is just one method of creating a projected light texture.
<br /><br />1. In photoshop, start a new document with a white background :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/1.gif" alt="Image" /><br /><br />In this case, I've created a 256x256 pixel doc.
<br /><br />2. From the Filters menu, select <span style="font-weight: bold">Render -&gt; Lighting Effects</span>
<br /><br />You'll be presented with something like this :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/3.jpg" alt="Image" /><br /><br />I'm not going to go into the details here - just fiddle around till you get something your happy with. This can take some time depending what you want - remember, this is also just one way of making textures for Doom3 light fx (it just happens to be pretty easy) 
<br /><br />I've ended up with this :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/4.jpg" alt="Image" /><br /><br />3. In your Doom3 base folder, create a folder called lights if it doesn't exist. Inside this folder, create a custom subfolder where you'll be saving your light textures. This is to ensure that you don't bork up the native Doom3 files when you release your map. It should be noted that there are other ways to do this - you can create an entire custom base folder and create a structure within that for storing your files, but I'm not going into that here.
<br /><br />In my case, I've created a folder <span style="font-weight: bold">base/lights/bbd3dm1</span>
<br /><br />Save your light texture as a 32 bit TGA file into your custom folder.
<br /><br />4. Now we need to create a material entry in a custom material file for our light, otherwise it won't show up in our Light Editor Texture menu.
<br /><br />I've culled some existing id code here for the most basic of projected lights, here it is :-
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lights/triangle1<br />{   <br /><br />   {<br />      forceHighQuality<br />      map   lights/triangle1.tga<br />      colored<br />      zeroClamp<br />   }<br />}<br /></div><br /><br />I'm not going into details as to what everything does, suffice to say, it'll work, but we need to edit that code and put it into our own material file.<br /><br />Mine will end up looking like this :-<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">lights/bbd3dm1/bb_light1<br />{   <br /><br />   {<br />      forceHighQuality<br />      map   lights/bbd3dm1/bb_light1.tga<br />      colored<br />      zeroClamp<br />   }<br />}<br /></div>
<br /><br />I'm going to save it in my already existing material file, bbd3dm1.mtr
<br />Your material file should be placed into the base/materials folder.
<br /><br />Now we go into DoomEdit and check to see that our light appears !
<br /><br />I've opened a test level, created a light and gone into the Light Editor (Hit J on the keyboard) - I can see my new light texture in there :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/6.gif" alt="Image" /><br /><br />I can see it works when I render the view - here's a shot rendered with the 2D view visible :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/7.gif" alt="Image" /><br /><br />If you look through the id light texture TGA files, you'll see that your limited only by your imagination, take that one step further and look at the materials.mtr file and you enter a whole new dimension of possibilities - you can rotate, fade, change colours, scroll - the list goes on.
<br /><br />As usual, with Doom3, as of this date, the possibilities of just projected lights haven't been fully discovered.
<br /><br />Just for a bit of fun, here's the d3w.org logo, greyscaled and projected as a light :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/8.jpg" alt="Image" /><br /><br />Basically, you can project any texture. 
<br />Rule of thumb, make sure that the background colour is black (RGB 0 0 0) - any other colour will show up as part of the projection.
<br /><br />Here's a colour version of the above :-
<br /><br /><img src="https://web.archive.org/web/20100522163022im_/http://www.3r.co.za/bushboy/tutorials/projected/9.jpg" alt="Image" /></div>]]></body></post><post id="p53589" date="Posted: Mon Sep 27, 2004 9:40 pm "><author>KolosoK</author><body><![CDATA[<div class="postbody">Wow! This is great! I'll be using this a whole lot in my maps!</div>]]></body></post><post id="p53633" date="Posted: Tue Sep 28, 2004 2:34 am "><author>QuiXilver</author><body><![CDATA[<div class="postbody">thats pretty sweet, ive followed your tut and i cant seem to work, think i have to create the texture? like your doom3world? you type that in your new doc then filter lighting? (thats what i did) or do you have to make a seperate texture for that? I like that and would be perfect for my level im messin with.</div>]]></body></post><post id="p53655" date="Posted: Tue Sep 28, 2004 5:02 am "><author>BNA!</author><body><![CDATA[<div class="postbody">
  <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" />
</div>]]></body></post><post id="p53660" date="Posted: Tue Sep 28, 2004 5:23 am "><author>bb_matt</author><body><![CDATA[<div class="postbody"><div class="quotetitle">QuiXilver wrote:</div><div class="quotecontent">thats pretty sweet, ive followed your tut and i cant seem to work, think i have to create the texture? like your doom3world? you type that in your new doc then filter lighting? (thats what i did) or do you have to make a seperate texture for that? I like that and would be perfect for my level im messin with.</div>
<br /><br />Yes, if you want custom projected lights, you create a custom texture.
<br /><br />The doom3world.org projected light is a 256x64 TGA file I made up - I just saved the logo at the top of the forum here ^ changed the canvas size and greyscaled.
<br /><br />So, here we go :-
<br /><br />1. Create your texture and save it to a custom folder in the base/lights folder
<br />2. In a custom .mtr file, add in your code as I did above
<br />3. Fire up DoomEdit, create a light, make it a projected light and give it your new texture.
<br /><br />It should be noted that the exact same conventions apply to creating custom textures, the only difference here is that you save your light texture in the lights folder as opposed to the textures folder.
<br /><br />I'm trying to keep this purposefully simple as there are so many variables that are beyond the scope of this tutorial. 
<br /><br />If your light isn't showing up correctly, check all your paths and syntax of your code - it has to be exact.
<br /><br />Here's my code again with the custom bits indicated in red :-
<br /><br /><span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_light1</span><br />{   <br /><br />   {<br />      forceHighQuality<br />      map   lights/<span style="color: red">bbd3dm1/bb_light1.tga</span><br />      colored<br />      zeroClamp<br />   }<br />} </span>
<br /><br />So for a basic light, those are the only bits you need to change and they depend upon the custom folder you create in the lights folder and your texture name. 
<br /><br />The first line of code <span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_light1</span></span> can actually be a different name to your texture file if you want it to be. I could have <span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_dw3logo</span></span> and that's what name would appear in the light editor texture menu.
<br /><br />You can use any TGA texture you want for projected lights, it should be noted that the darker the colours, the less "light" will be shown. Black is not visible at all, so it's useful as a mask.
<br /><br />Take a look through the textures/lights folder at the tga files and also look at lights.mtr and fogs.mtr in the materials folder just to get an idea of what's possible.
<br /><br />Anyway, my colour doom3world.org projected logo is inverted <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> - heh - I was working quick and didn't want to fiddle around masking off areas to make them black, so I just inverted in photoshop and fiddled with filters.  <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p53667" date="Posted: Tue Sep 28, 2004 5:42 am "><author>rivit</author><body><![CDATA[<div class="postbody">thank you <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p53690" date="Posted: Tue Sep 28, 2004 11:40 am "><author>Dogstar</author><body><![CDATA[<div class="postbody">Such a cool tut. Thanks! <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p53695" date="Posted: Tue Sep 28, 2004 12:18 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">I haven't messed with projected textures much - I hope you can use different blend modes? Being able to darken the scene with a GL_DST_COLOR GL_ZERO blend and a custom map would be very useful.</div>]]></body></post><post id="p53700" date="Posted: Tue Sep 28, 2004 12:37 pm "><author>bb_matt</author><body><![CDATA[<div class="postbody">yeah - those are some things I want to look into as well - the material format is the same as textures, with some additional entries, so I guess you could experiment to see if blend functions will work.</div>]]></body></post><post id="p53722" date="Posted: Tue Sep 28, 2004 2:24 pm "><author>De</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent"> Being able to darken the scene...</div>
<br /><br />you can with one of the light types/shaders, i think it was called 'filter'? it's at the top of the list with others like 'ambient' and 'glare'
<br />im at work so i cant look for myself, but how was is done in the material file?</div>]]></body></post><post id="p53741" date="Posted: Tue Sep 28, 2004 3:47 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">you can with one of the light types/shaders, i think it was called 'filter'? it's at the top of the list with others like 'ambient' and 'glare' </div>
<br /><br />Oh, that would be the blend mode I mentioned above. GL_DST_COLOR GL_ZERO is blend filter (ie multiply or burn), which is presumably what that light is using. I'll tkae a look at that light shader and see if there's any wierd syntax.</div>]]></body></post><post id="p53749" date="Posted: Tue Sep 28, 2004 4:51 pm "><author>Rayne</author><body><![CDATA[<div class="postbody"><div class="codetitle"><b>Code:</b></div><div class="codecontent">fogs/filter<br />{<br />   blendLight<br />   noShadows<br />   lightFalloffImage   lights/squarelight1a<br />   {<br />      blend      GL_ZERO, GL_ONE_MINUS_SRC_COLOR   // get dimmer as the textures get brighter<br />      map         lights/squarelight1<br />      zeroclamp            // make sure it doesn't bleed over the edges<br />      colored               // take rgba from entity shaderparms<br />   }<br />}</div>
<br /><br /><br /><br />Seems to work <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />  It's commented also</div>]]></body></post><post id="p53870" date="Posted: Wed Sep 29, 2004 12:07 am "><author>QuiXilver</author><body><![CDATA[<div class="postbody"><div class="quotetitle">bb_matt wrote:</div><div class="quotecontent"><div class="quotetitle">QuiXilver wrote:</div><div class="quotecontent">thats pretty sweet, ive followed your tut and i cant seem to work, think i have to create the texture? like your doom3world? you type that in your new doc then filter lighting? (thats what i did) or do you have to make a seperate texture for that? I like that and would be perfect for my level im messin with.</div><br /><br />Yes, if you want custom projected lights, you create a custom texture.<br /><br />The doom3world.org projected light is a 256x64 TGA file I made up - I just saved the logo at the top of the forum here ^ changed the canvas size and greyscaled.<br /><br />So, here we go :-<br /><br />1. Create your texture and save it to a custom folder in the base/lights folder<br />2. In a custom .mtr file, add in your code as I did above<br />3. Fire up DoomEdit, create a light, make it a projected light and give it your new texture.<br /><br />It should be noted that the exact same conventions apply to creating custom textures, the only difference here is that you save your light texture in the lights folder as opposed to the textures folder.<br /><br />I'm trying to keep this purposefully simple as there are so many variables that are beyond the scope of this tutorial. <br /><br />If your light isn't showing up correctly, check all your paths and syntax of your code - it has to be exact.<br /><br />Here's my code again with the custom bits indicated in red :-<br /><br /><span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_light1</span><br />{   <br /><br />   {<br />      forceHighQuality<br />      map   lights/<span style="color: red">bbd3dm1/bb_light1.tga</span><br />      colored<br />      zeroClamp<br />   }<br />} </span><br /><br />So for a basic light, those are the only bits you need to change and they depend upon the custom folder you create in the lights folder and your texture name. <br /><br />The first line of code <span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_light1</span></span> can actually be a different name to your texture file if you want it to be. I could have <span style="font-weight: bold">lights/<span style="color: red">bbd3dm1/bb_dw3logo</span></span> and that's what name would appear in the light editor texture menu.<br /><br />You can use any TGA texture you want for projected lights, it should be noted that the darker the colours, the less "light" will be shown. Black is not visible at all, so it's useful as a mask.<br /><br />Take a look through the textures/lights folder at the tga files and also look at lights.mtr and fogs.mtr in the materials folder just to get an idea of what's possible.<br /><br />Anyway, my colour doom3world.org projected logo is inverted <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /> - heh - I was working quick and didn't want to fiddle around masking off areas to make them black, so I just inverted in photoshop and fiddled with filters.  <img src="https://web.archive.org/web/20100522163022im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>
<br /><br /><br />sweet thnx! when i get everything done (which will take a newbie like myself a while, but it will be worth it)  ill post a screenie in the pimp area
<br />show ya how well this works for my first map im makin.</div>]]></body></post><post id="p54787" date="Posted: Sun Oct 03, 2004 2:55 am "><author>QuiXilver</author><body><![CDATA[<div class="postbody">sweet got that workin great and wanna look around the mtr files for stuff todo with the text, but im curious how did you add the color for the text? after i make the text in ps i greyscale and invert and i loose my color.
<br />Im sorry if im pesting and if this should be in the texture thread, I did make a request for a tut but nothing yet and id really like to get this part down. thnx</div>]]></body></post></posts></thread></xml>
