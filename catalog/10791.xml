<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="10791"><title>Mapper in need of help.</title><posts><post id="p97125" date="Posted: Mon May 30, 2005 6:29 am "><author>Steveo</author><body><![CDATA[<div class="postbody">Iam having performance problems with my ctf map iam working on. I now have the map how i want it and was getting ready to beta test it. I packed it up into a pk4 file and tried it in the game. When i play it in multiplayer mode like its supposed to be played, It laggs everywhere. But the weird thing is I aslo have a single player player start in the map also to test things out when i change them. when I load up my map in single player mode I dont get one inch of lagg on my map. I have also tried it on my other pc and it still gives out the same results. 
<br /><br />Thank you and I hope some one can help me.</div>]]></body></post><post id="p97596" date="Posted: Wed Jun 01, 2005 4:32 pm "><author>DoV_Tomas</author><body><![CDATA[<div class="postbody">Very sorry no answer and it's rare for someone not to respond to posts. Likely the chaps don't know. Likewise for me as I've never made a MP map.</div>]]></body></post><post id="p97599" date="Posted: Wed Jun 01, 2005 4:49 pm "><author>Mordenkainen</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Steveo wrote:</div><div class="quotecontent">Iam having performance problems with my ctf map iam working on. I now have the map how i want it and was getting ready to beta test it. I packed it up into a pk4 file and tried it in the game. When i play it in multiplayer mode like its supposed to be played, It laggs everywhere. But the weird thing is I aslo have a single player player start in the map also to test things out when i change them. when I load up my map in single player mode I dont get one inch of lagg on my map. I have also tried it on my other pc and it still gives out the same results. </div>
<br /><br />Load one of the D3 MP maps. Does it lag too?</div>]]></body></post><post id="p97610" date="Posted: Wed Jun 01, 2005 5:35 pm "><author>Steveo</author><body><![CDATA[<div class="postbody">I tried loading up the normal ctf maps to and it dont lagg at all on them.</div>]]></body></post><post id="p97612" date="Posted: Wed Jun 01, 2005 5:44 pm "><author>DoV_Tomas</author><body><![CDATA[<div class="postbody">Have you optimized the map? How is the light and tris count, and are you using portals properly? Still doesn't explain why testing the map in SP mode runs okay while MP doesn't.</div>]]></body></post><post id="p97614" date="Posted: Wed Jun 01, 2005 5:53 pm "><author>Steveo</author><body><![CDATA[<div class="postbody">Ok i know I optimized the light but Iam still kinda new to mapping so I dont know everything. can you tell me about tris counts and vis portals?I probably know what they are but i just dont know the correct words for them. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" />  I have put nodraw brushes between every room and such.</div>]]></body></post><post id="p97619" date="Posted: Wed Jun 01, 2005 6:15 pm "><author>efx</author><body><![CDATA[<div class="postbody">Two questions regarding your nodraw brushes:
<br /><br />1, Have you made sure that they seal the doorways or whatever completely?
<br /><br />2, Make sure that at least one of the sides of that nodraw brush carries the vis-portal texture. I believe you can find it under "common". Don't be alarmed if doom says it can't find it, it'll still work.
<br /><br />To me that sounds like it should fix your problem.</div>]]></body></post><post id="p97624" date="Posted: Wed Jun 01, 2005 6:19 pm "><author>Steveo</author><body><![CDATA[<div class="postbody"><div class="quotetitle">efx wrote:</div><div class="quotecontent">Two questions regarding your nodraw brushes:<br /><br />1, Have you made sure that they seal the doorways or whatever completely?<br /><br />2, Make sure that at least one of the sides of that nodraw brush carries the vis-portal texture. I believe you can find it under "common". Don't be alarmed if doom says it can't find it, it'll still work.<br /><br />To me that sounds like it should fix your problem.</div>
<br /><br />Ok I have the no draw brushes completely covering the door ways but I dont have the vis-portal texture on one side of any of them. I'll go do this and tell everyone the result.</div>]]></body></post><post id="p97628" date="Posted: Wed Jun 01, 2005 6:30 pm "><author>Daniel Schimmer</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Steveo wrote:</div><div class="quotecontent"><div class="quotetitle">efx wrote:</div><div class="quotecontent">Two questions regarding your nodraw brushes:<br /><br />1, Have you made sure that they seal the doorways or whatever completely?<br /><br />2, Make sure that at least one of the sides of that nodraw brush carries the vis-portal texture. I believe you can find it under "common". Don't be alarmed if doom says it can't find it, it'll still work.<br /><br />To me that sounds like it should fix your problem.</div><br /><br />Ok I have the no draw brushes completely covering the door ways but I dont have the vis-portal texture on one side of any of them. I'll go do this and tell everyone the result.</div>
<br /><br />If your willing, you could send me the map and i could have a look and make some suggestions.  PM me.</div>]]></body></post><post id="p97631" date="Posted: Wed Jun 01, 2005 6:53 pm "><author>DoV_Tomas</author><body><![CDATA[<div class="postbody">I think we draw closer to the problem and it is pretty clear you may be green as to the whole concept of tris count and the correct use of portals. I would search the dbase here using "portals" or "visportals" as a search word. There are a couple of great tutes floating around. It cannot be stressed enough that to make maps play at a reasonable frame rate you absolutely must have a grip on tris count. 
<br /><br />Start the game, load your map and type this into the console: r_showtris 2. To turn if off type r_showtris 0. Doing that will show you all the polygons in your map and what you are looking for is polygons being drawn that are outside of the player's view - for example the next room. If you can see every room when standing in a "closed room", chances are you've not used portals correctly. 
<br /><br />Portals act like dynamic walls that seal rooms that are seperated by entities that do not seal - such as func_statics with models (doors) - but they are invisible. Also you can  type this into the console: r_showportals 1 (r_showportals 0 to turn it off). Once you do that the portals - if they're working properly - will be outline in green or red. They turn green when opened, turn red when closed. If you use the r_showportals 1 command and your portals aren't showing up, you've not set them up properly. Basically you're trying to limit what the engine has to render at any given time. Controlling the rendered tris, overlapping lights and portals are the key to making a smooth playing map.</div>]]></body></post><post id="p97635" date="Posted: Wed Jun 01, 2005 7:08 pm "><author>Steveo</author><body><![CDATA[<div class="postbody">adding vis portal to one side of every nodraw brush fixed the problem. It now runs perfectly fine. I have mapped more for quake 3 arena so iam still not as familiar with doom 3 as iam quake 3. But now that I know this I will know from now on. I want to thank everyone for helping me I appreciate it. 
<br /><br />Thanks again  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post></posts></thread></xml>
