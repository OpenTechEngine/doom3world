<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="5126"><title>BSP Thread: Figuring out various BSP options</title><posts><post id="p43962" date="Posted: Mon Aug 30, 2004 3:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 11:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 10:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 11:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 5:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 6:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 7:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20130320010423im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 1:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20130320010423im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 4:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20130320010423im_/http://www.doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 12:45 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 4:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 10:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 8:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20130320010423im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20130320010423im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 1:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 5:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20130320010423im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 9:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 9:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20130320010423/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 3:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20130320010423im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 1:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 3:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 11:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 10:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 11:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 5:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 6:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 7:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 1:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 4:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 12:45 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 4:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 10:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 8:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20130320010430im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20130320010430im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 1:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 5:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 9:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 9:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20130320010430/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 3:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 1:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 3:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 11:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 10:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 11:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 5:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 6:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 7:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20101225002834im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 1:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20101225002834im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 4:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20101225002834im_/http://www.doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 12:45 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 4:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 10:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 8:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20101225002834im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20101225002834im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 1:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 5:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20101225002834im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 9:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 9:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20101225002834/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 3:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20101225002834im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 1:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 3:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 11:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 10:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 11:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 5:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 6:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 7:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 1:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 4:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 12:45 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 4:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 10:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 8:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20130320010430im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20130320010430im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 1:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 5:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 9:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 9:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20130320010430/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 3:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20130320010430im_/http://www.doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 1:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_O




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:31 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CUL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:39 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:40 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CUL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:07 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:08 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:10 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:12 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:13 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:18 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..&#13;<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>&#13;<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. &#13;<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command&#13;<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>&#13;<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.&#13;<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.&#13;<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)&#13;<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe&#13;<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI&#13;<br /><br /><span style="font-weight: bold">nocm:</span> ???&#13;<br /><br /><span style="font-weight: bold">notjunc:</span>  ???&#13;<br /><br /><span style="font-weight: bold">shadowopt:</span> ???&#13;<br /><br /><span style="font-weight: bold">noclipsides:</span> ???&#13;<br /><br /><span style="font-weight: bold">nomodels:</span>  ???&#13;<br /><br /><span style="font-weight: bold">verboseentities:</span> ???&#13;<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )&#13;<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)&#13;<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>&#13;<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.&#13;<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "&#13;<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that&#13;<br /><br />{&#13;<br />"mapspath" "w:\doom\base\maps"&#13;<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>&#13;<br />"autosave" "c:\autosave.map"&#13;<br />"autosave1" "c:\autosave1.map"&#13;<br />"autosave2" "c:\autosave2.map"&#13;<br />"texturepath" "w:\doom\base\textures"&#13;<br />"entitypath" "w:\doom\base\scripts\*.def"&#13;<br />"remotebasepath" "w:\doom\base"&#13;<br />"rshcmd" ""&#13;<br />"basepath" "w:\doom\base"&#13;<br />"brush_primit" "1"&#13;<br />}&#13;<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty&#13;<br /><br /><br />3) now you can insert your new line using this syntax&#13;<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" &#13;<br /><br />Example:&#13;<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  &#13;<br /><br />"bsp nocurves noflood" ""&#13;<br /><br />and have something like this new one&#13;<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>&#13;<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.&#13;<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.&#13;<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"&#13;<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>&#13;<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.&#13;<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...&#13;<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. &#13;<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.&#13;<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.&#13;<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!&#13;<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.&#13;<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>&#13;<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:&#13;<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL_OCCLUDED<br />3 - SO_CLIP_OCCLUDERS<br />4 - SO_CLIP_SILS<br />5 - SO_SIL_OPTIMIZE<br />noTjunc   Don't fix t-juctions. (Triangle optimization won't work without t-junction fixing)<br />noCM   Don't generate .cm (collision) information<br />noAAS   Don't generate .aas (pathfinding) information<br />editorOutput   Pipe status messages to the editor window</div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:23 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CUL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:26 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post><post id="p43962" date="Posted: Mon Aug 30, 2004 2:01 am "><author>Rayne</author><body><![CDATA[<div class="postbody">UPDATED: I will include every bsp aspect I collect, to keep infos in one thread. Now i'm triyng to figure out the BSPext stuff..
<br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*EDITOR OPTIONS*</span></span>
<br />The first thing I enjoyed of the new editor, is that we now have a cool BSP menu with compile options (ala quake3)... I really hate to turn on console and type dmap blablabla, so i use it for compiling purposes... Now, since we have not simply an option, but six commands, i'm trying to figure out what those six options does. 
<br /><br />Choosing The first option (BSP) will compile your map with default settings, the same exact thing that writing into console   dmap <span style="font-style: italic">maps/yourmap</span> and the others command will compile your map with extra options... See below for parameters descriptions.. the only thing i have to figure out is what the hell is  BSPext on last command
<br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">*FULL COMMANDS DESCRIPTION*</span></span>
<br /><br />I found following parameters in doom.exe and experimented a little.. If you know more about these, let me know.
<br /><br /><span style="font-weight: bold">noCurves:</span>  compile your map without process patches. If you'll play your map, patches are not showed.Them are actully invisible but collision is still detected.
<br /><br /><span style="font-weight: bold">lightcarve:</span> will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum (thanks to Black dog)
<br /><br /><span style="font-weight: bold">nodeblocksize:</span> = actually suggested by someone, but i didn't  found any trace of it in doom exe
<br /><br /><span style="font-weight: bold">noaas:</span> build your map without calculating  aas files for AI
<br /><br /><span style="font-weight: bold">nocm:</span> ???
<br /><br /><span style="font-weight: bold">notjunc:</span>  ???
<br /><br /><span style="font-weight: bold">shadowopt:</span> ???
<br /><br /><span style="font-weight: bold">noclipsides:</span> ???
<br /><br /><span style="font-weight: bold">nomodels:</span>  ???
<br /><br /><span style="font-weight: bold">verboseentities:</span> ???
<br /><br /><span style="font-weight: bold">noopt:</span>   compile your map without merge brushes with contiguos textures (and more? )
<br /><br /><span style="font-weight: bold">noflood:</span> doesn't  perform the "flood" process so your map won't leak even if entities can reach the void (usefull to use like a sort of "region" tool)
<br /><br /><br /><br /><span style="font-weight: bold"><span style="font-size: 117%; line-height: normal">HOW TO ADD OPTIONS IN BSP MENU</span></span>
<br /><br />There are 2 methods to add your custom options in BSP menu, one is achieved in Radiant, and one is achieved by manually edit your radiant project file (doom.qe4). I prefer edit the file manually cause the radiant feature is a little buggish.
<br /><br /><br />1) Make sure that your doom.qe4 file is placed in the right folder, the BASE folder. Something like  "doom3\base\doom.qe4 "
<br /><br /><br />2) open your doom.qe4 in a textpad.. you can see something like that
<br /><br />{
<br />"mapspath" "w:\doom\base\maps"
<br /><span style="font-weight: bold">"bsp" ""<br />"bsp noflood" ""<br />"bsp nocurves" ""<br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""</span>
<br />"autosave" "c:\autosave.map"
<br />"autosave1" "c:\autosave1.map"
<br />"autosave2" "c:\autosave2.map"
<br />"texturepath" "w:\doom\base\textures"
<br />"entitypath" "w:\doom\base\scripts\*.def"
<br />"remotebasepath" "w:\doom\base"
<br />"rshcmd" ""
<br />"basepath" "w:\doom\base"
<br />"brush_primit" "1"
<br />}
<br /><br /><br />Your project settings.. The bold strings, are the options that are present in the BSP menu of radiant.. Notice that  there are two sets of quotes, the first one contain the actual compile options and the second one is empty
<br /><br /><br />3) now you can insert your new line using this syntax
<br /><br />"bsp <span style="font-style: italic">command1</span> <span style="font-style: italic">command2</span> <span style="font-style: italic">command3</span>"  "" 
<br /><br />Example:
<br /><br />if you want a compile session that will not process curves and don't perform the "flood" process, you can add  
<br /><br />"bsp nocurves noflood" ""
<br /><br />and have something like this new one
<br /><br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">{<br />"mapspath" "w:\doom\base\maps"<br />"bsp" ""<br />"bsp noflood" ""<br /><span style="font-weight: bold">"bsp nocurves noflood" ""</span><br />"bsp shadowOpt 2" ""<br />"bsp noaas" ""<br />"bspext" ""<br />"bspext noflood" ""<br />"autosave" "c:\autosave.map"<br />"autosave1" "c:\autosave1.map"<br />"autosave2" "c:\autosave2.map"<br />"texturepath" "w:\doom\base\textures"<br />"entitypath" "w:\doom\base\scripts\*.def"<br />"remotebasepath" "w:\doom\base"<br />"rshcmd" ""<br />"basepath" "w:\doom\base"<br />"brush_primit" "1"<br />}</div>
<br /><br />Now you have a new option in the BSP menu of radiant named "bsp nocurves noflood"  that works perfectly (please refer above in this thread for options details)</div>]]></body></post><post id="p44096" date="Posted: Mon Aug 30, 2004 10:26 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I get the impression there are plenty of options. For example, -nodeblocksize &lt;n&gt;. I don't know what any of them are though.</div>]]></body></post><post id="p45204" date="Posted: Wed Sep 01, 2004 9:10 am "><author>Black Dog</author><body><![CDATA[<div class="postbody">I just remembered another one: -lightcarve, which will cut your brushes at light boundaries in order to keep the number of lights touching a triangle at a minimum. Not good with many small lights though.</div>]]></body></post><post id="p45229" date="Posted: Wed Sep 01, 2004 10:53 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Ops!</div>]]></body></post><post id="p45829" date="Posted: Thu Sep 02, 2004 4:13 pm "><author>Rayne</author><body><![CDATA[<div class="postbody">Few updates!</div>]]></body></post><post id="p45868" date="Posted: Thu Sep 02, 2004 5:28 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Good call on making this thread, very useful reference. I'll make sure to add more stuff if I stumble across it.
<br /><br />By the way, I believe -nodeblocksize controls the size of the chunks the BSP process carves the level into. In other words, your level space will be split into peices of size: nodeblocksize regardless of geometry, then cut up further by any structural stuff. I could easily be wrong on this though.
<br /><br />It would be useful if you're making a huge outdoor level and are running out of memory on compiles - up the -nodeblocksize to 4096 or so (default is 1024) and you can compile a much bigger level by keeping the number of created leaves down.</div>]]></body></post><post id="p45896" date="Posted: Thu Sep 02, 2004 6:17 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">Oh yeah, I should note: I picked these up from other people. I haven't tried them. Hope they work. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p46059" date="Posted: Fri Sep 03, 2004 12:29 am "><author>Rayne</author><body><![CDATA[<div class="postbody">Another small update <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_wink.gif" alt=":wink:" title="Wink" /></div>]]></body></post><post id="p46125" date="Posted: Fri Sep 03, 2004 3:52 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">Many thanks Rayne, and anymore you can dig up would be great. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_mrgreen.gif" alt=":mrgreen:" title="Mr. Green" /><br /><br /><br />EDIT:  "noopt"
<br /><br /><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">dmap noopt t<br />---- dmap ----<br />noOptimize = true<br />--- LoadDMapFile ---</div>
<br /><br />Ran a small test map (hollowed cube) noopt  means no optimize, and its fairly obvious that it doesn't. On a simple map of normaly about 115 tris (from r_showprimitives) it becomes 175 tris. However, when I did a map with about a175 tris to begin with after noopt it ended up more then doubleing at 380 tris. On a large map this would be very bad.
<br /><br />lightcarve seems to work exactly as avertized, but probably would add a lot of tris aswell on a large map (added about 60 tris to the 114 tris map). In the same map above, I added 4 small lights even placed only touching the floor (50 50 50) only the radous of the light was colored red, everything else was black so it works really well.  Also I tried noopt lightcarve, and got 380 plus tris. Keep in mind that that  was only touching the floor...
<br /><br />Also as you can see above you can run these from the console in game by   dmap option mapname</div>]]></body></post><post id="p46222" date="Posted: Fri Sep 03, 2004 11:45 am "><author>Rayne</author><body><![CDATA[<div class="postbody">I just starting to think that some options are obsolete.. I remember that alpha build made lightcarve by default, and now the retail version will not.. 
<br /><br /><br />Now i'm at work, but when I've the game in my hands i'm curious to test how ID compiled his maps.. If they used light carve, or not, how they avoid the dmap aspect that merge contigues brushes etc..</div>]]></body></post><post id="p47015" date="Posted: Sun Sep 05, 2004 3:19 am "><author>Gabrobot</author><body><![CDATA[<div class="postbody">I can't get the nodeblocksize command to work...it doesn't seem to recognize it, and instead thinks "nodeblocksize" is the name of the map to be compiled. Someone knowlegable on the Splash Damage forums told me about the nodeblocksize command as well, so this greatly puzzles me...</div>]]></body></post><post id="p52825" date="Posted: Thu Sep 23, 2004 9:42 pm "><author>W01f</author><body><![CDATA[<div class="postbody">I know for a fact that they didn't compile their maps with lightcarve. Just go into "color mode" in any of the maps and it is quite evident. They also didn't do much manual splitting..but that is understandable since they didn't have all the time in the world.
<br /><br />Lightcarve isn't as useful as you would think. It can be good for small maps...rocket arena style or what have you, but for maps as large as all of the doom3 stock maps, they would end up tripling triscounts, and making it run slow <span style="font-style: italic">everywhere</span>, rather than just areas with lots of lights.
<br /><br />Like I was saying in another topic, lightcarve will split <span style="font-style: italic">all</span> brushes in the map, even ones that wouldn't need to be split. This will kill the triscounts. You are better off splitting brushes manually, only where you see fit.</div>]]></body></post><post id="p58564" date="Posted: Sat Oct 23, 2004 7:57 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve!
<br />BTW and FYI: These BSP Brushes were made in 3ds Max and exported as a MAP, then opened and carved in D3Ed.
<br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve1.jpg" alt="Image" /><br /><img src="https://web.archive.org/web/20070509181516im_/http://trepaning.com/doom3/pics/lightcarve2.jpg" alt="Image" /></div>]]></body></post><post id="p58602" date="Posted: Sat Oct 23, 2004 12:51 pm "><author>Black Dog</author><body><![CDATA[<div class="postbody">In a scene where polycount is more of a limiting factor (~100K world polys), I suspect lightcarve would not double your FPS. That test map looks awfully like a best-case scenario for lightcarve, with those large unbroken surfaces and sparse large light volumes.</div>]]></body></post><post id="p58649" date="Posted: Sat Oct 23, 2004 4:45 pm "><author>RedWolf</author><body><![CDATA[<div class="postbody"><div class="quotetitle"><b>Quote:</b></div><div class="quotecontent">Lightcarve triples my triscount but more than doubles my FPS. I'll stick with Lightcarve! <br /></div>
<br /><br />I'd agree I'f you can keep your tris count under the recomended level, but If your already there with the map. Trippling tris count from say 60,000 to 180,000 would be bad.  <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p123604" date="Posted: Wed Nov 30, 2005 8:32 am "><author>Sebazzz</author><body><![CDATA[<div class="postbody">with nocm you just have no cm compiled</div>]]></body></post><post id="p123606" date="Posted: Wed Nov 30, 2005 8:50 am "><author>iceheart</author><body><![CDATA[<div class="postbody">
<!-- m -->
  <a class="postlink" href="https://web.archive.org/web/20070509181516/http://www.modwiki.net/wiki/Dmap_%28console_command%29">http://www.modwiki.net/wiki/Dmap_%28console_command%29</a>
<!-- m -->
</div>]]></body></post><post id="p123626" date="Posted: Wed Nov 30, 2005 2:51 pm "><author>Sebazzz</author><body><![CDATA[<div class="postbody">Okay. Alle the answers has been anwered then. <img src="https://web.archive.org/web/20070509181516im_/http://doom3world.org/phpbb2/images/smilies/icon_biggrin.gif" alt=":D" title="Very Happy" /></div>]]></body></post><post id="p123878" date="Posted: Fri Dec 02, 2005 12:32 am "><author>RedWolf</author><body><![CDATA[<div class="postbody">From iddevnet.com:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">01/14/05    dmap options<br />glview   Not implemented<br />v   Print extra information as the map is compiling<br />draw   Render the level as it's compiling (not sure if this works anymore)<br />noFlood   Don't 'flood' the level marking outside surfaces invisible<br />noLightCarve   Don't carve geometry based light volumes (default)<br />lightCarve   Carve the geometry based on the volume of the lights that touch them<br />noOpt   Don't optimize (merge and cut) triangles<br />verboseentities   Print extra information about entities (more so than with just verbose)<br />noCurves   Don't process patches<br />noModels   Not implemented<br />noClipSides   For debugging, don't clip the sides of a brush to other solid parts of the world<br />noCarve   Don't cut up any surfaces (like adding noFragment to every surface)<br />shadowOpt &lt;n&gt;   Set the shadow optimize level:<br />0 - No optimization<br />1 - SO_MERGE_SURFACES (default)<br />2 - SO_CULL




<!--
     FILE ARCHIVED ON 18:15:16 May 9, 2007 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 4:44:27 Sep 26, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
--></div></div>]]></body></post></posts></thread></xml>
