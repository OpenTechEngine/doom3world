<?xml version="1.0" encoding="UTF-8"?>
<xml><thread id="7276"><title>def files cleanup project: How Editor displays entity info</title><posts><post id="p61944" date="Posted: Sun Nov 07, 2004 4:47 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">What are .def files?
<br /><br />The.def files are entity definition files. They are located in the pak000.pk4 PAK file in the /def sub-folder. They contain tons of definitions for other things like models, animations, etc. But for the purpose of this, I'll stick with the definitions of entities you can place in maps. Information about the entities, description (usage) and the possible key/value pairs in the .def files are displayed in the top part of the entity window in DoomEdit. This is determined by the following parameters:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">"editor_usage"      "description text on first line of usage window"<br />"editor_usage2"      "description text on second line of usage window"<br />"editor_usage3"      "description text on second line of usage window"<br />etc... <br /><br />"editor_var keyname1"   "description text of key value"<br />"editor_var keyname2"   "description text of key value"<br />etc...</div><br /><br />For example, take a look at the <span style="font-weight: bold">weapon_chaingun</span> entity definition in the <span style="font-style: italic">weapon_chaingun.def</span> file (note that I omitted most of the parameters for the sake of clarity):<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">entityDef weapon_chaingun {<br />.......<br />.......<br />   "editor_usage"         "Chaingun"<br />   "editor_var triggersize"   "set this to expand the size of the pickup trigger volume"<br />   "editor_var triggerFirst"   "If set to 1, weapon cannot be picked up until triggered"<br />   "editor_var no_touch"      "If set to 1, weapon cannot be picked up and must be triggered to give to player"<br />.......<br />.......<br />}</div>
<br /><br />This is what is displayed in the entity window as a result:
<br /><br /><img src="https://web.archive.org/web/20101018034957im_/http://img131.exs.cx/img131/646/entity_inspector1.gif" alt="Image" /><br /><br /><span style="color: red"><span style="font-weight: bold">NOTE: the above example includes extra "editor_var" parameters not found in the original files. I added those.</span></span>
<br /><br />So thanks to this feature, the designer should have access all the relevant information on all the entities at a glance. And there is quite a lot of useful information in the .def files already. Unfortunately, much of that information is disorganized (either missing, outdated or innacurate and sometimes cryptic).
<br /><br />For the past few weeks, I have endeavoured to fix that. I'm currently working on improving/re-organizing those descriptions. My goal is to make available to the map designer as much information as possible directly in the editor interface without him having to open and browse the .def files (although that's always a good way to learn in detail how some entities work).
<br /><br />I'm also commenting out all the invalid entities (things like test_ , ss_ , for eg). Although the amount of those is far less than for the texture materials, it will help in 2 ways:
<br /><br />1. The editor should load a bit faster since there's less entities to parse
<br /><br />2. The entity right-click menu in the 2D view view will be shorter and a lot of scrolling up and down will be eliminated.
<br /><br />I still have a lot of work to do since there's a LOT of entities in Doom3 but things are going steadily. Once it's ready, I will release it in the form of a pk4 file.
<br /><br /><br />EDIT, Nov 15 1:19 AM EST:
<br /><br />Well, it's done. Finally <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />It comes in the form of a pk4 file of course and is about 300KB in size.
<br />As always, I did my utmost to make this as complete and error-free as possible. Should you spot any errors, don't hesitate to let me know.
<br />Enjoy  <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cool.gif" alt="8)" title="Cool" /><br /><br />EDIT-bis, Nov 16 9:08 PM EST:
<br /><br />I know this is quite early after the release of Version 1 but I had no choice. The sound shaders for the Sentry reside in the char_sentry.def file (unlike all the other sound shaders) and some of them were broken and thus commented out. Since I'm releasing my Clean sound shaders PAK in a few minutes. I felt that this update had to be posted first. Sorry for the inconvenience.
<br /><br />EDIT, Dec 14:
<br /><br />This is the latest version. Version 3 includes cleanup of the sentry model related materials since those resided in sentry.def. It also and more importantly includes improvements to the model based entities editor bounding box, particularly when it comes to the env_ragdoll entities.
<br /><br />Oh, and about the env_ ragdoll entities, now they do show up in render mode, they didn't before <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br />I have also posted an updated Clean shaders PAK V5 which I recommend everybody to download (please check the sticky posts for the the thread).
<br /><br /><a href="https://web.archive.org/web/20101018034957/http://www.pcgamemods.com/9081/" class="postlink">Clean Def files Version 3</a></div>]]></body></post><post id="p61949" date="Posted: Sun Nov 07, 2004 5:27 pm "><author>MBolus</author><body><![CDATA[<div class="postbody">Sounds good. The editor usage notes have been inadequate, so of course most of us have just been studying the files and testing different keys and values, or asking those who have done so.</div>]]></body></post><post id="p61951" date="Posted: Sun Nov 07, 2004 5:36 pm "><author>MaxiM</author><body><![CDATA[<div class="postbody">Good luck man! I sure hope you'll succeed. You would help us all fellows mappers a lot. <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cool.gif" alt="8)" title="Cool" /></div>]]></body></post><post id="p61981" date="Posted: Sun Nov 07, 2004 7:39 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody"><div class="quotetitle">MBolus wrote:</div><div class="quotecontent">The editor usage notes have been inadequate, so of course most of us have just been studying the files and testing different keys and values, or asking those who have done so.</div>
<br /><br />Granted, but I think this will be useful even for seasoned designers who've already learned how most, if not all of the entities work. Here's one example (among others): Zombies
<br /><br />There's roughly 25 different "Id standard" zombie monsters you can put in a map (excluding the Commandos, Sawyer and ZSec's). The difference between each is mostly cosmetic but let's say you want to use that specific one which is bald, wears a 2-piece green suit and walks with a limp?... Often, the name of the entity doesn't give an accurate description of what it looks like or how it behaves. To make matters worse, some of those are rendered without a head in the Cam view.
<br /><br />If you look at the 'Usage' field for zombies right now, it's either empty or incorrect. So this pretty much forces you to place a certain number of them in your map, compile and load the map in the game to see exactly what it will look like.
<br /><br />With an accurate description for <span style="font-weight: bold">monster_zombie_maint_fast</span> in the entity window's 'Usage' field:
<br /><br /><div class="codetitle"><b>Code:</b></div><div class="codecontent">   "editor_usage"         "Zombie monster"<br />   "editor_usage2"         "Description: Short grey hair, bloody mouth and hands, green suit with open jacket."<br />   "editor_usage3"         "Note: same as zombie_maint but walks with a limp."<br /></div>
<br /><br />... The designer just avoided a lot of guesswork and saved time. If you relied on the entity name only, how would you know this is the one you want?
<br /><br />Plus, keep in mind that "memory is a faculty that forgets". Let's say you have to leave town for a couple of weeks, either for work or on vacation. When you get back, you might find yourself wondering: <span style="font-style: italic">"... Now what was the name of that key again?..."</span>
<br /><br />With complete descriptions, the information is available right in front of you at a glance. The point is you don't have to search for stuff.</div>]]></body></post><post id="p62013" date="Posted: Sun Nov 07, 2004 10:28 pm "><author>Exitus</author><body><![CDATA[<div class="postbody">I would love to help! Shoot me an email @ <!-- e --><a href="mailto:ryanlewellen@comcast.net">ryanlewellen@comcast.net</a><!-- e -->
<br />or
<br />AIM me: smartidiot91
<br />I would prefer is you aimed me</div>]]></body></post><post id="p62103" date="Posted: Mon Nov 08, 2004 5:44 am "><author>MBolus</author><body><![CDATA[<div class="postbody">I look forward to it!</div>]]></body></post><post id="p62129" date="Posted: Mon Nov 08, 2004 8:40 am "><author>Eutectic</author><body><![CDATA[<div class="postbody"><div class="quotetitle">Exitus wrote:</div><div class="quotecontent">I would love to help! </div>
<br /><br />Thanks for the offer, I appreciate it. But like I said above, I've been working on this for several weeks already and I'm almost done. In fact, that's why I decided to post about it at this time <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /></div>]]></body></post><post id="p62175" date="Posted: Mon Nov 08, 2004 1:46 pm "><author>iceheart</author><body><![CDATA[<div class="postbody">I got this idea a month or so ago and I just took one look at the def files and stepped back in horror, I salute your perseverance and stubbornnes <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />!</div>]]></body></post><post id="p62973" date="Posted: Sat Nov 13, 2004 3:00 am "><author>Exitus</author><body><![CDATA[<div class="postbody">almost done?
<br />Sorry for reserecting this thread, but i wanna know if it is done or not</div>]]></body></post><post id="p62994" date="Posted: Sat Nov 13, 2004 5:44 am "><author>obsidian</author><body><![CDATA[<div class="postbody">Good job, Eutectic!
<br /><br />Would you mind e-mailing the .def files to me when you're done? I'd like to set up a unified download area for various editor related fixes and updates. Sort of an one stop shop to stay up to date with the latest files.</div>]]></body></post><post id="p62996" date="Posted: Sat Nov 13, 2004 5:57 am "><author>Eutectic</author><body><![CDATA[<div class="postbody"><div class="quotetitle">iceheart wrote:</div><div class="quotecontent">I got this idea a month or so ago and I just took one look at the def files and stepped back in horror, I salute your perseverance and stubbornnes <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />!</div>
<br /><br />Thanks iceheart. Actually, the def files aren't half as bad as the mtr files were. <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" /><br /><br /><br />exitus,
<br />Don't worry, it's coming. Real life issues have disrupted my work for a few days. When it's done I wil post a download link in this thread. In the mean time, please be patient.
<br /><br />obsidian,
<br />Thanks. As I mentionned above, I will post a link (pcgamemods). When it's up, you can DL it from there and redistribute it from your web site at your convenience.</div>]]></body></post><post id="p63280" date="Posted: Mon Nov 15, 2004 6:20 am "><author>Eutectic</author><body><![CDATA[<div class="postbody">The clean def files PAK is ready. It was a SOB of a job at times but I saw it though. The download link is at the bottom of my first post in this thread. Enjoy  <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_cool.gif" alt="8)" title="Cool" /></div>]]></body></post><post id="p63291" date="Posted: Mon Nov 15, 2004 9:27 am "><author>iceheart</author><body><![CDATA[<div class="postbody">Very nice! Good job! This should be quite helpful.
<br /><br />(Note that I'm speaking from the priviledged position of not actually having tried it yet, so I'm just assuming here <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />)</div>]]></body></post><post id="p63308" date="Posted: Mon Nov 15, 2004 12:20 pm "><author>hellstorm27</author><body><![CDATA[<div class="postbody">Eutastic- you are one of the forum's most useful contributors at the moment.
<br /><br />Unfortunately, there appears to be a bug, unless it's something I did wrong.  The additional keys for what parameters can be typed for the entities are all there, but the "Usage" section is blank in the entity window for almost every type of monster, including the zombie_maint_fast mentioned above.
<br /><br />Also, the "health" key for monsters, which appears to have been taken out, worked the last time I tried it (eg giving a zombie 1 health)
<br /><br />This isn't trying to be picky or undermine the long period of work, more showing the problems I have found and being constructive- I wouldn't want the work to be in vain because of some minor bug.</div>]]></body></post><post id="p63468" date="Posted: Tue Nov 16, 2004 10:02 pm "><author>Eutectic</author><body><![CDATA[<div class="postbody">Thanks and sorry for not replying earlier. I've been extremely busy on my current project (clean sound shaders) for the past 2 days.
<br /><br />About the "health" key for monsters:
<br />AFAIK, there was no "editor_var health" statement in Id's original monster_ default entity class from which all the monster entities inherit. So I fail to understand how the health key could have been in the list in the entity window originally. Also, I neither added nor commented out (I never remove anything) any such statement. So this can't possibly have anything to do with my def files pak.
<br /><br />In any case, the presence of the "health" key in the list is a mere convenience. Nothing prevents you from typing it in manually and setting it.
<br /><br />About the "usage" key for monsters:
<br />I checked again and everything works fine here. The description is usually very brief except in the case of zombies (because there are so many flavours of them). I have no idea what could be the cause of your problem.
<br /><br />Only the presence of custom pak file (other than mine) or having extracted game assets in the /base folder might come in conflict with my pak...  Or my pak file wasn't extracted to the base folder or you extracted the contents of the pak file itself instead of keeping it intact. I hope my mentionning this doesn't insult you but it's the only possibilities I can see.</div>]]></body></post><post id="p63476" date="Posted: Tue Nov 16, 2004 10:48 pm "><author>hellstorm27</author><body><![CDATA[<div class="postbody">Doesn't seem to be the problem, for the Usage part is blank but every other part seems to have updated according to the def patch... strange.
<br /><br />However, most of it being improved is better than none!</div>]]></body></post><post id="p63488" date="Posted: Wed Nov 17, 2004 1:28 am "><author>Eutectic</author><body><![CDATA[<div class="postbody">Here's proof of what I put forth. I took a screenshot within the editor to show you what I see when I select "monster_zombie_maint_fast" in the entity window:
<br /><br /><img src="https://web.archive.org/web/20101018034957im_/http://img46.exs.cx/img46/602/monsters_proof.gif" alt="Image" /><br /><br />I was thinking though... The "editor_var ..." statements did cause me some grief because their functioning is somewhat finicky. I noticed that if I had too much text in a given description, the field would sometimes be "cut off" abruptly as a result. Perhaps this is resolution dependent also?
<br /><br />I run my desktop and editor at 1280 x 1024. What resolution are you running at?</div>]]></body></post><post id="p63490" date="Posted: Wed Nov 17, 2004 1:32 am "><author>iceheart</author><body><![CDATA[<div class="postbody">"Eutastic"? I'll remember that one <img src="https://web.archive.org/web/20101018034957im_/http://www.doom3world.org/phpbb2/images/smilies/icon_smile.gif" alt=":)" title="Smile" />.</div>]]></body></post><post id="p63495" date="Posted: Wed Nov 17, 2004 2:16 am "><author>MaxiM</author><body><![CDATA[<div class="postbody">Thanks Eutectic, it works pretty much fine for now and it's grat! Kudos.</div>]]></body></post><post id="p63496" date="Posted: Wed Nov 17, 2004 2:43 am "><author>Brain Trepaning</author><body><![CDATA[<div class="postbody">Pretty friggin' sweet. Sitting in my base next to Eutectic's CleanMats and working fine.  Res 1024x768 and zom_maint can be read no problem.</div>]]></body></post></posts></thread></xml>
